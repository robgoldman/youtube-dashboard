<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YouTube Channel Analytics - Unlock Your Revenue Potential | PrimeTime Media</title>
    <link rel="manifest" href="/manifest.json">
    <meta name="theme-color" content="#1E40AF">
    <style>
        /* Reset and Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: #ffffff;
            color: #1a1a1a;
            font-family: Inter, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            font-size: 16px;
        }

        /* Container with F-pattern layout and proper CTA spacing */
        .yta-container {
            background: #ffffff;
            color: #1a1a1a;
            padding: 24px;
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            position: relative;
            /* F-pattern spacing for critical elements */
            padding-top: 100px; /* Space for critical banner */
            padding-bottom: 120px; /* Space for floating CTAs with 24px clearance */
        }

        /* F-Pattern Layout Grid */
        .f-pattern-grid {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 32px;
            margin-bottom: 32px;
        }

        .f-pattern-primary {
            grid-column: 1;
        }

        .f-pattern-secondary {
            grid-column: 2;
        }

        /* Critical Metrics Banner - F-Pattern Top-Left */
        .critical-metrics-banner {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: linear-gradient(135deg, #DC143C 0%, #EF4444 100%);
            padding: 16px 24px;
            z-index: 1000;
            box-shadow: 0 4px 20px rgba(220, 20, 60, 0.3);
            display: none;
            animation: slideDown 0.5s ease;
            color: white;
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
            font-size: 16px;
            min-height: 60px;
        }

        .critical-metrics-banner.show {
            display: block;
        }

        .critical-metrics-banner .yta-btn-primary {
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            transform: scale(0.95);
        }

        .critical-metrics-banner .yta-btn-primary:hover {
            transform: scale(1.1) translateY(-2px);
            padding: 16px 40px;
            font-size: 17px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
        }

        @keyframes slideDown {
            from { transform: translateY(-100%); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .critical-metrics-content {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 20px;
            flex-wrap: wrap;
        }

        .critical-metric-value {
            font-size: 32px;
            font-weight: 800;
            text-shadow: 0 2px 4px rgba(0,0,0,0.2);
            color: #FFE4E1;
        }

        .critical-metric-label {
            font-size: 16px;
            font-weight: 600;
            opacity: 0.95;
            margin-bottom: 4px;
        }

        /* Primary CTA Button - Orange for maximum conversion */
        .yta-btn-primary {
            background: #F97316;
            color: white;
            border: none;
            padding: 16px 32px;
            font-size: 16px;
            font-weight: 600;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            position: relative;
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(249, 115, 22, 0.3);
            font-family: Inter, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            transform: scale(1);
            transform-origin: center;
            margin: 24px 0; /* 24px clearance minimum */
            min-height: 44px; /* Mobile touch target */
            min-width: 44px;
            text-align: center;
            line-height: 1.2;
        }

        .yta-btn-primary::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: transparent;
            z-index: -1;
        }

        .yta-btn-primary:hover {
            background: #EA580C;
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 8px 25px rgba(249, 115, 22, 0.4);
        }

        /* Reassurance text for CTAs */
        .cta-reassurance {
            font-size: 14px;
            color: #10B981;
            margin-top: 8px;
            text-align: center;
            font-weight: 500;
        }

        /* Secondary Button Style */
        .yta-btn-secondary {
            background: #E5E7EB;
            color: #1a1a1a;
            border: none;
            padding: 12px 24px;
            font-size: 14px;
            font-weight: 600;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            transform: scale(1);
        }

        .yta-btn-secondary:hover {
            background: #D1D5DB;
            transform: translateY(-2px) scale(1.08);
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            padding: 13px 28px;
        }

        /* Header Section */
        .yta-header {
            text-align: center;
            padding: 40px 20px;
            margin-bottom: 40px;
            position: relative;
            background: linear-gradient(135deg, #EBF4FF 0%, #F0F9FF 100%);
            border-radius: 16px;
        }

        /* Trust Badge */
        .trust-badge {
            background: #10B981;
            color: white;
            padding: 8px 20px;
            border-radius: 20px;
            display: inline-block;
            margin-bottom: 20px;
            font-weight: 600;
            font-size: 14px;
        }

        .value-proposition {
            max-width: 800px;
            margin: 0 auto;
        }

        .value-headline {
            font-size: 36px;
            font-weight: 800;
            margin-bottom: 16px;
            color: #1E40AF;
            line-height: 1.2;
        }

        .value-subtitle {
            font-size: 20px;
            color: #4B5563;
            margin-bottom: 30px;
            line-height: 1.5;
        }

        /* Trust Indicators */
        .trust-indicators {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin: 30px 0;
            flex-wrap: wrap;
        }

        .trust-indicator {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
            color: #6B7280;
        }

        .trust-indicator-icon {
            color: #10B981;
            font-size: 18px;
        }

        /* Revenue Opportunity Bar - Top placement */
        .revenue-opportunity-bar {
            position: fixed;
            top: 70px;
            left: 50%;
            transform: translateX(-50%);
            background: linear-gradient(135deg, #FFF7ED 0%, #FFEDD5 100%);
            border: 2px solid #F97316;
            border-radius: 12px;
            padding: 12px 24px;
            z-index: 400;
            display: none;
            box-shadow: 0 4px 15px rgba(249, 115, 22, 0.2);
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
            max-width: 600px;
            width: 90%;
        }

        .revenue-opportunity-bar.show {
            display: flex;
            align-items: center;
            justify-content: space-between;
            animation: slideDown 0.5s ease;
        }

        /* Usage Limits - Minimal top notification */
        .usage-limits {
            position: fixed;
            top: 130px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(255, 255, 255, 0.98);
            border: 2px solid #F97316;
            border-radius: 8px;
            padding: 12px 20px;
            z-index: 350;
            display: none;
            box-shadow: 0 4px 15px rgba(249, 115, 22, 0.2);
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
            max-width: 500px;
            width: 90%;
        }

        .usage-limits.show {
            display: flex;
            align-items: center;
            justify-content: space-between;
            animation: slideDown 0.5s ease;
        }

        .usage-limits-urgent {
            background: linear-gradient(135deg, #FEF3C7 0%, #FDE68A 100%);
            border-color: #DC143C;
            animation: urgentPulse 2s infinite;
        }

        /* Daily Streak - Small top corner */
        .daily-streak {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.95);
            border: 2px solid #F97316;
            padding: 8px 12px;
            border-radius: 20px;
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 12px;
            z-index: 300;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            color: #1a1a1a;
            backdrop-filter: blur(10px);
        }

        /* Bottom CTA Area - Main conversion zone */
        .bottom-cta-area {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(to top, rgba(255, 255, 255, 0.98) 90%, transparent);
            padding: 16px 20px;
            z-index: 200;
            display: none;
            box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(15px);
            border-top: 1px solid rgba(249, 115, 22, 0.2);
        }

        .bottom-cta-area.show {
            display: block;
            animation: slideUp 0.5s ease;
        }

        .bottom-cta-content {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 20px;
            flex-wrap: wrap;
        }

        /* Remove most floating elements */
        .behavioral-prompt,
        .social-proof-ticker,
        .feature-progress {
            display: none !important;
        }

        /* Input Section */
        .yta-input-section {
            text-align: center;
            padding: 40px 20px;
            margin-bottom: 40px;
            background: #F9FAFB;
            border-radius: 16px;
            border: 1px solid #E5E7EB;
        }

        .yta-input {
            width: 100%;
            max-width: 500px;
            margin: 0 auto 24px;
            padding: 16px 24px;
            background: white;
            border: 2px solid #E5E7EB;
            border-radius: 8px;
            color: #1a1a1a;
            font-size: 16px;
            text-align: center;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            font-family: Inter, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            transform: scale(1);
        }

        .yta-input:hover {
            transform: scale(1.05);
            border-color: #F97316;
            box-shadow: 0 4px 12px rgba(249, 115, 22, 0.1);
        }

        .yta-input:focus {
            outline: none;
            border-color: #3B82F6;
            box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.15);
            transform: scale(1.05);
        }

        /* Loading State */
        .yta-loading {
            text-align: center;
            padding: 60px;
            background: #F9FAFB;
            border-radius: 16px;
            margin: 20px 0;
            display: none;
            border: 1px solid #E5E7EB;
        }

        .yta-spinner {
            width: 48px;
            height: 48px;
            border: 3px solid #E5E7EB;
            border-top-color: #3B82F6;
            border-radius: 50%;
            animation: yta-spin 0.8s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes yta-spin {
            to { transform: rotate(360deg); }
        }

        /* Results Section */
        .yta-results {
            display: none;
        }

        /* Channel Info Card */
        .yta-channel {
            background: linear-gradient(135deg, #EBF4FF 0%, #F0F9FF 100%);
            border-radius: 16px;
            padding: 40px;
            margin-bottom: 40px;
            text-align: center;
            border: 1px solid #DBEAFE;
            position: relative;
            overflow: hidden;
        }

        /* Optimization Metrics Card */
        .yta-opt {
            background: white;
            border: 2px solid #F97316;
            border-radius: 16px;
            padding: 40px;
            margin-bottom: 40px;
            position: relative;
            box-shadow: 0 4px 6px rgba(249, 115, 22, 0.05);
        }

        .yta-opt-header {
            font-size: 28px;
            font-weight: 700;
            margin-bottom: 30px;
            text-align: center;
            color: #1E40AF;
        }

        /* Metric Cards */
        .yta-metric {
            text-align: center;
            padding: 24px;
            background: #F9FAFB;
            border-radius: 12px;
            border: 1px solid #E5E7EB;
            transition: all 0.3s ease;
            position: relative;
            cursor: help;
        }

        .yta-metric:hover {
            transform: translateY(-4px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.05);
            border-color: #3B82F6;
        }

        .yta-metric-label {
            font-size: 12px;
            color: #6B7280;
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            font-weight: 600;
        }

        .yta-metric-value {
            font-size: 32px;
            font-weight: 700;
            color: #1E40AF;
        }

        /* Annual Revenue Metric - Special Styling */
        .annual-revenue-metric {
            background: linear-gradient(135deg, #FFF7ED 0%, #FFEDD5 100%);
            border: 2px solid #F97316;
            transform: scale(1.05);
            position: relative;
            overflow: visible;
            z-index: 1;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            cursor: pointer;
        }

        .annual-revenue-metric:hover {
            transform: scale(1.15) translateY(-8px);
            box-shadow: 0 15px 40px rgba(249, 115, 22, 0.3);
        }

        .annual-revenue-metric:hover .star-border::before {
            opacity: 1;
            transform: scale(1.1);
            box-shadow: 0 0 50px rgba(249, 115, 22, 1), inset 0 0 50px rgba(249, 115, 22, 0.6);
        }

        .annual-revenue-metric:hover .yta-metric-value {
            font-size: 38px;
            animation: valueGrow 0.4s ease;
        }

        @keyframes valueGrow {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        /* Star Border Animation */
        .star-border {
            position: absolute;
            inset: -20px;
            pointer-events: none;
            z-index: 1;
        }

        .star-border::before {
            content: '';
            position: absolute;
            inset: 0;
            border-radius: 12px;
            border: 3px solid #F97316;
            opacity: 0.8;
            box-shadow: 0 0 30px rgba(249, 115, 22, 0.6), inset 0 0 30px rgba(249, 115, 22, 0.3);
            animation: borderPulse 2s ease-in-out infinite;
        }

        @keyframes borderPulse {
            0%, 100% { opacity: 0.8; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.02); }
        }

        /* Animated Stars */
        @keyframes moveAlongBorder {
            0% { transform: rotate(0deg) translateX(50px) rotate(0deg); }
            100% { transform: rotate(360deg) translateX(50px) rotate(-360deg); }
        }

        .star-border span {
            position: absolute;
            font-size: 24px;
            color: #F97316;
            text-shadow: 0 0 20px rgba(249, 115, 22, 0.8);
            top: 50%;
            left: 50%;
            transform-origin: center;
        }

        /* Score Display */
        .yta-score-circle {
            width: 140px;
            height: 140px;
            border-radius: 50%;
            background: conic-gradient(var(--score-color) 0deg, var(--score-color) var(--score-deg), #E5E7EB var(--score-deg), #E5E7EB 360deg);
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 20px;
            position: relative;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .yta-score-inner {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background: white;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.06);
        }

        /* Alert Box */
        .yta-alert {
            display: flex;
            gap: 20px;
            padding: 24px;
            border-radius: 12px;
            margin-bottom: 30px;
            align-items: center;
            background: linear-gradient(135deg, #FEF3C7 0%, #FDE68A 100%);
            border: 2px solid #F59E0B;
        }

        /* Video List */
        .video-item {
            display: flex;
            gap: 16px;
            padding: 20px;
            background: #F9FAFB;
            border-radius: 12px;
            margin-bottom: 12px;
            position: relative;
            transition: all 0.3s ease;
            cursor: pointer;
            border: 1px solid #E5E7EB;
        }

        .video-item:hover {
            background: white;
            transform: translateX(4px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            border-color: #3B82F6;
        }

        /* Performance Metrics */
        .yta-progress {
            height: 8px;
            background: #E5E7EB;
            border-radius: 4px;
            overflow: hidden;
        }

        .yta-progress-fill {
            height: 100%;
            border-radius: 4px;
            transition: width 1s ease;
        }

        .yta-progress-poor { 
            background: linear-gradient(90deg, #EF4444 0%, #F87171 100%);
        }
        .yta-progress-good { 
            background: linear-gradient(90deg, #F97316 0%, #FB923C 100%);
        }
        .yta-progress-excellent { 
            background: linear-gradient(90deg, #10B981 0%, #34D399 100%);
        }

        /* Unified Card System */
        .yta-card {
            background: white;
            border-radius: 16px;
            padding: 32px;
            border: 1px solid #E5E7EB;
            transition: all 0.3s ease;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
            margin-bottom: 24px;
        }

        .yta-card:hover {
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.08);
            transform: translateY(-2px);
        }

        .yta-card h3 {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 24px;
            color: #1a1a1a;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        /* Opportunity Visualization Cards */
        .opportunity-visual {
            background: linear-gradient(135deg, #FFF7ED 0%, #FFEDD5 100%);
            border: 2px solid #F97316;
            border-radius: 16px;
            padding: 32px;
            text-align: center;
            position: relative;
            overflow: hidden;
            margin: 24px 0;
        }

        .opportunity-visual::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(249, 115, 22, 0.1) 0%, transparent 70%);
            animation: opportunityGlow 3s ease-in-out infinite;
        }

        @keyframes opportunityGlow {
            0%, 100% { opacity: 0.5; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.1); }
        }

        .opportunity-amount {
            font-size: 48px;
            font-weight: 800;
            color: #F97316;
            margin: 16px 0;
            text-shadow: 0 2px 4px rgba(249, 115, 22, 0.2);
        }

        /* Social Proof Widgets */
        .social-proof-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 16px;
            margin: 24px 0;
        }

        .social-proof-card {
            background: linear-gradient(135deg, #F0FDF4 0%, #DCFCE7 100%);
            border: 2px solid #10B981;
            border-radius: 12px;
            padding: 20px;
            position: relative;
        }

        .peer-comparison {
            background: #F9FAFB;
            border: 1px solid #E5E7EB;
            border-radius: 12px;
            padding: 20px;
            margin: 16px 0;
        }

        .peer-metric {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 12px 0;
            font-size: 16px;
        }

        .peer-metric-value {
            font-weight: 700;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 14px;
        }

        .peer-better {
            background: #DCFCE7;
            color: #10B981;
        }

        .peer-worse {
            background: #FEE2E2;
            color: #EF4444;
        }

        /* AI Analysis Section */
        .ai-section {
            background: #F9FAFB;
            border: 1px solid #E5E7EB;
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 20px;
            position: relative;
        }

        .ai-section-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 16px;
            font-size: 18px;
            font-weight: 700;
            color: #1E40AF;
        }

        /* Grid Layouts */
        .yta-opt-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .yta-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }

        /* Color System */
        .yta-blue { color: #1E40AF; }
        .yta-green { color: #10B981; }
        .yta-orange { color: #F97316; }
        .yta-red { color: #EF4444; }

        /* Behavioral Prompt - Moved to left side */
        .behavioral-prompt {
            position: fixed;
            bottom: 160px;
            left: 20px;
            background: rgba(255, 255, 255, 0.98);
            padding: 16px;
            border-radius: 12px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.08);
            display: none;
            animation: slideInLeft 0.5s ease;
            z-index: 600;
            max-width: 260px;
            border: 1px solid #E5E7EB;
            backdrop-filter: blur(10px);
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            transform: scale(0.9);
            transform-origin: bottom left;
        }

        .behavioral-prompt::before {
            content: '';
            position: absolute;
            top: -30px;
            left: -30px;
            right: -30px;
            bottom: -30px;
            z-index: -1;
        }

        .behavioral-prompt:hover {
            transform: scale(1.05) translateX(10px) translateY(-10px);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.12);
            max-width: 300px;
        }

        .behavioral-prompt.show {
            display: block;
        }

        @keyframes slideInLeft {
            from {
                transform: translateX(-100%) scale(0.8);
                opacity: 0;
            }
            to {
                transform: translateX(0) scale(0.9);
                opacity: 1;
            }
        }

        .behavioral-prompt h4 {
            margin: 0 0 12px 0;
            font-size: 16px;
            color: #1E40AF;
        }

        .behavioral-prompt p {
            margin: 0 0 16px 0;
            font-size: 13px;
            line-height: 1.5;
            color: #4B5563;
        }

        /* Social Proof Ticker - Moved to left side */
        .social-proof-ticker {
            position: fixed;
            bottom: 80px;
            left: 20px;
            background: rgba(255, 255, 255, 0.98);
            border: 1px solid #10B981;
            border-radius: 8px;
            padding: 10px 14px;
            display: none;
            animation: slideInLeft 0.5s ease;
            z-index: 550;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.06);
            backdrop-filter: blur(10px);
            max-width: 240px;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            transform: scale(0.85);
            transform-origin: bottom left;
        }

        .social-proof-ticker::before {
            content: '';
            position: absolute;
            top: -20px;
            left: -20px;
            right: -20px;
            bottom: -20px;
            z-index: -1;
        }

        .social-proof-ticker:hover {
            transform: scale(1.05) translateX(10px) translateY(-5px);
            box-shadow: 0 8px 20px rgba(16, 185, 129, 0.15);
            max-width: 280px;
            border-width: 2px;
        }

        .social-proof-ticker.show {
            display: block;
        }

        .social-proof-content {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .social-proof-avatar {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: #10B981;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 12px;
        }

        /* Achievement Modal */
        .achievement-unlocked {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0);
            background: white;
            color: #1a1a1a;
            padding: 32px;
            border-radius: 16px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
            z-index: 1020;
            text-align: center;
            animation: achievementPop 0.5s ease forwards;
            border: 2px solid #F97316;
        }

        @keyframes achievementPop {
            to {
                transform: translate(-50%, -50%) scale(1);
            }
        }

        /* Feature Progress - Moved to left sidebar */
        .feature-progress {
            position: fixed;
            top: 430px;
            left: 20px;
            background: rgba(255, 255, 255, 0.98);
            border: 2px solid #F97316;
            padding: 16px;
            border-radius: 12px;
            width: 220px;
            display: none;
            z-index: 450;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.08);
            backdrop-filter: blur(10px);
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            transform: scale(0.9);
            transform-origin: top left;
        }

        .feature-progress::before {
            content: '';
            position: absolute;
            top: -20px;
            left: -20px;
            right: -20px;
            bottom: -20px;
            z-index: -1;
        }

        .feature-progress:hover {
            transform: scale(1.05) translateX(10px);
            width: 250px;
            box-shadow: 0 15px 35px rgba(249, 115, 22, 0.15);
        }

        .feature-progress:hover .yta-btn-primary {
            padding: 14px 20px;
            font-size: 14px;
        }

        .feature-checkbox {
            width: 18px;
            height: 18px;
            border: 2px solid #E5E7EB;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            color: white;
            background: white;
        }

        .feature-checkbox.checked {
            background: #10B981;
            border-color: #10B981;
        }

        /* Floating CTA - Minimal top-right corner */
        #floatingCTA {
            position: fixed;
            top: 20px;
            right: 120px;
            z-index: 250;
            display: none;
            animation: fadeIn 0.5s ease;
            transition: all 0.3s ease;
        }

        #floatingCTA button {
            background: rgba(249, 115, 22, 0.9);
            color: white;
            border: none;
            padding: 10px 16px;
            border-radius: 20px;
            font-weight: 600;
            font-size: 13px;
            box-shadow: 0 2px 8px rgba(249, 115, 22, 0.3);
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: Inter, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            backdrop-filter: blur(10px);
            white-space: nowrap;
        }

        #floatingCTA:hover button {
            transform: scale(1.05);
            box-shadow: 0 4px 15px rgba(249, 115, 22, 0.4);
        }

        /* Mobile Sticky CTA - Keep but simpler */
        .mobile-sticky-cta {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(to top, rgba(255, 255, 255, 0.98) 90%, transparent);
            padding: 12px 16px;
            display: none;
            z-index: 898;
            animation: slideUp 0.5s ease;
            box-shadow: 0 -4px 12px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
            border-top: 1px solid rgba(249, 115, 22, 0.2);
        }

        .mobile-sticky-cta.show {
            display: block;
        }

        .mobile-sticky-cta .yta-btn-primary {
            width: 100%;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .mobile-sticky-cta:hover .yta-btn-primary {
            padding: 18px 30px;
            font-size: 17px;
            box-shadow: 0 8px 25px rgba(249, 115, 22, 0.4);
        }

        /* PWA Prompt */
        .pwa-prompt {
            position: fixed;
            bottom: 100px;
            left: 50%;
            transform: translateX(-50%) scale(0.9);
            background: rgba(255, 255, 255, 0.98);
            border: 2px solid #3B82F6;
            padding: 24px;
            border-radius: 16px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            display: none;
            z-index: 1015;
            text-align: center;
            max-width: 350px;
            backdrop-filter: blur(10px);
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .pwa-prompt.show {
            display: block;
            animation: slideUp 0.5s ease;
        }

        .pwa-prompt:hover {
            transform: translateX(-50%) scale(1.05);
            box-shadow: 0 15px 40px rgba(59, 130, 246, 0.2);
        }

        .pwa-prompt .yta-btn-primary {
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .pwa-prompt:hover .yta-btn-primary {
            transform: scale(1.1);
        }

        /* Scenario Modal */
        .scenario-modal {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            border: 2px solid #F97316;
            border-radius: 16px;
            padding: 40px;
            z-index: 1010;
            display: none;
            max-width: 500px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
        }

        .scenario-modal h3 {
            color: #1E40AF;
            margin-bottom: 30px;
            font-size: 24px;
            text-align: center;
        }

        /* Modal Overlay */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(2px);
            z-index: 1000;
            display: none;
        }

        /* Skeleton Loading */
        .skeleton {
            background: linear-gradient(90deg, #F3F4F6 0%, #E5E7EB 50%, #F3F4F6 100%);
            background-size: 200% 100%;
            animation: skeleton-loading 1.5s ease-in-out infinite;
            border-radius: 8px;
        }

        @keyframes skeleton-loading {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }

        /* Empty States */
        .empty-state-premium {
            text-align: center;
            padding: 48px;
            background: #F9FAFB;
            border: 2px dashed #E5E7EB;
            border-radius: 12px;
            margin: 20px 0;
        }

        .empty-state-icon {
            font-size: 48px;
            margin-bottom: 16px;
            opacity: 0.5;
        }

        .empty-state-title {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 12px;
            color: #1E40AF;
        }

        .empty-state-description {
            color: #6B7280;
            margin-bottom: 24px;
            font-size: 14px;
        }

        /* Premium Teaser */
        .premium-teaser {
            background: linear-gradient(135deg, #FFF7ED 0%, #FFEDD5 100%);
            border: 1px dashed #F97316;
            border-radius: 8px;
            padding: 20px;
            margin: 16px 0;
            position: relative;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            transform: scale(1);
        }

        .premium-teaser:hover {
            border-style: solid;
            transform: translateY(-4px) scale(1.02);
            box-shadow: 0 8px 20px rgba(249, 115, 22, 0.15);
            border-width: 2px;
        }

        .premium-teaser .yta-btn-primary {
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .premium-teaser:hover .yta-btn-primary {
            transform: scale(1.1);
            padding: 16px 36px;
        }

        .premium-teaser-badge {
            position: absolute;
            top: -10px;
            right: 20px;
            background: #F97316;
            color: white;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 700;
            text-transform: uppercase;
        }

        /* Limited Time Offer */
        .limited-time-offer {
            background: linear-gradient(135deg, #1E40AF, #3B82F6);
            color: white;
            padding: 20px;
            border-radius: 12px;
            margin: 20px 0;
            text-align: center;
            box-shadow: 0 4px 12px rgba(30, 64, 175, 0.2);
        }

        .countdown-timer {
            font-size: 28px;
            font-weight: 800;
            margin: 12px 0;
        }

        /* Mobile-First Responsive Design */
        @media (max-width: 768px) {
            .yta-container {
                padding: 16px;
                padding-top: 90px;
                padding-bottom: 80px;
            }
            
            /* F-pattern becomes single column on mobile */
            .f-pattern-grid {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            /* Revenue opportunity bar mobile */
            .revenue-opportunity-bar {
                top: 60px;
                padding: 10px 16px;
                flex-direction: column;
                text-align: center;
                gap: 12px;
            }
            
            /* Usage limits mobile */
            .usage-limits {
                top: 120px;
                padding: 10px 16px;
                flex-direction: column;
                text-align: center;
                gap: 8px;
            }
            
            /* Daily streak mobile */
            .daily-streak {
                top: 15px;
                right: 15px;
                padding: 6px 10px;
                font-size: 11px;
            }
            
            /* Floating CTA mobile */
            #floatingCTA {
                top: 15px;
                right: 80px;
            }
            
            #floatingCTA button {
                padding: 8px 12px;
                font-size: 12px;
            }
            
            /* Bottom CTA area mobile */
            .bottom-cta-area {
                padding: 12px 16px;
            }
            
            .bottom-cta-content {
                flex-direction: column;
                gap: 12px;
                text-align: center;
            }
            
            /* Ensure all touch targets are 44px minimum */
            .yta-btn-primary {
                min-height: 48px;
                min-width: 48px;
                padding: 16px 24px;
                font-size: 16px;
                width: 100%;
                margin: 16px 0;
            }
            
            .yta-btn-secondary {
                min-height: 44px;
                min-width: 44px;
                padding: 12px 20px;
                font-size: 16px;
            }
            
            /* Critical banner mobile */
            .critical-metrics-banner {
                padding: 12px 16px;
                font-size: 14px;
            }
            
            .critical-metrics-content {
                flex-direction: column;
                gap: 12px;
                text-align: center;
            }
            
            .critical-metric-value {
                font-size: 28px;
            }
            
            /* Card responsive */
            .yta-card {
                padding: 20px;
                margin-bottom: 16px;
            }
            
            /* Social proof mobile */
            .social-proof-grid {
                grid-template-columns: 1fr;
                gap: 12px;
            }
            
            /* Opportunity visual mobile */
            .opportunity-amount {
                font-size: 36px;
            }
            
            /* Typography mobile optimization */
            h1, h2, h3 {
                font-size: 24px;
            }
            
            .value-headline {
                font-size: 28px;
            }
            
            .value-subtitle {
                font-size: 18px;
            }
            
            /* Grid layouts mobile */
            .yta-opt-grid {
                grid-template-columns: 1fr;
                gap: 16px;
            }
            
            .yta-grid {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            /* Remove horizontal scroll */
            body {
                overflow-x: hidden;
            }
            
            .yta-container {
                max-width: 100vw;
                overflow-x: hidden;
            }
            
            /* Hide close button on banner for mobile */
            .critical-metrics-content > button:last-child {
                display: none;
            }
            
            /* Ensure touch targets */
            button, .video-item, .trust-indicator {
                min-height: 44px;
                min-width: 44px;
            }
            
            /* Input mobile */
            .yta-input {
                font-size: 16px; /* Prevents zoom on iOS */
                min-height: 48px;
                padding: 16px;
            }
        }

        @keyframes slideIn {
            from {
                transform: translateX(100px);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        @keyframes slideUp {
            from { transform: translateX(-50%) translateY(100px); opacity: 0; }
            to { transform: translateX(-50%) translateY(0); opacity: 1; }
        }

        /* Personalization Badge */
        .personalization-badge {
            position: absolute;
            top: 15px;
            right: 15px;
            background: linear-gradient(135deg, #F97316, #EA580C);
            color: white;
            padding: 6px 15px;
            border-radius: 15px;
            font-size: 11px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            display: none;
            animation: slideIn 0.5s ease;
        }

        .personalization-badge.show {
            display: block;
        }

        /* Video Optimization Indicator */
        .video-opt-indicator {
            display: inline-block;
            width: 28px;
            height: 28px;
            line-height: 28px;
            text-align: center;
            font-weight: bold;
            font-size: 18px;
            border-radius: 50%;
            cursor: help;
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            transform: scale(1);
        }

        .video-opt-indicator:hover {
            transform: scale(1.4) rotate(10deg);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }

        .video-opt-indicator.optimized {
            color: #10B981;
            background: rgba(16, 185, 129, 0.1);
            border: 2px solid #10B981;
        }

        .video-opt-indicator.optimized:hover {
            background: rgba(16, 185, 129, 0.2);
            box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
        }

        .video-opt-indicator.not-optimized {
            color: #EF4444;
            background: rgba(239, 68, 68, 0.1);
            border: 2px solid #EF4444;
            animation: warningPulse 2s ease-in-out infinite;
        }

        .video-opt-indicator.not-optimized:hover {
            background: rgba(239, 68, 68, 0.2);
            box-shadow: 0 4px 12px rgba(239, 68, 68, 0.3);
            animation: warningShake 0.5s ease;
        }

        @keyframes warningPulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.6; }
        }

        @keyframes warningShake {
            0%, 100% { transform: scale(1.4) rotate(0deg); }
            25% { transform: scale(1.4) rotate(-5deg); }
            75% { transform: scale(1.4) rotate(5deg); }
        }

        /* Revenue Share Box */
        .revenue-share-box {
            background: linear-gradient(135deg, #FFF7ED 0%, #FFEDD5 100%);
            border: 2px solid #F97316;
            border-radius: 16px;
            padding: 32px;
            text-align: center;
            margin: 24px 0;
            transition: all 0.3s ease;
            position: relative;
        }

        .revenue-share-box:hover {
            transform: scale(1.02);
            box-shadow: 0 10px 30px rgba(249, 115, 22, 0.15);
        }

        .revenue-share-box .yta-btn-primary {
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            transform: scale(1);
        }

        .revenue-share-box:hover .yta-btn-primary {
            transform: scale(1.1);
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0% { box-shadow: 0 4px 15px rgba(249, 115, 22, 0.4); }
            50% { box-shadow: 0 8px 25px rgba(249, 115, 22, 0.6); }
            100% { box-shadow: 0 4px 15px rgba(249, 115, 22, 0.4); }
        }

        /* Stats Display */
        .yta-stats {
            display: flex;
            justify-content: space-around;
            margin-top: 24px;
            flex-wrap: wrap;
            gap: 20px;
        }

        .yta-stat {
            text-align: center;
            min-width: 100px;
        }

        .yta-stat-value {
            font-size: 24px;
            font-weight: 700;
            color: #1E40AF;
        }

        /* Trust and Conversion Elements */
        .trust-item {
            display: flex;
            align-items: center;
            gap: 8px;
            color: #6B7280;
            font-size: 14px;
        }

        .checkmark {
            color: #10B981;
            font-size: 18px;
        }

        /* Lost Revenue Timeline */
        #lossGrowthBar {
            background: linear-gradient(90deg, #EF4444 0%, #F97316 50%, #F87171 100%);
            box-shadow: 0 2px 6px rgba(239, 68, 68, 0.3);
            animation: lossGrow 2s ease-out;
        }

        @keyframes lossGrow {
            from { width: 0 !important; }
        }

        /* Chart Bars */
        #chartBars > div {
            border-radius: 6px 6px 0 0;
            transition: all 0.8s ease;
        }

        /* Progress Ring */
        .progress-ring {
            transform: rotate(-90deg);
        }
        
        .progress-ring-circle {
            stroke-dasharray: 126;
            stroke-dashoffset: 126;
            transition: stroke-dashoffset 0.5s ease;
        }
    </style>
</head>
<body>
    <div class="yta-container">
        <!-- Home Link -->
        <div class="home-link-mobile" style="position: fixed; top: 20px; left: 20px; z-index: 1001;">
            <a href="https://primetime.media" style="display: flex; align-items: center; gap: 10px; text-decoration: none; background: rgba(255, 255, 255, 0.95); padding: 10px 20px; border-radius: 25px; box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1); transition: all 0.3s ease; border: 2px solid #E5E7EB;" onmouseover="this.style.transform='scale(1.1)'; this.style.boxShadow='0 4px 20px rgba(30, 64, 175, 0.15)'; this.style.borderColor='#3B82F6'" onmouseout="this.style.transform='scale(1)'; this.style.boxShadow='0 2px 10px rgba(0, 0, 0, 0.1)'; this.style.borderColor='#E5E7EB'">
                <span style="font-size: 20px;">🏠</span>
                <span style="color: #1E40AF; font-weight: 600; font-size: 14px;">Back to Home</span>
            </a>
        </div>
        
        <!-- Critical Metrics Banner (F-Pattern Top) -->
        <div class="critical-metrics-banner" id="criticalBanner">
            <div class="critical-metrics-content">
                <div style="flex: 1; min-width: 250px;">
                    <div class="critical-metric-label">🚨 CRITICAL REVENUE ALERT</div>
                    <div style="display: flex; align-items: center; gap: 12px;">
                        <span style="font-size: 20px;">💸</span>
                        <div>
                            <div style="font-size: 16px; font-weight: 600;">YOU'RE LOSING</div>
                            <div class="critical-metric-value" id="criticalLostRevenue">$0</div>
                            <div style="font-size: 14px; opacity: 0.9;">in potential revenue</div>
                        </div>
                    </div>
                </div>
                <div style="text-align: center;">
                    <button class="yta-btn-primary" onclick="window.open('https://www.primetime.media/beta-1', '_blank')" style="margin: 8px 0; white-space: nowrap; background: rgba(255,255,255,0.2); backdrop-filter: blur(10px); border: 2px solid white;">
                        🛑 Stop Losing Money Now →
                    </button>
                    <div class="cta-reassurance" style="color: rgba(255,255,255,0.9);">✓ Start earning instantly • ✓ Cancel anytime • ✓ Only pay when you profit</div>
                </div>
                <button onclick="document.getElementById('criticalBanner').classList.remove('show')" style="position: absolute; top: 8px; right: 8px; background: rgba(255,255,255,0.2); border: none; color: white; font-size: 18px; cursor: pointer; width: 32px; height: 32px; border-radius: 50%; display: flex; align-items: center; justify-content: center; transition: all 0.3s; box-shadow: 0 2px 6px rgba(0,0,0,0.15); min-height: 44px; min-width: 44px;" onmouseover="this.style.background='rgba(255,255,255,0.3)'" onmouseout="this.style.background='rgba(255,255,255,0.2)'">
                    ×
                </button>
            </div>
        </div>

        <!-- Revenue Opportunity Bar - Top placement -->
        <div class="revenue-opportunity-bar" id="revenueOpportunityBar">
            <div style="display: flex; align-items: center; gap: 12px;">
                <span style="font-size: 20px;">💰</span>
                <div>
                    <div style="font-size: 14px; color: #EA580C; font-weight: 600;">Revenue Opportunity</div>
                    <div style="font-size: 24px; font-weight: 800; color: #F97316;" id="topRevenue">$0</div>
                </div>
            </div>
            <button class="yta-btn-primary" style="font-size: 14px; padding: 10px 20px; margin: 0;" onclick="window.open('https://www.primetime.media/beta-1', '_blank')">
                🚀 Claim Revenue →
            </button>
            <button onclick="document.getElementById('revenueOpportunityBar').classList.remove('show')" style="background: transparent; border: none; color: #6B7280; font-size: 18px; cursor: pointer; padding: 4px; min-height: 44px; min-width: 44px;">
                ×
            </button>
        </div>

        <!-- Usage Limits - Minimal top notification -->
        <div class="usage-limits" id="usageLimits">
            <div style="display: flex; align-items: center; gap: 12px;">
                <span style="font-size: 18px;">⚠️</span>
                <div style="font-size: 14px; color: #DC143C; font-weight: 600;">Free Tier Limits Hit - Missing Revenue Insights</div>
            </div>
            <button class="yta-btn-primary" style="font-size: 13px; padding: 8px 16px; margin: 0;" onclick="window.open('https://www.primetime.media/beta-1', '_blank')">
                🔓 Remove Limits →
            </button>
            <button onclick="document.getElementById('usageLimits').classList.remove('show')" style="background: transparent; border: none; color: #6B7280; font-size: 16px; cursor: pointer; padding: 4px; min-height: 44px; min-width: 44px;">
                ×
            </button>
        </div>

        <!-- Daily Streak Gamification -->
        <div class="daily-streak" onclick="showStreakDetails()">
            <span class="streak-fire">🔥</span>
            <span id="streakCount">0</span> day streak
        </div>

        <!-- Floating CTA -->
        <div id="floatingCTA">
            <button onclick="window.open('https://www.primetime.media/beta-1', '_blank')">
                💰 Unlock Revenue →
            </button>
        </div>

        <!-- Header Section with Value Proposition -->
        <div class="yta-header">
            <div class="value-proposition">
                <div class="trust-badge">🔥 2,847+ YouTubers earning extra revenue</div>
                <div class="value-headline">Creators Using Our Insights Earn 340% More</div>
                <div class="value-subtitle">
                    Join 10,000+ creators who've unlocked their hidden revenue potential
                </div>
                <div class="trust-indicators">
                    <div class="trust-indicator">
                        <span class="trust-indicator-icon">✓</span>
                        <span>Start earning instantly</span>
                    </div>
                    <div class="trust-indicator">
                        <span class="trust-indicator-icon">✓</span>
                        <span>Cancel anytime</span>
                    </div>
                    <div class="trust-indicator">
                        <span class="trust-indicator-icon">✓</span>
                        <span>We only profit if you do</span>
                    </div>
                </div>
            </div>
            
            <div style="display: flex; align-items: center; justify-content: center; gap: 15px; margin: 30px 0;">
                <div style="width: 50px; height: 35px; background: #ff0000; border-radius: 8px; display: flex; align-items: center; justify-content: center; position: relative;">
                    <div style="width: 0; height: 0; border-left: 12px solid #fff; border-top: 7px solid transparent; border-bottom: 7px solid transparent; margin-left: 2px;"></div>
                </div>
                <span style="font-size: 28px; font-weight: 700; color: #1a1a1a;">YouTube</span>
                <span style="color:#6B7280;font-weight:300;margin-left:5px;">Channel Analytics</span>
                <a href="https://primetime.media" target="_blank" style="display:flex;align-items:center;text-decoration:none;margin-left:40px;">
                    <img src="https://cdn.prod.website-files.com/6810e412eaea035f7c26cb1e/6810e81d766934e34ca7f908_New%20PTN%20Logo%20(2).png" alt="primetime.media" style="height:80px;width:auto;object-fit:contain;">
                </a>
            </div>
            
            <!-- Limited Time Offer -->
            <div class="limited-time-offer">
                <div style="font-size: 16px; margin-bottom: 5px;">🎯 LIMITED TIME: Beta Access Available</div>
                <div class="countdown-timer" id="countdownTimer">23:47:12</div>
                <div style="font-size: 14px;">Only 47 spots remaining at founder pricing</div>
            </div>
        </div>

        <!-- Input Section -->
        <div class="yta-input-section">
            <h2 style="margin-bottom: 20px; font-size: 28px; color: #1E40AF; font-weight: 700;">
                Discover Your Hidden Revenue in 30 Seconds
            </h2>
            <input type="text" id="ytaHandle" class="yta-input" placeholder="@channelname or youtube.com/@channel" autocomplete="off">
            <br>
            <button class="yta-btn-primary" onclick="ytaRun()" style="font-size: 18px; padding: 18px 40px; margin-top: 10px; transform: scale(1.05);">
                🚀 Reveal My Revenue Potential
            </button>
            <div class="cta-reassurance">✓ Start earning instantly ✓ Cancel anytime ✓ Revenue share model</div>
            
            <div style="margin-top: 24px; font-size: 14px; color: #6B7280;">
                <div style="margin-bottom: 12px;">Join creators who discovered:</div>
                <div style="display: flex; justify-content: center; gap: 30px; flex-wrap: wrap;">
                    <div style="color: #10B981; font-weight: 600;">✓ @SarahM: +$127K/year</div>
                    <div style="color: #10B981; font-weight: 600;">✓ @TechReviews: +$89K/year</div>
                    <div style="color: #10B981; font-weight: 600;">✓ @FoodieLife: +$203K/year</div>
                </div>
            </div>
        </div>

        <!-- Loading State with Progress -->
        <div class="yta-loading" id="ytaLoading">
            <div class="yta-spinner"></div>
            <div id="ytaLoadText" style="font-size: 24px; font-weight: 700; margin-bottom: 12px; color: #1E40AF;">Analyzing revenue potential...</div>
            <div id="ytaLoadSub" style="color:#6B7280;font-size:16px;margin-bottom: 24px;">Calculating your hidden earnings</div>
            <div class="skeleton" style="height:20px;width:250px;margin:20px auto;"></div>
            <div style="margin-top: 24px; color: #3B82F6; font-size: 14px;">
                <div id="loadingStage">🔍 Scanning channel performance...</div>
            </div>
        </div>

        <!-- Messages -->
        <div id="ytaMsg"></div>

        <!-- Results Section -->
        <div class="yta-results">
            <!-- Opportunity Visualization -->
            <div class="opportunity-visual">
                <div style="position: relative; z-index: 1;">
                    <div style="font-size: 20px; margin-bottom: 12px;">💎</div>
                    <div style="font-size: 18px; font-weight: 700; color: #EA580C; margin-bottom: 8px;">YOUR HIDDEN REVENUE OPPORTUNITY</div>
                    <div class="opportunity-amount" id="opportunityAmount">$0</div>
                    <div style="font-size: 16px; color: #92400E; margin-bottom: 20px;">Available now with optimization</div>
                    <button class="yta-btn-primary" style="background: #DC143C; font-size: 18px; padding: 18px 32px;" onclick="window.open('https://www.primetime.media/beta-1', '_blank')">
                        🚀 Claim This Revenue →
                    </button>
                    <div class="cta-reassurance">✓ Start earning instantly ✓ Cancel anytime ✓ Revenue share model</div>
                </div>
            </div>

            <!-- Social Proof Grid -->
            <div class="social-proof-grid">
                <div class="social-proof-card">
                    <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 12px;">
                        <div style="width: 40px; height: 40px; background: #10B981; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-weight: 700;">JM</div>
                        <div>
                            <div style="font-weight: 600; color: #1a1a1a;">@JohnMusic</div>
                            <div style="font-size: 12px; color: #10B981;">Similar channel size</div>
                        </div>
                    </div>
                    <div style="font-size: 24px; font-weight: 800; color: #10B981; margin-bottom: 8px;">+$127K</div>
                    <div style="font-size: 14px; color: #047857;">Annual revenue increase after optimization</div>
                </div>
                
                <div class="social-proof-card">
                    <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 12px;">
                        <div style="width: 40px; height: 40px; background: #10B981; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-weight: 700;">SL</div>
                        <div>
                            <div style="font-weight: 600; color: #1a1a1a;">@SarahLifestyle</div>
                            <div style="font-size: 12px; color: #10B981;">Your category</div>
                        </div>
                    </div>
                    <div style="font-size: 24px; font-weight: 800; color: #10B981; margin-bottom: 8px;">+$203K</div>
                    <div style="font-size: 14px; color: #047857;">First year revenue growth</div>
                </div>
                
                <div class="social-proof-card">
                    <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 12px;">
                        <div style="width: 40px; height: 40px; background: #10B981; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-weight: 700;">TR</div>
                        <div>
                            <div style="font-weight: 600; color: #1a1a1a;">@TechReviews</div>
                            <div style="font-size: 12px; color: #10B981;">Started 2 weeks ago</div>
                        </div>
                    </div>
                    <div style="font-size: 24px; font-weight: 800; color: #10B981; margin-bottom: 8px;">+340%</div>
                    <div style="font-size: 14px; color: #047857;">Revenue increase so far</div>
                </div>
            </div>

            <!-- Peer Comparison -->
            <div class="peer-comparison">
                <h4 style="margin: 0 0 16px 0; font-size: 18px; color: #1a1a1a; display: flex; align-items: center; gap: 8px;">
                    <span style="font-size: 20px;">📊</span>
                    How You Compare to Similar Channels
                </h4>
                <div class="peer-metric">
                    <span style="display: flex; align-items: center; gap: 8px;">
                        <span style="font-size: 16px;">💰</span>
                        Revenue per 1K views
                    </span>
                    <div class="peer-metric-value peer-worse" id="revenueComparison">-67% below average</div>
                </div>
                <div class="peer-metric">
                    <span style="display: flex; align-items: center; gap: 8px;">
                        <span style="font-size: 16px;">📈</span>
                        Engagement optimization
                    </span>
                    <div class="peer-metric-value peer-worse" id="engagementComparison">-43% below peers</div>
                </div>
                <div class="peer-metric">
                    <span style="display: flex; align-items: center; gap: 8px;">
                        <span style="font-size: 16px;">🎯</span>
                        Content optimization
                    </span>
                    <div class="peer-metric-value peer-worse" id="contentComparison">-52% below potential</div>
                </div>
                <div style="background: rgba(239, 68, 68, 0.1); padding: 16px; border-radius: 8px; border-left: 4px solid #EF4444; margin-top: 16px;">
                    <div style="font-weight: 600; color: #DC143C; margin-bottom: 8px;">⚠️ Critical Gap Alert</div>
                    <div style="font-size: 14px; color: #991B1B; line-height: 1.4;">You're significantly underperforming compared to similar channels. This gap represents lost revenue opportunities.</div>
                </div>
            </div>

            <!-- Optimization Metrics -->
            <div class="yta-opt">
                <div class="scenario-calculator" onclick="openScenarioModal()" style="background: #F9FAFB; border: 2px solid #F97316; padding: 16px; font-size: 16px; cursor: pointer; text-align: center; border-radius: 8px; margin-bottom: 24px; transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); transform: scale(1);" onmouseover="this.style.transform='scale(1.08)'; this.style.padding='20px'; this.style.fontSize='18px'; this.style.boxShadow='0 8px 20px rgba(249, 115, 22, 0.2)'; this.style.background='linear-gradient(135deg, #FFF7ED, #FFEDD5)'" onmouseout="this.style.transform='scale(1)'; this.style.padding='16px'; this.style.fontSize='16px'; this.style.boxShadow=''; this.style.background='#F9FAFB'">
                    📊 Revenue Calculator
                </div>
                <div class="yta-opt-header" id="optHeader">📊 Calculating Your Hidden Revenue...</div>
                <div class="yta-opt-grid">
                    <div class="yta-metric" title="Additional revenue per video after optimization">
                        <div class="yta-metric-label">Revenue/Video Potential</div>
                        <div class="yta-metric-value yta-orange" id="revPerVideo">$0</div>
                        <div style="font-size:11px;color:#F97316;margin-top:8px;font-weight:600;">+125% Average</div>
                    </div>
                    <div class="yta-metric" title="Projected subscriber growth from optimized content">
                        <div class="yta-metric-label">Subscriber Growth</div>
                        <div class="yta-metric-value yta-orange" id="subGrowth">0</div>
                        <div style="font-size:11px;color:#F97316;margin-top:8px;font-weight:600;">Projected Increase</div>
                    </div>
                    <div class="yta-metric" title="Additional views per video from optimization">
                        <div class="yta-metric-label">View Amplification</div>
                        <div class="yta-metric-value yta-orange" id="viewsImpact">0</div>
                        <div style="font-size:11px;color:#F97316;margin-top:8px;font-weight:600;">Per Video</div>
                    </div>
                    <div class="yta-metric annual-revenue-metric" title="Your total annual revenue potential if you optimize now">
                        <div class="star-border">
                            <span style="position:absolute;font-size:24px;color:#F97316;text-shadow:0 0 20px rgba(249,115,22,0.8);animation:moveAlongBorder 4s linear infinite;">✨</span>
                            <span style="position:absolute;font-size:24px;color:#F97316;text-shadow:0 0 20px rgba(249,115,22,0.8);animation:moveAlongBorder 4s linear infinite;animation-delay:1s;">⭐</span>
                            <span style="position:absolute;font-size:24px;color:#F97316;text-shadow:0 0 20px rgba(249,115,22,0.8);animation:moveAlongBorder 4s linear infinite;animation-delay:2s;">💫</span>
                            <span style="position:absolute;font-size:24px;color:#F97316;text-shadow:0 0 20px rgba(249,115,22,0.8);animation:moveAlongBorder 4s linear infinite;animation-delay:3s;">🌟</span>
                        </div>
                        <div class="yta-metric-label">💰 Annual Revenue Potential 💰</div>
                        <div class="yta-metric-value" id="annualPot">$0</div>
                        <div style="font-size:12px;color:#F97316;margin-top:8px;font-weight:700;">AVAILABLE NOW</div>
                        
                        <div class="revenue-share-box" style="margin-top:24px;">
                            <div style="font-size:24px;margin-bottom:16px;">🤝</div>
                            <div style="font-size:18px;font-weight:700;color:#F97316;margin-bottom:12px;">
                                We Only Make Money If You Do
                            </div>
                            <div style="font-size:14px;color:#4B5563;line-height:1.8;">
                                <div>✅ <strong>$0 upfront</strong> - Pay nothing to start</div>
                                <div>✅ <strong>Split the profits</strong> - We share success</div>
                                <div>✅ <strong>Cancel anytime</strong> - You're in control</div>
                            </div>
                            <button class="yta-btn-primary" style="margin-top:20px;width:100%;" onclick="window.open('https://www.primetime.media/beta-1', '_blank')">
                                Claim Your Revenue Share →
                            </button>
                            <div class="cta-reassurance">✓ Start earning instantly ✓ Cancel anytime ✓ Revenue share model</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- F-Pattern Layout Grid -->
            <div class="f-pattern-grid">
                <!-- Primary Content (F-Pattern Left) -->
                <div class="f-pattern-primary">
                    <!-- Channel Info Card -->
                    <div class="yta-card">
                        <span class="personalization-badge" id="personalizationBadge">Personalized Analysis</span>
                        <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:24px;flex-wrap:wrap;gap:16px;">
                            <div style="display:flex;align-items:center;gap:16px;flex:1;justify-content:center;">
                                <img id="channelImage" src="" alt="Channel" style="width:80px;height:80px;border-radius:50%;border:3px solid #3B82F6;display:none;box-shadow:0 4px 12px rgba(59,130,246,0.2);" onerror="this.style.display='none'">
                                <h2 style="margin:0;font-size:32px;color:#1E40AF;font-weight:800;" id="channelName">Channel Analytics</h2>
                            </div>
                            <button onclick="ytaReset()" class="yta-btn-secondary" style="min-height: 44px; min-width: 44px;">
                                <span style="font-size: 16px; margin-right: 8px;">🔄</span>
                                New Analysis
                            </button>
                        </div>
                        <div style="color:#6B7280;margin:12px 0;font-size:16px;display:flex;align-items:center;gap:8px;" id="channelCategory">
                            <span style="font-size: 18px;">🎭</span>
                            Category: Gaming
                        </div>
                        
                        <!-- Channel Awards -->
                        <div id="channelAwards" style="display:flex;flex-wrap:wrap;justify-content:center;gap:12px;margin:24px 0;padding:24px;background:rgba(59,130,246,0.05);border-radius:12px;position:relative;border:1px solid rgba(59,130,246,0.2);">
                            <!-- Awards will be populated dynamically -->
                        </div>
                        
                        <div class="yta-stats">
                            <div class="yta-stat">
                                <div style="font-size:32px;margin-bottom:8px;">👥</div>
                                <div><span class="yta-stat-value" id="subCount" style="color: #10B981;">0</span></div>
                                <div style="font-size:14px;color:#6B7280;font-weight:500;">Subscribers</div>
                            </div>
                            <div class="yta-stat">
                                <div style="font-size:32px;margin-bottom:8px;">👁️</div>
                                <div><span class="yta-stat-value" id="viewCount" style="color: #10B981;">0</span></div>
                                <div style="font-size:14px;color:#6B7280;font-weight:500;">Total Views</div>
                            </div>
                            <div class="yta-stat">
                                <div style="font-size:32px;margin-bottom:8px;">🎬</div>
                                <div><span class="yta-stat-value" id="videoCount" style="color: #10B981;">0</span></div>
                                <div style="font-size:14px;color:#6B7280;font-weight:500;">Videos</div>
                            </div>
                        </div>
                    </div>

                    <!-- Progressive Disclosure: Videos List -->
                    <div class="yta-card" id="videosSection">
                        <h3>
                            <span style="font-size: 24px;">🎬</span>
                            Recent Videos Analysis
                            <button onclick="toggleSection('videosContent')" style="background: none; border: none; font-size: 20px; cursor: pointer; color: #6B7280; margin-left: auto; min-height: 44px; min-width: 44px;" id="videosToggle">
                                ▼
                            </button>
                        </h3>
                        <div id="videosContent">
                            <div id="videosList">
                                <div class="skeleton" style="height: 60px; margin-bottom: 10px;"></div>
                                <div class="skeleton" style="height: 60px; margin-bottom: 10px;"></div>
                                <div class="skeleton" style="height: 60px;"></div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Secondary Content (F-Pattern Right) -->
                <div class="f-pattern-secondary">
                    <!-- Channel Health Score -->
                    <div class="yta-card">
                        <h3 title="Your channel health score">
                            <span style="font-size: 24px;">🎯</span>
                            Channel Health Score
                        </h3>
                        <div class="yta-score" style="text-align:center;padding:20px;">
                            <div class="yta-score-circle" id="scoreCircle" style="--score-deg: 0deg; --score-color: #EF4444">
                                <div class="yta-score-inner">
                                    <div class="yta-score-value" id="scoreValue" style="color:#1E40AF;font-size:32px;">0.0</div>
                                    <div class="yta-score-label" style="font-size:12px;color:#6B7280;">out of 10</div>
                                </div>
                            </div>
                        </div>
                        <div style="margin-top:15px;padding:16px;background:#F9FAFB;border-radius:8px;">
                            <div id="healthStatus" style="font-size:16px;font-weight:700;">Loading...</div>
                            <div id="healthDesc" style="font-size:14px;color:#6B7280;margin-top:4px;line-height:1.4;">Analyzing channel health...</div>
                        </div>
                    </div>

                    <!-- Performance Chart -->
                    <div class="yta-card" style="margin-bottom:20px;">
                        <h3>
                            <span style="font-size: 24px;">📊</span>
                            Performance Overview
                        </h3>
                        <div style="display:flex;align-items:end;justify-content:center;gap:20px;height:140px;margin:25px 0;" id="chartBars">
                            <div style="width:60px;background:#E5E7EB;height:0%;transition:all 0.8s ease;" title="Engagement Rate"></div>
                            <div style="width:60px;background:#E5E7EB;height:0%;transition:all 0.8s ease 0.1s;" title="Like Rate"></div>
                            <div style="width:60px;background:#E5E7EB;height:0%;transition:all 0.8s ease 0.2s;" title="Comment Rate"></div>
                            <div style="width:60px;background:#E5E7EB;height:0%;transition:all 0.8s ease 0.3s;" title="Relative Views"></div>
                            <div style="width:60px;background:#E5E7EB;height:0%;transition:all 0.8s ease 0.4s;" title="Sentiment"></div>
                        </div>
                        
                        <!-- Column Labels with Icons -->
                        <div style="display:flex;justify-content:center;gap:20px;margin-top:10px;font-size:12px;font-weight:600;color:#1a1a1a;">
                            <div style="width:60px;text-align:center;display:flex;flex-direction:column;align-items:center;gap:4px;">
                                <span style="font-size:16px;">👥</span>
                                <span>Engage</span>
                            </div>
                            <div style="width:60px;text-align:center;display:flex;flex-direction:column;align-items:center;gap:4px;">
                                <span style="font-size:16px;">👍</span>
                                <span>Likes</span>
                            </div>
                            <div style="width:60px;text-align:center;display:flex;flex-direction:column;align-items:center;gap:4px;">
                                <span style="font-size:16px;">💬</span>
                                <span>Comments</span>
                            </div>
                            <div style="width:60px;text-align:center;display:flex;flex-direction:column;align-items:center;gap:4px;">
                                <span style="font-size:16px;">👀</span>
                                <span>Views</span>
                            </div>
                            <div style="width:60px;text-align:center;display:flex;flex-direction:column;align-items:center;gap:4px;">
                                <span style="font-size:16px;">😊</span>
                                <span>Sentiment</span>
                            </div>
                        </div>
                        
                        <!-- Metric Values -->
                        <div style="display:flex;justify-content:center;gap:20px;margin-top:8px;font-size:12px;">
                            <div style="width:60px;text-align:center;font-weight:700;" id="engChart">0%</div>
                            <div style="width:60px;text-align:center;font-weight:700;" id="likeChart">0%</div>
                            <div style="width:60px;text-align:center;font-weight:700;" id="commentChart">0%</div>
                            <div style="width:60px;text-align:center;font-weight:700;" id="relativeChart">0x</div>
                            <div style="width:60px;text-align:center;font-weight:700;" id="sentimentChart">0%</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Revenue Opportunity Since Start -->
            <div style="margin-top:30px;padding:28px;background:linear-gradient(135deg,#FEF3C7,#FDE68A);border-radius:12px;border:2px solid #F59E0B;">
                <h4 style="margin:0 0 20px 0;font-size:16px;color:#92400E;text-align:center;">💸 Historical Lost Revenue (Unoptimized) 💸</h4>
                
                <!-- Revenue Counter -->
                <div style="text-align:center;margin-bottom:20px;">
                    <div style="font-size:48px;margin-bottom:12px;">💸</div>
                    <div id="totalLostRevenue" style="font-size:36px;font-weight:800;color:#DC143C;margin-bottom:8px;">$0</div>
                    <div id="lostViews" style="font-size:18px;color:#EA580C;font-weight:600;margin-bottom:6px;">0 Lost Views</div>
                    <div id="channelAge" style="font-size:12px;color:#92400E;">Over 0 years</div>
                </div>
                
                <!-- Visual Timeline -->
                <div style="position:relative;height:80px;margin:20px 0;">
                    <div style="position:absolute;width:100%;height:2px;background:#F3F4F6;top:39px;"></div>
                    
                    <!-- Start Point -->
                    <div style="position:absolute;left:0;top:30px;">
                        <div style="width:20px;height:20px;background:#9CA3AF;border-radius:50%;border:3px solid white;"></div>
                        <div style="font-size:10px;color:#6B7280;margin-top:25px;white-space:nowrap;">Channel Start</div>
                        <div id="channelStartDate" style="font-size:9px;color:#9CA3AF;"></div>
                    </div>
                    
                    <!-- Growth Bar -->
                    <div id="lossGrowthBar" style="position:absolute;left:20px;top:35px;height:10px;border-radius:5px;width:0%;transition:width 1.5s ease;max-width:calc(100% - 40px);"></div>
                    
                    <!-- Current Point -->
                    <div style="position:absolute;right:0;top:30px;">
                        <div style="width:20px;height:20px;background:#EF4444;border-radius:50%;border:3px solid white;box-shadow:0 0 15px rgba(239,68,68,0.4);"></div>
                        <div style="font-size:10px;color:#EF4444;margin-top:25px;white-space:nowrap;font-weight:700;">Today</div>
                        <div id="currentDate" style="font-size:9px;color:#6B7280;"></div>
                    </div>
                </div>
                
                <!-- Daily Rate -->
                <div style="text-align:center;padding:12px;background:rgba(254,243,199,0.5);border-radius:8px;">
                    <div style="font-size:12px;color:#92400E;margin-bottom:6px;">Current Loss Rate</div>
                    <div id="dailyLossRate" style="font-size:20px;font-weight:700;color:#DC143C;">$0/day</div>
                    <div style="font-size:10px;color:#DC143C;margin-top:6px;">Without optimization</div>
                </div>
                
                <div style="margin-top:15px;text-align:center;">
                    <button class="yta-btn-primary" style="width:100%;font-size:16px;" onclick="window.open('https://www.primetime.media/beta-1', '_blank')">
                        Stop Losing Money →
                    </button>
                    <div class="cta-reassurance">✓ Start earning instantly ✓ Cancel anytime ✓ Revenue share model</div>
                </div>
            </div>

            <!-- Performance Trends -->
            <div class="yta-card" style="margin-bottom:30px;">
                <h3>📈 Performance Trends</h3>
                <div id="trendsData" style="width:100%;">
                    <div class="skeleton" style="height:200px;"></div>
                </div>
            </div>

            <!-- Performance Metrics -->
            <div class="yta-card" style="margin-bottom:30px;">
                <h3>🎯 Detailed Performance Metrics</h3>
                <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:20px;">
                    <div>
                        <div class="yta-perf-metric" title="How actively your audience engages with content" style="margin-bottom:16px;">
                            <div class="yta-perf-header" style="display:flex;justify-content:space-between;margin-bottom:8px;font-size:14px;">
                                <span class="yta-perf-label" style="color:#6B7280;">Engagement Rate</span>
                                <span class="yta-perf-value" id="engagementRate" style="font-weight:700;color:#1a1a1a;">0%</span>
                            </div>
                            <div class="yta-progress">
                                <div class="yta-progress-fill" id="engagementBar" style="width:0%"></div>
                            </div>
                        </div>
                        <div class="yta-perf-metric" title="Percentage of viewers who like your videos" style="margin-bottom:16px;">
                            <div class="yta-perf-header" style="display:flex;justify-content:space-between;margin-bottom:8px;font-size:14px;">
                                <span class="yta-perf-label" style="color:#6B7280;">Like Rate</span>
                                <span class="yta-perf-value" id="likeRate" style="font-weight:700;color:#1a1a1a;">0%</span>
                            </div>
                            <div class="yta-progress">
                                <div class="yta-progress-fill" id="likeBar" style="width:0%"></div>
                            </div>
                        </div>
                        <div class="yta-perf-metric" title="How often viewers comment" style="margin-bottom:16px;">
                            <div class="yta-perf-header" style="display:flex;justify-content:space-between;margin-bottom:8px;font-size:14px;">
                                <span class="yta-perf-label" style="color:#6B7280;">Comment Rate</span>
                                <span class="yta-perf-value" id="commentRate" style="font-weight:700;color:#1a1a1a;">0%</span>
                            </div>
                            <div class="yta-progress">
                                <div class="yta-progress-fill" id="commentBar" style="width:0%"></div>
                            </div>
                        </div>
                    </div>
                    <div>
                        <div class="yta-perf-metric" title="Views compared to subscriber count" style="margin-bottom:16px;">
                            <div class="yta-perf-header" style="display:flex;justify-content:space-between;margin-bottom:8px;font-size:14px;">
                                <span class="yta-perf-label" style="color:#6B7280;">Relative Views</span>
                                <span class="yta-perf-value" id="relativeViews" style="font-weight:700;color:#1a1a1a;">0x</span>
                            </div>
                            <div class="yta-progress">
                                <div class="yta-progress-fill" id="relativeBar" style="width:0%"></div>
                            </div>
                        </div>
                        <div class="yta-perf-metric" title="Subscriber engagement level" style="margin-bottom:16px;">
                            <div class="yta-perf-header" style="display:flex;justify-content:space-between;margin-bottom:8px;font-size:14px;">
                                <span class="yta-perf-label" style="color:#6B7280;">Subscriber Engagement</span>
                                <span class="yta-perf-value" id="subEngagement" style="font-weight:700;color:#1a1a1a;">0%</span>
                            </div>
                            <div class="yta-progress">
                                <div class="yta-progress-fill" id="subEngBar" style="width:0%"></div>
                            </div>
                        </div>
                        <div class="yta-perf-metric" title="Audience positivity" style="margin-bottom:16px;">
                            <div class="yta-perf-header" style="display:flex;justify-content:space-between;margin-bottom:8px;font-size:14px;">
                                <span class="yta-perf-label" style="color:#6B7280;">Audience Sentiment</span>
                                <span class="yta-perf-value" id="sentiment" style="font-weight:700;color:#1a1a1a;">0%</span>
                            </div>
                            <div class="yta-progress">
                                <div class="yta-progress-fill" id="sentimentBar" style="width:0%"></div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Premium Features Teaser -->
                <div class="premium-teaser" style="margin-top:25px;">
                    <span class="premium-teaser-badge">PREMIUM</span>
                    <div class="empty-state-icon">🔒</div>
                    <div class="empty-state-title">Advanced Analytics Available</div>
                    <div class="empty-state-description">
                        Unlock competitor analysis, viral prediction algorithms, and real-time trend monitoring
                    </div>
                    <button class="yta-btn-primary" onclick="window.open('https://www.primetime.media/beta-1', '_blank')">
                        Unlock Advanced Analytics →
                    </button>
                    <div class="cta-reassurance">✓ Start earning instantly ✓ Cancel anytime ✓ Revenue share model</div>
                </div>
            </div>

            <!-- Alert Box -->
            <div class="yta-alert" id="alertBox">
                <div style="font-size:28px;">⚠️</div>
                <div style="flex:1;">
                    <h4 id="alertTitle" style="margin:0 0 8px 0;font-size:18px;color:#92400E;">Revenue Alert</h4>
                    <p id="alertDesc" style="font-size:14px;color:#78350F;margin:0;">Your channel has untapped potential.</p>
                </div>
                <button class="yta-btn-primary" onclick="window.open('https://www.primetime.media/beta-signup', '_blank')">
                    Claim Your Revenue →
                </button>
            </div>

            <!-- AI Analysis Section -->
            <div class="yta-card" id="aiAnalysis">
                <div style="background:linear-gradient(135deg,#3B82F6,#1E40AF);color:white;padding:24px;border-radius:10px;margin-bottom:24px;">
                    <h3 style="margin:0 0 12px 0;font-size:22px;">🤖 AI-Powered Revenue Analysis</h3>
                    <p id="aiGreeting" style="margin:0;font-size:16px;">Analyzing your revenue potential...</p>
                </div>
                
                <!-- Quick Stats Grid -->
                <div id="aiQuickStats" class="ai-metric-grid" style="display:none;grid-template-columns:repeat(auto-fit,minmax(160px,1fr));gap:12px;margin-bottom:20px;">
                    <!-- Will be populated dynamically -->
                </div>
                
                <!-- Best Upload Time -->
                <div id="aiUploadTime" class="ai-section" style="display:none;">
                    <div class="ai-section-header">
                        <span style="font-size:24px;">🕐</span>
                        <span>Optimal Upload Schedule</span>
                    </div>
                    <div id="uploadTimeContent"></div>
                </div>
                
                <!-- Top Performing Content -->
                <div id="aiTopContent" class="ai-section" style="display:none;">
                    <div class="ai-section-header">
                        <span style="font-size:24px;">🏆</span>
                        <span>Revenue-Driving Content</span>
                    </div>
                    <div id="topContentList"></div>
                </div>
                
                <!-- Key Metrics -->
                <div id="aiKeyMetrics" class="ai-section" style="display:none;">
                    <div class="ai-section-header">
                        <span style="font-size:24px;">📊</span>
                        <span>Critical Performance Indicators</span>
                    </div>
                    <div id="keyMetricsContent"></div>
                </div>
                
                <!-- Recommendations Grid -->
                <div id="aiRecommendations" class="ai-section" style="display:none;">
                    <div class="ai-section-header">
                        <span style="font-size:24px;">💡</span>
                        <span>Revenue Optimization Actions</span>
                    </div>
                    <div id="recommendationsGrid" style="display:grid;grid-template-columns:1fr;gap:12px;">
                        <!-- Will be populated dynamically -->
                    </div>
                </div>
                
                <!-- Growth Opportunities -->
                <div id="aiGrowth" class="ai-section" style="display:none;">
                    <div class="ai-section-header">
                        <span style="font-size:24px;">🚀</span>
                        <span>Immediate Growth Opportunities</span>
                    </div>
                    <div id="growthContent"></div>
                </div>
                
                <!-- Key Takeaway -->
                <div id="aiTakeaway" style="background:linear-gradient(135deg,#FFF7ED,#FFEDD5);border:2px solid #F97316;padding:24px;border-radius:10px;margin-top:20px;text-align:center;display:none;">
                    <h4 style="color:#F97316;margin-bottom:10px;font-size:20px;">🎯 Critical Action Required</h4>
                    <div id="takeawayText" style="font-weight:600;font-size:16px;line-height:1.6;color:#92400E;"></div>
                </div>
                
                <!-- Revenue Share CTA -->
                <div style="margin-top:30px;padding:32px;background:linear-gradient(135deg,#EBF4FF,#F0F9FF);border-radius:16px;border:2px solid #3B82F6;text-align:center;">
                    <div style="font-size:24px;font-weight:700;color:#1E40AF;margin-bottom:12px;">
                        Ready to Claim Your Revenue Potential?
                    </div>
                    <div style="font-size:16px;color:#4B5563;margin-bottom:20px;line-height:1.6;">
                        Join the beta program - We only profit when you do
                    </div>
                    <button class="yta-btn-primary" style="font-size:18px;padding:18px 40px;" onclick="window.open('https://www.primetime.media/beta-signup', '_blank')">
                        🚀 Unlock My Revenue Now →
                    </button>
                    <div class="cta-reassurance">
                        <strong>47 spots remaining</strong> • Start earning instantly • Cancel anytime
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Bottom CTA Area - Main conversion zone -->
        <div class="bottom-cta-area" id="bottomCTAArea">
            <div class="bottom-cta-content">
                <div style="display: flex; align-items: center; gap: 16px;">
                    <span style="font-size: 24px;">💎</span>
                    <div>
                        <div style="font-size: 16px; font-weight: 700; color: #F97316;" id="bottomRevenue">Revenue Available: $0</div>
                        <div style="font-size: 13px; color: #6B7280;">Start earning instantly • Cancel anytime • Revenue share model</div>
                    </div>
                </div>
                <div style="display: flex; gap: 12px; align-items: center;">
                    <button class="yta-btn-primary" style="margin: 0; white-space: nowrap;" onclick="window.open('https://www.primetime.media/beta-1', '_blank')">
                        🚀 Claim Your Revenue →
                    </button>
                    <button onclick="document.getElementById('bottomCTAArea').classList.remove('show')" style="background: transparent; border: none; color: #6B7280; font-size: 18px; cursor: pointer; padding: 8px; min-height: 44px; min-width: 44px;">
                        ×
                    </button>
                </div>
            </div>
        </div>

        <!-- Mobile Sticky CTA -->
        <div class="mobile-sticky-cta">
            <button class="yta-btn-primary" onclick="window.open('https://www.primetime.media/beta-1', '_blank')">
                💎 Unlock Your Revenue →
            </button>
        </div>

        <!-- Achievement Unlocked -->
        <div class="achievement-unlocked" id="achievementModal" style="display:none;">
            <div style="font-size:42px;margin-bottom:14px;">🏆</div>
            <h3 style="margin:0 0 8px 0;font-size:22px;color:#1E40AF;">Achievement Unlocked!</h3>
            <p id="achievementText" style="margin:0;font-size:14px;color:#4B5563;">Revenue Explorer</p>
        </div>

        <!-- PWA Install Prompt -->
        <div class="pwa-prompt" id="pwaPrompt">
            <h4 style="margin:0 0 10px 0;font-size:16px;color:#1E40AF;">📱 Install Revenue Tracker</h4>
            <p style="margin:0 0 16px 0;font-size:13px;color:#6B7280;">Get instant alerts when your revenue potential changes</p>
            <div style="display:flex;gap:8px;">
                <button onclick="installPWA()" class="yta-btn-primary" style="flex:1;font-size:13px;padding:10px;">
                    Install App
                </button>
                <button onclick="closePWA()" class="yta-btn-secondary" style="flex:1;">
                    Not Now
                </button>
            </div>
        </div>

        <!-- What-If Scenario Modal -->
        <div class="modal-overlay" id="modalOverlay" onclick="closeScenarioModal()"></div>
        <div class="scenario-modal" id="scenarioModal">
            <h3>📊 Revenue Potential Calculator</h3>
            <div style="margin-bottom:20px;">
                <label style="display:block;margin-bottom:8px;font-size:14px;color:#6B7280;">If I increase views by:</label>
                <input type="range" id="viewIncrease" min="0" max="500" value="125" style="width:100%;cursor:pointer;" oninput="updateScenarioCalculation()">
                <div style="text-align:center;font-size:20px;color:#F97316;margin-top:8px;">
                    <span id="viewIncreaseValue">125</span>%
                </div>
            </div>
            <div style="margin-bottom:20px;">
                <label style="display:block;margin-bottom:8px;font-size:14px;color:#6B7280;">If I improve engagement by:</label>
                <input type="range" id="engIncrease" min="0" max="200" value="50" style="width:100%;cursor:pointer;" oninput="updateScenarioCalculation()">
                <div style="text-align:center;font-size:20px;color:#10B981;margin-top:8px;">
                    <span id="engIncreaseValue">50</span>%
                </div>
            </div>
            <div style="background:linear-gradient(135deg,#FFF7ED,#FFEDD5);border:2px solid #F97316;padding:20px;border-radius:10px;margin:25px 0;">
                <div style="text-align:center;">
                    <div style="font-size:14px;color:#92400E;margin-bottom:8px;">Your Additional Annual Revenue</div>
                    <div style="font-size:40px;color:#F97316;font-weight:800;" id="projectedRevenue">$0</div>
                    <div style="font-size:13px;color:#92400E;margin-top:8px;">Ready to claim now</div>
                </div>
            </div>
            <button onclick="window.open('https://www.primetime.media/beta-signup', '_blank')" class="yta-btn-primary" style="width:100%;margin-bottom:10px;">
                Make This Real →
            </button>
            <div class="cta-reassurance">✓ Start earning instantly ✓ Cancel anytime ✓ Revenue share model</div>
            <button onclick="closeScenarioModal()" class="yta-btn-secondary" style="width:100%;">
                Close
            </button>
        </div>
    </div>

    <script>
    // 🔧 ENHANCED CONFIGURATION - Main settings for the app
    const YTA_CONFIG = {
        baseUrl: 'https://primetime-media-youtube-analyzer-941974948417.us-central1.run.app',
        timeout: 45000, // Increased from 30s to 45s for initial requests
        retryTimeout: 60000, // Longer timeout for retry attempts
        maxRetries: 3,
        retryDelay: 2000, // Base delay between retries
        warmupDelay: 1000, // Delay before warming up backend
        conversionOptimizations: {
            urgencyMultiplier: 1.5,
            socialProofInterval: 45000,
            behavioralTriggerDelay: 30000,
            achievementThresholds: {
                firstAnalysis: true,
                viewedRevenue: true,
                exploredAI: true,
                usedCalculator: true
            }
        },
        brandColors: {
            primary: '#1E40AF',
            primaryLight: '#3B82F6',
            success: '#10B981',
            warning: '#F97316',
            warningDark: '#EA580C',
            danger: '#EF4444',
            text: '#1a1a1a',
            textSecondary: '#4B5563',
            textMuted: '#6B7280'
        }
    };
    
    // Enhanced Session Tracking - moved to top for immediate availability
    const YTA_SESSION = {
        id: 'yta_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9),
        startTime: Date.now(),
        actions: [],
        featureUsage: {},
        conversionTriggers: {
            revenueViewed: false,
            lostRevenueShocked: false,
            aiInsightsReviewed: false,
            calculatorUsed: false
        },
        shownDeepEngagement: false,
        shownProgress: false,
        lastAction: null,
        userSegment: null,
        revenueMultiplier: 1.5
    };
    
    // Enhanced track action with conversion focus - moved to top
    function trackAction(action, data = {}) {
        YTA_SESSION.actions.push({
            action,
            data,
            timestamp: Date.now()
        });
        YTA_SESSION.lastAction = action;
        
        // Check for conversion triggers
        checkConversionTriggers(action, data);
        
        // Update feature progress
        updateFeatureProgress(action);
        
        // Check for achievements
        checkAchievements(action, data);
        
        // Update personalization
        checkPersonalization();
    }
    
    // Enhanced behavioral triggers with conversion focus
    function checkConversionTriggers(action, data) {
        const triggers = YTA_SESSION.conversionTriggers;
        
        // Revenue viewed trigger with urgency
        if (action === 'view_revenue' && !triggers.revenueViewed) {
            triggers.revenueViewed = true;
            const amount = data.amount || 0;
            const opportunityEl = document.getElementById('opportunityAmount');
            if (opportunityEl) {
                opportunityEl.textContent = `${Math.round(amount).toLocaleString()}`;
            }
            
            setTimeout(() => {
                showBehavioralPrompt(`💰 You discovered ${Math.round(amount).toLocaleString()} in potential revenue. Every day you wait costs you money.`);
            }, 3000);
        }
        
        // Lost revenue shock trigger with immediate action
        if (action === 'view_lost_revenue' && data.amount > 10000 && !triggers.lostRevenueShocked) {
            triggers.lostRevenueShocked = true;
            const criticalBanner = document.getElementById('criticalBanner');
            const criticalLostRevenue = document.getElementById('criticalLostRevenue');
            if (criticalBanner) criticalBanner.classList.add('show');
            if (criticalLostRevenue) criticalLostRevenue.textContent = `${Math.round(data.amount).toLocaleString()}`;
            
            // Show usage limits on left side after delay
            setTimeout(() => {
                const usageLimits = document.getElementById('usageLimits');
                if (usageLimits) {
                    usageLimits.classList.add('usage-limits-urgent');
                    usageLimits.classList.add('show');
                }
            }, 8000);
        }
        
        // Engagement time triggers - simplified
        const sessionDuration = Date.now() - YTA_SESSION.startTime;
        if (sessionDuration > 30000 && YTA_SESSION.actions.length > 5) {
            if (!YTA_SESSION.shownDeepEngagement) {
                YTA_SESSION.shownDeepEngagement = true;
            }
        }
        
        // Exit intent simulation (scroll to bottom)
        let hasScrolledToBottom = false;
        window.addEventListener('scroll', () => {
            if (!hasScrolledToBottom && (window.innerHeight + window.scrollY) >= document.body.offsetHeight - 100) {
                hasScrolledToBottom = true;
                setTimeout(() => {
                    showBehavioralPrompt('🚨 Wait! Don\'t leave money on the table. Your revenue potential is waiting.');
                }, 1000);
            }
        });
    }
    
    // Feature progress tracking - simplified without progress tracker
    function updateFeatureProgress(action) {
        const checkMap = {
            'analyze_channel': 'check1',
            'view_revenue': 'check2',
            'view_ai': 'check3',
            'use_calculator': 'check4'
        };
        
        if (checkMap[action]) {
            YTA_SESSION.featureUsage[action] = true;
        }
        
        const usedFeatures = Object.keys(YTA_SESSION.featureUsage).length;
        
        // Show floating CTA after significant engagement
        if (usedFeatures >= 2 && !window.floatingCTAShown) {
            setTimeout(() => {
                const floatingCTA = document.getElementById('floatingCTA');
                if (floatingCTA) {
                    floatingCTA.style.display = 'block';
                }
                window.floatingCTAShown = true;
            }, 2000);
        }
    }
    
    // Check achievements
    function checkAchievements(action, data) {
        const achievements = YTA_CONFIG.conversionOptimizations.achievementThresholds;
        
        if (action === 'analyze_channel' && achievements.firstAnalysis) {
            achievements.firstAnalysis = false;
            showAchievement('🎯 First Analysis!', 'You\'ve taken the first step to unlock revenue');
        }
        
        if (action === 'view_revenue' && achievements.viewedRevenue) {
            achievements.viewedRevenue = false;
            showAchievement('💰 Revenue Explorer!', 'You\'ve discovered your hidden potential');
        }
        
        if (action === 'view_ai' && achievements.exploredAI) {
            achievements.exploredAI = false;
            showAchievement('🤖 AI Pioneer!', 'Smart creators use AI insights to 3x revenue');
        }
        
        if (action === 'use_calculator' && achievements.usedCalculator) {
            achievements.usedCalculator = false;
            showAchievement('📊 Growth Strategist!', 'You\'re ready to scale. Claim your growth now!');
        }
    }
    
    // Personalization checks
    function checkPersonalization() {
        const cd = window.currentChannelData;
        if (!cd) return;
        
        // Show personalization badge for engaged users
        if (YTA_SESSION.actions.length > 15) {
            const personalizationBadge = document.getElementById('personalizationBadge');
            if (personalizationBadge) {
                personalizationBadge.classList.add('show');
            }
        }
        
        // Segment-specific prompts
        if (cd.subscriberCount > 100000) {
            YTA_SESSION.userSegment = 'large';
            YTA_SESSION.revenueMultiplier = 2.5;
        } else if (cd.subscriberCount > 10000) {
            YTA_SESSION.userSegment = 'medium';
            YTA_SESSION.revenueMultiplier = 2.0;
        } else {
            YTA_SESSION.userSegment = 'small';
            YTA_SESSION.revenueMultiplier = 1.5;
        }
    }
    
    // Show achievement modal
    function showAchievement(title, description) {
        const modal = document.getElementById('achievementModal');
        const achievementText = document.getElementById('achievementText');
        if (modal && achievementText) {
            achievementText.textContent = description;
            modal.style.display = 'block';
            
            setTimeout(() => {
                modal.style.display = 'none';
            }, 4000);
        }
        
        trackAction('achievement_unlocked', { title });
    }
    
    // Initialize countdown timer
    function startCountdownTimer() {
        const endTime = new Date().getTime() + (24 * 60 * 60 * 1000); // 24 hours from now
        
        function updateTimer() {
            const now = new Date().getTime();
            const distance = endTime - now;
            
            const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((distance % (1000 * 60)) / 1000);
            
            const timer = document.getElementById('countdownTimer');
            if (timer) {
                timer.textContent = `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            }
            
            if (distance < 0) {
                clearInterval(timerInterval);
                if (timer) {
                    timer.textContent = "EXPIRED";
                }
            }
        }
        
        updateTimer();
        const timerInterval = setInterval(updateTimer, 1000);
    }
    
    // Social proof rotation - simplified (no ticker needed)
    const socialProofMessages = [
        { name: '@TechReviews', avatar: 'TR', amount: '+$89K', time: 'just now' },
        { name: '@BeautyGuru', avatar: 'BG', amount: '+$156K', time: '2 min ago' },
        { name: '@GamingPro', avatar: 'GP', amount: '+$234K', time: '5 min ago' },
        { name: '@FoodieVlogs', avatar: 'FV', amount: '+$98K', time: '8 min ago' },
        { name: '@FitnessCoach', avatar: 'FC', amount: '+$127K', time: '12 min ago' }
    ];
    
    let socialProofIndex = 0;
    function rotateSocialProof() {
        // Social proof now integrated into main content area instead of ticker
        socialProofIndex = (socialProofIndex + 1) % socialProofMessages.length;
    }
    
    // Start social proof rotation
    setInterval(rotateSocialProof, YTA_CONFIG.conversionOptimizations.socialProofInterval);
    
    // Daily streak tracking with rewards
    function updateStreak() {
        const lastVisit = localStorage.getItem('yta_lastVisit');
        const today = new Date().toDateString();
        let streak = parseInt(localStorage.getItem('yta_streak') || '0');
        
        if (lastVisit !== today) {
            const yesterday = new Date(Date.now() - 86400000).toDateString();
            if (lastVisit === yesterday) {
                streak++;
                
                // Streak milestone rewards
                if (streak === 3) {
                    showAchievement('🔥 3 Day Streak!', 'Dedication unlocked! Premium users maintain 5x longer streaks.');
                } else if (streak === 7) {
                    showAchievement('🔥 Week Warrior!', 'You\'re serious about growth. Unlock unlimited potential now.');
                } else if (streak === 30) {
                    showAchievement('🔥 Monthly Master!', 'Top 1% dedication! Claim your exclusive rewards.');
                }
            } else if (lastVisit !== today) {
                streak = 1;
            }
            localStorage.setItem('yta_streak', streak);
            localStorage.setItem('yta_lastVisit', today);
        }
        
        document.getElementById('streakCount').textContent = streak;
        
        // Update progress ring
        const circle = document.querySelector('.progress-ring-circle');
        if (circle) {
            const progress = Math.min(streak / 7, 1);
            const circumference = 2 * Math.PI * 20;
            circle.style.strokeDasharray = circumference;
            circle.style.strokeDashoffset = circumference - (circumference * progress);
        }
    }
    
    // Show streak details - simplified
    function showStreakDetails() {
        const streak = parseInt(document.getElementById('streakCount').textContent);
        // Streak details now shown in achievements instead of behavioral prompts
        if (streak >= 7) {
            showAchievement('🔥 Week Warrior!', `${streak} day streak! You're committed to growth.`);
        }
    }
    
    // Progressive disclosure functionality
    function toggleSection(sectionId) {
        const section = document.getElementById(sectionId);
        const toggle = document.getElementById(sectionId.replace('Content', 'Toggle'));
        
        if (section.style.display === 'none') {
            section.style.display = 'block';
            toggle.textContent = '▼';
            trackAction('expand_section', { section: sectionId });
        } else {
            section.style.display = 'none';
            toggle.textContent = '▶';
            trackAction('collapse_section', { section: sectionId });
        }
    }
    
    // What-If Scenario Calculator
    function openScenarioModal() {
        trackAction('use_calculator');
        document.getElementById('modalOverlay').style.display = 'block';
        document.getElementById('scenarioModal').style.display = 'block';
        updateScenarioCalculation();
    }
    
    function closeScenarioModal() {
        document.getElementById('modalOverlay').style.display = 'none';
        document.getElementById('scenarioModal').style.display = 'none';
    }
    
    function updateScenarioCalculation() {
        const viewIncrease = parseInt(document.getElementById('viewIncrease').value);
        const engIncrease = parseInt(document.getElementById('engIncrease').value);
        
        document.getElementById('viewIncreaseValue').textContent = viewIncrease;
        document.getElementById('engIncreaseValue').textContent = engIncrease;
        
        const cd = window.currentChannelData;
        if (cd) {
            const baseRevenue = parseFloat(document.getElementById('annualPot').textContent.replace(/[$,]/g, '')) || 100000;
            const multiplier = YTA_SESSION.revenueMultiplier || 1.5;
            const projectedRevenue = baseRevenue * (1 + viewIncrease/100) * (1 + engIncrease/200) * multiplier;
            document.getElementById('projectedRevenue').textContent = `${Math.round(projectedRevenue).toLocaleString()}`;
        }
    }
    
    // Progressive Web App
    let deferredPrompt;
    window.addEventListener('beforeinstallprompt', (e) => {
        e.preventDefault();
        deferredPrompt = e;
        
        // Show install prompt after engagement
        if (YTA_SESSION.actions.length > 8) {
            document.getElementById('pwaPrompt').classList.add('show');
        }
    });
    
    function installPWA() {
        if (deferredPrompt) {
            deferredPrompt.prompt();
            deferredPrompt.userChoice.then((choiceResult) => {
                if (choiceResult.outcome === 'accepted') {
                    trackAction('pwa_installed');
                    showAchievement('📱 App Installed!', 'Track your revenue growth on the go!');
                }
                deferredPrompt = null;
                document.getElementById('pwaPrompt').classList.remove('show');
            });
        }
    }
    
    function closePWA() {
        document.getElementById('pwaPrompt').classList.remove('show');
    }
    
    // Improved empty states with clear value propositions
    function showValueEmptyState(container, title, description, ctaText = 'Unlock Now') {
        const emptyState = `
            <div class="empty-state-premium">
                <div class="empty-state-icon">🔒</div>
                <div class="empty-state-title">${title}</div>
                <div class="empty-state-description">${description}</div>
                <div style="background: linear-gradient(135deg, #FFF7ED 0%, #FFEDD5 100%); padding: 16px; border-radius: 8px; border: 1px solid #F97316; margin: 16px 0;">
                    <div style="font-size: 14px; color: #EA580C; font-weight: 600; margin-bottom: 8px;">💰 Revenue Impact</div>
                    <div style="font-size: 12px; color: #92400E;">Premium users average 340% more revenue with full access to these insights</div>
                </div>
                <button class="yta-btn-primary" onclick="window.open('https://www.primetime.media/beta-1', '_blank')">${ctaText} →</button>
                <div class="cta-reassurance">✓ Start earning instantly ✓ Cancel anytime ✓ Revenue share model</div>
            </div>
        `;
        document.getElementById(container).innerHTML = emptyState;
    }
    
    // Clear cache
    function ytaClearCache() {
        ['localStorage', 'sessionStorage'].forEach(storage => {
            if (typeof window[storage] !== 'undefined') {
                Object.keys(window[storage]).forEach(key => {
                    if (key.startsWith('yta_') && !key.includes('streak')) {
                        window[storage].removeItem(key);
                    }
                });
            }
        });
    }
    
    // Reset function
    function ytaReset() {
        trackAction('reset_analysis');
        ytaClearCache();
        
        // Clear server cache
        fetch(YTA_CONFIG.baseUrl + '/clear-cache', {
            method: 'POST'
        }).catch(() => {});
        
        // Reset UI
        document.querySelector('.yta-input-section').style.display = 'block';
        document.getElementById('ytaLoading').style.display = 'none';
        document.querySelector('.yta-results').style.display = 'none';
        document.getElementById('ytaHandle').value = '';
        document.getElementById('ytaMsg').innerHTML = '';
        document.getElementById('floatingCTA').style.display = 'none';
        document.querySelector('.mobile-sticky-cta').classList.remove('show');
        document.getElementById('criticalBanner').classList.remove('show');
        document.getElementById('usageLimits').classList.remove('show');
        document.getElementById('revenueOpportunityBar').classList.remove('show');
        document.getElementById('bottomCTAArea').classList.remove('show');
        window.floatingCTAShown = false;
        
        // Reset session
        YTA_SESSION.actions = [];
        YTA_SESSION.featureUsage = {};
        YTA_SESSION.conversionTriggers = {
            revenueViewed: false,
            lostRevenueShocked: false,
            aiInsightsReviewed: false,
            calculatorUsed: false
        };
        YTA_SESSION.shownDeepEngagement = false;
        YTA_SESSION.shownProgress = false;
        
        setTimeout(() => document.getElementById('ytaHandle').focus(), 100);
    }
    
    // Backend warming to prevent cold start issues
    function warmupBackend() {
        // Make a lightweight request to warm up the backend
        fetch(YTA_CONFIG.baseUrl + '/health')
        .catch(() => {
            // Fallback: try a minimal analyze request
            fetch(YTA_CONFIG.baseUrl + '/analyze?handle=warmup&minimal=true')
            .catch(() => {}); // Ignore errors, this is just for warmup
        });
    }
    
    // Enhanced run analysis with retry mechanism
    function ytaRun(retryCount = 0) {
        trackAction('analyze_channel', { attempt: retryCount + 1 });
        const handle = document.getElementById('ytaHandle').value.trim();
        if (!handle) {
            document.getElementById('ytaMsg').innerHTML = '<div style="color:#DC143C;background:#FEE2E2;padding:16px;border-radius:8px;margin:10px 0;text-align:center;border:2px solid #FCA5A5;font-weight:600;">⚠️ Enter your channel to discover hidden revenue</div>';
            return;
        }
        
        ytaClearCache();
        document.getElementById('ytaMsg').innerHTML = '';
        document.querySelector('.yta-input-section').style.display = 'none';
        document.getElementById('ytaLoading').style.display = 'block';
        
        // Progressive loading stages with retry awareness
        const loadingStages = retryCount === 0 ? [
            '🔍 Analyzing channel performance...',
            '💰 Calculating revenue potential...',
            '📊 Identifying growth opportunities...',
            '🚀 Preparing your roadmap to success...'
        ] : [
            '🔄 Retrying analysis...',
            '⚡ Warming up servers...',
            '🎯 Almost there...',
            '✨ Finalizing results...'
        ];
        
        let stageIndex = 0;
        const stageInterval = setInterval(() => {
            if (stageIndex < loadingStages.length) {
                document.getElementById('loadingStage').textContent = loadingStages[stageIndex];
                stageIndex++;
            }
        }, retryCount === 0 ? 2000 : 1500);
        
        const formattedHandle = handle.startsWith('@') ? handle : '@' + handle;
        const capitalizedHandle = formattedHandle.toUpperCase();
        const loadText = retryCount === 0 
            ? `Unlocking Revenue for ${capitalizedHandle}...`
            : `Retry ${retryCount + 1}: Analyzing ${capitalizedHandle}...`;
        document.getElementById('ytaLoadText').textContent = loadText;
        
        const controller = new AbortController();
        const timeout = retryCount === 0 ? YTA_CONFIG.timeout : YTA_CONFIG.retryTimeout;
        setTimeout(() => controller.abort(), timeout);
        
        // Add retry delay for subsequent attempts
        const delay = retryCount > 0 ? YTA_CONFIG.retryDelay + (retryCount * 500) : 0;
        
        // Add retry delay for subsequent attempts
        const makeRequest = () => {
            return fetch(YTA_CONFIG.baseUrl + '/analyze?handle=' + encodeURIComponent(handle) + '&detailed=true&retry=' + retryCount, {
                headers: {
                    'Content-Type': 'application/json',
                    'Accept': 'application/json'
                },
                signal: controller.signal
            })
            .then(async response => {
                if (!response.ok) {
                    const errorText = await response.text().catch(() => 'Unknown error');
                    
                    // Check for specific error types
                    if (response.status === 500 && errorText.includes('user not found') && retryCount < 2) {
                        throw new Error('USER_NOT_FOUND_RETRY');
                    } else if (response.status === 500 && retryCount < 3) {
                        throw new Error('SERVER_ERROR_RETRY');
                    } else if (response.status === 404) {
                        throw new Error('Channel not found. Please check the handle format.');
                    } else if (response.status === 429) {
                        throw new Error('Rate limit exceeded. Please wait a moment.');
                    }
                    
                    throw new Error(`API Error ${response.status}: ${errorText}`);
                }
                return response.json();
            });
        };
        
        setTimeout(() => {
            makeRequest()
                .then(data => {
                    clearInterval(stageInterval);
                    document.getElementById('ytaLoading').style.display = 'none';
                    window.currentChannelData = data.channel_data || data;
                    ytaUpdateDashboard(data, handle);
                    document.querySelector('.yta-results').style.display = 'block';
                    
                    // Track successful retry
                    if (retryCount > 0) {
                        trackAction('retry_success', { finalAttempt: retryCount + 1 });
                    }
                    
                    // Mobile sticky CTA
                    if (window.innerWidth <= 768) {
                        setTimeout(() => {
                            document.querySelector('.mobile-sticky-cta').classList.add('show');
                        }, 5000);
                    }
                    
                    // Show initial social proof
                    setTimeout(rotateSocialProof, 3000);
                })
                .catch(err => {
                    clearInterval(stageInterval);
                    console.error('Analysis error:', err);
                    
                    // Handle specific retry cases
                    if ((err.message === 'USER_NOT_FOUND_RETRY' || err.message === 'SERVER_ERROR_RETRY') && retryCount < 3) {
                        // Show retry message
                        document.getElementById('loadingStage').textContent = `⚡ Retrying in ${3 - retryCount} seconds...`;
                        
                        setTimeout(() => {
                            ytaRun(retryCount + 1);
                        }, 3000);
                        return;
                    }
                    
                    // Failed after retries or other errors
                    document.getElementById('ytaLoading').style.display = 'none';
                    document.querySelector('.yta-input-section').style.display = 'block';
                    
                    let errorMsg = 'Connection failed';
                    let errorDetail = 'Please try again';
                    
                    if (err.name === 'AbortError') {
                        errorMsg = 'Request timeout';
                        errorDetail = 'The analysis is taking longer than expected';
                    } else if (err.message.includes('user not found')) {
                        errorMsg = 'Channel Not Found';
                        errorDetail = 'Please check your channel handle format:<br>• @channelname<br>• youtube.com/@channelname';
                    } else if (err.message.includes('Rate limit')) {
                        errorMsg = 'Too Many Requests';
                        errorDetail = 'Please wait a moment before trying again';
                    } else if (err.message.includes('Channel not found')) {
                        errorMsg = 'Channel Not Found';
                        errorDetail = 'This channel may not exist or be private';
                    } else if (err.message) {
                        errorMsg = 'Analysis Failed';
                        errorDetail = err.message;
                    }
                    
                    const retryButton = retryCount < 3 
                        ? `<button class="yta-btn-primary" onclick="ytaRun(${retryCount + 1})" style="margin-top:12px;">🔄 Try Again</button>`
                        : `<button class="yta-btn-primary" onclick="ytaRun(0)" style="margin-top:12px;">🔄 Start Over</button>`;
                    
                    document.getElementById('ytaMsg').innerHTML = `
                        <div style="color:#DC143C;background:#FEE2E2;padding:20px;border-radius:10px;margin:10px 0;text-align:center;border:2px solid #FCA5A5;">
                            <div style="font-size:20px;margin-bottom:8px;">⚠️</div>
                            <strong>${errorMsg}</strong><br>
                            <div style="font-size:14px;margin:8px 0;line-height:1.4;">${errorDetail}</div>
                            ${retryCount > 0 ? `<small>Attempt ${retryCount + 1} of 4</small>` : ''}
                            ${retryButton}
                        </div>
                    `;
                    
                    trackAction('analysis_failed', { 
                        error: err.message, 
                        attempts: retryCount + 1,
                        handle: handle 
                    });
                });
        }, delay);
    }
    
    // Enhanced update dashboard with all improvements
    function ytaUpdateDashboard(data, handle) {
        trackAction('view_metrics');
        const cd = data.channel_data || data;
        const fmt = n => {
            if (n >= 1e9) return (n/1e9).toFixed(1) + 'B';
            if (n >= 1e6) return (n/1e6).toFixed(1) + 'M';
            if (n >= 1e3) return (n/1e3).toFixed(1) + 'K';
            return n.toString();
        };
        
        // Format handle with better display
        const apiHandle = cd.channel_handle || handle;
        const formattedHandle = apiHandle.startsWith('@') ? apiHandle : '@' + apiHandle;
        const capitalizedHandle = formattedHandle.toUpperCase();
        
        document.getElementById('channelName').textContent = `${capitalizedHandle} Analytics`;
        
        // Show channel image with error handling
        if (cd.channel_avatar || cd.channelImage || cd.thumbnail) {
            const channelImg = document.getElementById('channelImage');
            channelImg.src = cd.channel_avatar || cd.channelImage || cd.thumbnail;
            channelImg.style.display = 'block';
        }
        
        // Update basic stats with success color
        document.getElementById('subCount').textContent = fmt(cd.subscriberCount || 0);
        document.getElementById('viewCount').textContent = fmt(cd.viewCount || 0);
        document.getElementById('videoCount').textContent = fmt(cd.videoCount || 0);
        document.getElementById('channelCategory').innerHTML = `
            <span style="font-size: 18px;">🎭</span>
            Category: ${cd.category || 'Entertainment'}
        `;
        
        // Calculate optimization metrics with urgency
        const opt = cd.passed_compliance || 0;
        const chk = cd.videos_checked || 0;
        const rate = chk > 0 ? Math.round((opt / chk) * 100) : 0;
        
        // Get revenue data with enhanced calculations
        const revenueCalc = data.back_catalog_revenue_calculator || {};
        const perVideoImpact = revenueCalc.per_video_impact || {};
        const annualTotals = revenueCalc.annual_totals || {};
        const historicalData = data.historical_lost_revenue || {};
        const calcDetails = historicalData.calculation_details || {};
        const summaryMetrics = historicalData.summary_metrics || {};
        
        // Apply urgency multiplier
        const urgencyMultiplier = YTA_CONFIG.conversionOptimizations.urgencyMultiplier;
        let revenueLift = (perVideoImpact.total_gain || 0) * urgencyMultiplier;
        let annualRevenuePotential = (annualTotals.total_additional_revenue || 0) * urgencyMultiplier;
        let totalLostRevenue = (summaryMetrics.total_revenue_lost || calcDetails.base_lost_opportunity || 0) * urgencyMultiplier;
        
        // Track key actions with revenue sidebar updates
        if (annualRevenuePotential > 0) {
            trackAction('view_revenue', { amount: annualRevenuePotential });
            
            // Update revenue critical sidebar
            const sidebarRevenue = document.getElementById('sidebarRevenue');
            const sidebarStatus = document.getElementById('sidebarStatus');
            const revenueSidebar = document.getElementById('revenueCriticalSidebar');
            
            if (sidebarRevenue) {
                sidebarRevenue.textContent = `${fmt(Math.round(annualRevenuePotential))}`;
            }
            if (sidebarStatus) {
                sidebarStatus.textContent = 'Your channel is missing significant revenue opportunities. Every day without optimization costs money.';
            }
            if (revenueSidebar) {
                revenueSidebar.classList.add('show');
            }
        }
        if (totalLostRevenue > 0) {
            trackAction('view_lost_revenue', { amount: totalLostRevenue });
        }
        
        // Update peer comparisons with realistic data
        if (cd.subscriberCount) {
            const avgRevenuePer1K = 3.5; // Industry average
            const userRevenuePer1K = (annualRevenuePotential / (cd.viewCount / 1000)) || 1.2;
            const revenueGap = ((avgRevenuePer1K - userRevenuePer1K) / avgRevenuePer1K * 100);
            
            document.getElementById('revenueComparison').textContent = `${Math.round(revenueGap)}% below average`;
            document.getElementById('revenueComparison').className = revenueGap > 0 ? 'peer-metric-value peer-worse' : 'peer-metric-value peer-better';
        }
        
        // Update revenue metrics
        document.getElementById('revPerVideo').textContent = `${fmt(Math.round(revenueLift))}`;
        document.getElementById('viewsImpact').textContent = fmt(Math.round(perVideoImpact.additional_views || 0));
        document.getElementById('annualPot').textContent = `${fmt(Math.round(annualRevenuePotential))}`;
        document.getElementById('subGrowth').textContent = `+${fmt(Math.round(annualTotals.additional_subscribers || 0))}`;
        
        // Update lost revenue display
        document.getElementById('totalLostRevenue').textContent = `${fmt(Math.round(totalLostRevenue))}`;
        document.getElementById('lostViews').textContent = `${fmt(calcDetails.views_lost || 0)} Lost Views`;
        
        const channelAgeYears = calcDetails.channel_age_years || 0;
        document.getElementById('channelAge').textContent = `Over ${channelAgeYears.toFixed(1)} years`;
        
        const dailyLossRate = totalLostRevenue / (channelAgeYears * 365) || 0;
        document.getElementById('dailyLossRate').textContent = `${Math.round(dailyLossRate)}/day`;
        
        // Set dates
        if (calcDetails.channel_start_date) {
            const startDate = new Date(calcDetails.channel_start_date);
            document.getElementById('channelStartDate').textContent = startDate.toLocaleDateString('en-US', { month: 'short', year: 'numeric' });
        }
        document.getElementById('currentDate').textContent = new Date().toLocaleDateString('en-US', { month: 'short', year: 'numeric' });
        
        // Animate loss growth bar
        setTimeout(() => {
            document.getElementById('lossGrowthBar').style.width = '90%';
        }, 500);
        
        // Continue with other updates...
        ytaUpdateMetrics(cd);
        ytaUpdateScore(cd);
        ytaUpdateVideos(data.videos || []);
        ytaUpdateChart(data.videos || [], cd);
        ytaUpdateTrends(cd.trend_analysis || {});
        ytaUpdateAI(data.ai_analysis || {}, cd);
        ytaUpdateAwards(cd);
        
        // Show feature progress after successful analysis
        setTimeout(() => {
            document.getElementById('featureProgress').style.display = 'block';
        }, 2000);
    }
    
    // Update performance metrics with brand colors
    function ytaUpdateMetrics(cd) {
        const w = cd.weighted_averages || {};
        
        // Engagement rate
        const engRate = w['Engagement (%)'] || 0;
        const engElement = document.getElementById('engagementRate');
        engElement.textContent = `${engRate.toFixed(1)}%`;
        const engColor = engRate < 1 ? '#EF4444' : engRate < 5 ? '#F97316' : '#10B981';
        engElement.style.color = engColor;
        engElement.style.fontWeight = '700';
        
        const engBar = document.getElementById('engagementBar');
        const engPct = Math.min((engRate / 10) * 100, 100);
        engBar.style.width = `${engPct}%`;
        engBar.className = engRate < 1 ? 'yta-progress-fill yta-progress-poor' :
                          engRate < 5 ? 'yta-progress-fill yta-progress-good' :
                          'yta-progress-fill yta-progress-excellent';
        
        // Like rate
        const likeRate = w['Like Rate (%)'] || 0;
        const likeElement = document.getElementById('likeRate');
        likeElement.textContent = `${likeRate.toFixed(1)}%`;
        const likeColor = likeRate < 1 ? '#EF4444' : likeRate < 4 ? '#F97316' : '#10B981';
        likeElement.style.color = likeColor;
        likeElement.style.fontWeight = '700';
        
        const likeBar = document.getElementById('likeBar');
        const likePct = Math.min((likeRate / 10) * 100, 100);
        likeBar.style.width = `${likePct}%`;
        likeBar.className = likeRate < 1 ? 'yta-progress-fill yta-progress-poor' :
                            likeRate < 4 ? 'yta-progress-fill yta-progress-good' :
                            'yta-progress-fill yta-progress-excellent';
        
        // Comment rate
        const commentRate = w['Comment Rate (%)'] || 0;
        const commentElement = document.getElementById('commentRate');
        commentElement.textContent = `${commentRate.toFixed(1)}%`;
        const commentColor = commentRate < 0.1 ? '#EF4444' : commentRate < 0.5 ? '#F97316' : '#10B981';
        commentElement.style.color = commentColor;
        commentElement.style.fontWeight = '700';
        
        const commentBar = document.getElementById('commentBar');
        const commentPct = Math.min((commentRate / 2) * 100, 100);
        commentBar.style.width = `${commentPct}%`;
        commentBar.className = commentRate < 0.1 ? 'yta-progress-fill yta-progress-poor' :
                               commentRate < 0.5 ? 'yta-progress-fill yta-progress-good' :
                               'yta-progress-fill yta-progress-excellent';
        
        // Relative views - FIXED COLOR CODING
        const relativeViews = w['Relative Views'] || 0;
        const relativeElement = document.getElementById('relativeViews');
        relativeElement.textContent = `${relativeViews.toFixed(1)}x`;
        const relativeColor = relativeViews < 0.8 ? '#EF4444' : relativeViews < 1.5 ? '#F97316' : '#10B981';
        relativeElement.style.color = relativeColor;
        relativeElement.style.fontWeight = '700';
        
        const relativeBar = document.getElementById('relativeBar');
        const relativePct = Math.min((relativeViews / 3) * 100, 100);
        relativeBar.style.width = `${relativePct}%`;
        relativeBar.className = relativeViews < 0.8 ? 'yta-progress-fill yta-progress-poor' :
                                relativeViews < 1.5 ? 'yta-progress-fill yta-progress-good' :
                                'yta-progress-fill yta-progress-excellent';
        
        // Subscriber engagement
        const subEngScore = cd.subscriber_engagement_score || 0;
        const subEngElement = document.getElementById('subEngagement');
        subEngElement.textContent = `${subEngScore.toFixed(1)}%`;
        const subEngColor = subEngScore < 0 ? '#EF4444' : subEngScore < 3 ? '#F97316' : '#10B981';
        subEngElement.style.color = subEngColor;
        subEngElement.style.fontWeight = '700';
        
        const subEngBar = document.getElementById('subEngBar');
        const subEngPct = Math.min((subEngScore / 10) * 100, 100);
        subEngBar.style.width = `${subEngPct}%`;
        subEngBar.className = subEngScore < 0 ? 'yta-progress-fill yta-progress-poor' :
                              subEngScore < 3 ? 'yta-progress-fill yta-progress-good' :
                              'yta-progress-fill yta-progress-excellent';
        
        // Sentiment - FIXED COLOR CODING
        const sentScore = (cd.raw_sentiment_index || 0) * 100;
        const sentElement = document.getElementById('sentiment');
        sentElement.textContent = `${sentScore.toFixed(1)}%`;
        const sentColor = cd.raw_sentiment_index < 0 ? '#EF4444' : cd.raw_sentiment_index < 0.4 ? '#F97316' : '#10B981';
        sentElement.style.color = sentColor;
        sentElement.style.fontWeight = '700';
        
        const sentBar = document.getElementById('sentimentBar');
        sentBar.style.width = `${sentScore}%`;
        sentBar.className = cd.raw_sentiment_index < 0 ? 'yta-progress-fill yta-progress-poor' :
                            cd.raw_sentiment_index < 0.4 ? 'yta-progress-fill yta-progress-good' :
                            'yta-progress-fill yta-progress-excellent';
    }
    
    // Update health score with brand colors
    function ytaUpdateScore(cd) {
        const score = cd.composite_score || cd.average_composite_score || 0;
        const w = cd.weighted_averages || {};
        
        document.getElementById('scoreValue').textContent = score.toFixed(1);
        document.getElementById('scoreCircle').style.setProperty('--score-deg', `${score * 36}deg`);
        
        let scoreColor;
        let scoreStatus;
        if (score >= 8.5) {
            scoreColor = '#10B981';
            scoreStatus = 'Excellent - Ready to Scale';
        } else if (score >= 7.0) {
            scoreColor = '#10B981';
            scoreStatus = 'Very Good - Minor Optimizations Needed';
        } else if (score >= 5.5) {
            scoreColor = '#F97316';
            scoreStatus = 'Good - Significant Potential Available';
        } else if (score >= 4.0) {
            scoreColor = '#F97316';
            scoreStatus = 'Average - Major Revenue Left Behind';
        } else if (score >= 2.5) {
            scoreColor = '#EF4444';
            scoreStatus = 'Poor - Critical Improvements Needed';
        } else {
            scoreColor = '#EF4444';
            scoreStatus = 'Critical - Immediate Action Required';
        }
        
        document.getElementById('scoreCircle').style.setProperty('--score-color', scoreColor);
        document.getElementById('healthStatus').textContent = scoreStatus;
        document.getElementById('healthStatus').style.color = scoreColor;
        
        const healthDescText = 
            score >= 8.5 ? 'Your channel is performing at elite levels. Minor tweaks could still add significant revenue.' :
            score >= 7.0 ? 'Strong performance with clear opportunities for growth. Optimization can unlock 50%+ more revenue.' :
            score >= 5.5 ? 'Decent foundation but missing key optimizations. You could double your revenue with the right strategy.' :
            score >= 4.0 ? 'Your channel is underperforming. Immediate optimization could triple your earnings.' :
            score >= 2.5 ? 'Major issues are costing you viewers and revenue. Quick fixes could 5x your income.' :
            'Your channel is in crisis mode. Every day without optimization costs you thousands.';
        
        document.getElementById('healthDesc').innerHTML = healthDescText;
    }
    
    // Update videos list with brand styling
    function ytaUpdateVideos(videos) {
        const el = document.getElementById('videosList');
        const fmt = n => n >= 1e9 ? (n/1e9).toFixed(1) + 'B' : n >= 1e6 ? (n/1e6).toFixed(1) + 'M' : n >= 1e3 ? (n/1e3).toFixed(1) + 'K' : n.toString();
        
        const formatDate = (dateStr) => {
            if (!dateStr) return 'Date unknown';
            try {
                const date = new Date(dateStr);
                const now = new Date();
                const diffTime = Math.abs(now - date);
                const diffDays = Math.floor(diffTime / (1000 * 60 * 60 * 24));
                
                if (diffDays === 0) return 'Today';
                if (diffDays === 1) return 'Yesterday';
                if (diffDays < 7) return diffDays + ' days ago';
                if (diffDays < 30) return Math.floor(diffDays / 7) + ' weeks ago';
                if (diffDays < 365) return Math.floor(diffDays / 30) + ' months ago';
                return Math.floor(diffDays / 365) + ' years ago';
            } catch (e) {
                return 'Date error';
            }
        };
        
        if (!videos.length) {
            showValueEmptyState('videosList', 'No Video Data Available', 'Premium analysis includes full video history');
            return;
        }
        
        let html = '';
        let unoptimizedCount = 0;
        
        videos.slice(0, 10).forEach((v, index) => {
            const title = (v.Title || v.title || 'Untitled').replace(/"/g, '&quot;').replace(/'/g, '&apos;');
            const views = fmt(v.Views || v.views || 0);
            const engValue = parseFloat(v['Engagement (%)'] || v.engagement || 0);
            const scoreValue = parseFloat(v['Composite Score (0–10)'] || v.score || 0);
            const opt = v['Hashtag Compliant'] === 'Yes' || v.optimized || false;
            
            if (!opt) unoptimizedCount++;
            
            let publishDate = v['Publish Date'] || v['PublishDate'] || v.publishDate || 
                            v.published || v.publishedAt || v.date || v.uploaded || 
                            v.upload_date || v.created_at || v.createdAt || '';
            
            if (!publishDate && v.snippet) {
                publishDate = v.snippet.publishedAt || v.snippet.publishDate || '';
            }
            
            const dateText = formatDate(publishDate);
            
            const sentValue = v['Raw Sentiment Index'] || 0;
            let sentIcon = '😐';
            let sentColor = '#F97316';
            
            if (sentValue < 0) {
                sentIcon = '😡';
                sentColor = '#EF4444';
            } else if (sentValue >= 0.6) {
                sentIcon = '🤩';
                sentColor = '#10B981';
            } else if (sentValue >= 0.4) {
                sentIcon = '😄';
                sentColor = '#10B981';
            } else if (sentValue >= 0.2) {
                sentIcon = '😊';
                sentColor = '#F97316';
            }
            
            html += '<div class="video-item">';
            html += '<div style="flex:1;">';
            html += '<div style="display:flex;gap:10px;margin-bottom:6px;align-items:center;">';
            
            // Enhanced optimization indicator
            const tooltipText = opt ? 'Optimized ✓ Ready to earn' : '⚠️ LOSING MONEY - Needs optimization NOW';
            const indicatorClass = opt ? 'optimized' : 'not-optimized';
            html += '<span class="video-opt-indicator ' + indicatorClass + '" title="' + tooltipText + '">' + (opt ? '✓' : '💸') + '</span>';
            
            html += '<div style="font-weight:600;font-size:14px;line-height:1.4;flex:1;color:#1a1a1a;">' + title + '</div>';
            html += '</div>';
            
            // Date and metrics
            html += '<div style="margin-bottom:6px;">';
            html += '<span style="color:#3B82F6;font-weight:600;background:rgba(59,130,246,0.1);padding:3px 8px;border-radius:4px;font-size:12px;">' + dateText + '</span>';
            html += '</div>';
            
            html += '<div style="color:#6B7280;font-size:12px;line-height:1.5;">';
            html += views + ' views • ';
            html += '<span style="color:' + (engValue < 3 ? '#EF4444' : engValue < 5 ? '#F97316' : '#10B981') + ';font-weight:600;">' + engValue.toFixed(1) + '% engagement</span> • ';
            html += 'Score: <span style="color:' + (scoreValue < 4 ? '#EF4444' : scoreValue < 7 ? '#F97316' : '#10B981') + ';font-weight:600;">' + scoreValue.toFixed(1) + '</span>';
            html += '</div>';
            
            // Sentiment and optimization warning
            html += '<div style="color:#6B7280;font-size:12px;margin-top:6px;">';
            html += '<span>' + sentIcon + '</span> ';
            html += '<span style="color:' + sentColor + ';">Sentiment: ' + (sentValue * 100).toFixed(0) + '%</span>';
            
            if (!opt) {
                html += ' • <span style="color:#EF4444;font-weight:700;font-size:11px;background:rgba(239,68,68,0.15);padding:2px 6px;border-radius:4px;">💸 REVENUE LOST</span>';
            }
            
            html += '</div>';
            html += '</div>';
            html += '</div>';
        });
        
        el.innerHTML = html;
        
        // Show urgency if many videos unoptimized - simplified tracking
        if (unoptimizedCount >= 5) {
            trackAction('high_unoptimized_count', { count: unoptimizedCount });
        }
    }
    
    // Update chart with brand colors
    function ytaUpdateChart(videos, channelData) {
        const bars = document.getElementById('chartBars').children;
        const w = channelData.weighted_averages || {};
        
        const metrics = [
            { value: w['Engagement (%)'] || 0, max: 10, unit: '%', id: 'engChart' },
            { value: w['Like Rate (%)'] || 0, max: 10, unit: '%', id: 'likeChart' },
            { value: w['Comment Rate (%)'] || 0, max: 2, unit: '%', id: 'commentChart' },
            { value: w['Relative Views'] || 0, max: 3, unit: 'x', id: 'relativeChart' },
            { value: (channelData.raw_sentiment_index || 0) * 100, max: 100, unit: '%', id: 'sentimentChart' }
        ];
        
        metrics.forEach((metric, i) => {
            const percentage = Math.min((metric.value / metric.max) * 100, 100);
            let color = '#10B981';
            
            if (i === 0) { // Engagement
                color = metric.value < 1 ? '#EF4444' : metric.value < 3 ? '#F97316' : '#10B981';
            } else if (i === 1) { // Like rate
                color = metric.value < 1 ? '#EF4444' : metric.value < 2 ? '#F97316' : '#10B981';
            } else if (i === 2) { // Comment rate
                color = metric.value < 0.1 ? '#EF4444' : metric.value < 0.5 ? '#F97316' : '#10B981';
            } else if (i === 3) { // Relative views - FIXED THRESHOLDS
                color = metric.value < 0.8 ? '#EF4444' : metric.value < 1.5 ? '#F97316' : '#10B981';
            } else if (i === 4) { // Sentiment - FIXED THRESHOLDS
                const rawSent = channelData.raw_sentiment_index || 0;
                color = rawSent < 0 ? '#EF4444' : rawSent < 0.4 ? '#F97316' : '#10B981';
            }
            
            bars[i].style.height = Math.max(percentage, metric.value > 0 ? 5 : 0) + '%';
            bars[i].style.backgroundColor = color;
            bars[i].style.boxShadow = `0 -4px 20px ${color}40`;
            
            const valueEl = document.getElementById(metric.id);
            if (valueEl) {
                valueEl.textContent = metric.value.toFixed(1) + metric.unit;
                valueEl.style.color = color;
                valueEl.style.fontWeight = 'bold';
            }
        });
    }
    
    // Update trends with brand styling
    function ytaUpdateTrends(trends) {
        const el = document.getElementById('trendsData');
        if (!trends || !Object.keys(trends).length) {
            showValueEmptyState('trendsData', 'Advanced Trend Analysis', 'Unlock predictive analytics and viral forecasting');
            return;
        }
        
        let html = '<div style="overflow-x:auto;"><table style="width:100%;border-collapse:collapse;">';
        html += '<thead><tr style="border-bottom:2px solid #E5E7EB;">';
        html += '<th style="text-align:left;padding:12px;font-size:13px;color:#6B7280;">METRIC</th>';
        html += '<th style="text-align:right;padding:12px;font-size:13px;color:#6B7280;">CURRENT</th>';
        html += '<th style="text-align:right;padding:12px;font-size:13px;color:#6B7280;">PREVIOUS</th>';
        html += '<th style="text-align:right;padding:12px;font-size:13px;color:#6B7280;">CHANGE</th>';
        html += '<th style="text-align:center;padding:12px;font-size:13px;color:#6B7280;">TREND</th>';
        html += '</tr></thead><tbody>';
        
        let downwardTrends = 0;
        
        Object.entries(trends).forEach(([key, value]) => {
            if (value && value.trend && value.new_avg !== undefined) {
                const name = key.replace(/_+$/, '').replace(/_/g, ' ').replace(/\b\w/g, l => l.toUpperCase());
                const icon = value.trend === 'up' ? '📈' : value.trend === 'down' ? '📉' : '➡️';
                const diff = value.new_avg - value.old_avg;
                const changeColor = diff > 0 ? '#10B981' : diff < 0 ? '#EF4444' : '#6B7280';
                
                if (value.trend === 'down') downwardTrends++;
                
                let currentColor = '#1a1a1a';
                if (key.includes('composite_score')) {
                    currentColor = value.new_avg >= 7.0 ? '#10B981' : 
                                  value.new_avg >= 5.5 ? '#10B981' :
                                  value.new_avg >= 4.0 ? '#F97316' :
                                  value.new_avg >= 2.5 ? '#EF4444' :
                                  '#EF4444';
                } else if (key.includes('engagement') || key.includes('like_rate') || key.includes('comment_rate')) {
                    currentColor = value.new_avg >= 3 ? '#10B981' : value.new_avg >= 1 ? '#F97316' : '#EF4444';
                }
                
                let current, previous, change;
                if (key.includes('rate') || key.includes('engagement')) {
                    current = value.new_avg.toFixed(1) + '%';
                    previous = value.old_avg.toFixed(1) + '%';
                    change = (diff > 0 ? '+' : '') + diff.toFixed(1) + '%';
                } else {
                    current = value.new_avg.toFixed(1);
                    previous = value.old_avg.toFixed(1);
                    change = (diff > 0 ? '+' : '') + diff.toFixed(1);
                }
                
                html += '<tr style="border-bottom:1px solid #F3F4F6;">';
                html += '<td style="padding:12px;font-size:14px;color:#1a1a1a;">' + name + '</td>';
                html += '<td style="text-align:right;padding:12px;font-weight:700;color:' + currentColor + ';font-size:14px;">' + current + '</td>';
                html += '<td style="text-align:right;padding:12px;color:#6B7280;font-size:14px;">' + previous + '</td>';
                html += '<td style="text-align:right;padding:12px;font-weight:600;color:' + changeColor + ';font-size:14px;">' + change + '</td>';
                html += '<td style="text-align:center;padding:12px;font-size:20px;">' + icon + '</td>';
                html += '</tr>';
            }
        });
        
        html += '</tbody></table></div>';
        
        if (downwardTrends >= 3) {
            html += '<div style="margin-top:20px;padding:16px;background:rgba(239,68,68,0.1);border:2px solid #EF4444;border-radius:8px;text-align:center;">';
            html += '<div style="font-size:16px;color:#EF4444;font-weight:700;margin-bottom:8px;">⚠️ Critical: ' + downwardTrends + ' Metrics Declining</div>';
            html += '<div style="font-size:14px;color:#991B1B;">Your channel is losing momentum. Act now before it\'s too late.</div>';
            html += '<button class="yta-btn-primary" style="margin-top:12px;" onclick="window.open(\'https://www.primetime.media/beta-signup\', \'_blank\')">Reverse The Decline →</button>';
            html += '</div>';
        }
        
        el.innerHTML = html;
    }
    
    // Update AI analysis with revenue focus
    function ytaUpdateAI(ai, channelData) {
        trackAction('view_ai');
        
        if (!ai || !ai.greeting) {
            document.getElementById('aiGreeting').textContent = 'AI analysis not available - Premium feature';
            return;
        }
        
        // Update greeting
        document.getElementById('aiGreeting').textContent = ai.greeting + ' Let\'s unlock your revenue potential.';
        
        // Quick stats
        if (ai.secondary_metrics && ai.secondary_metrics.length > 0) {
            const statsEl = document.getElementById('aiQuickStats');
            let statsHtml = '';
            
            ai.secondary_metrics.forEach(metric => {
                const value = parseFloat(metric.current_value) || 0;
                const color = value > 5 ? '#10B981' : value > 2 ? '#F97316' : '#EF4444';
                
                statsHtml += '<div style="background:#F9FAFB;border:1px solid #E5E7EB;border-radius:8px;padding:15px;text-align:center;">';
                statsHtml += '<div style="font-size:20px;font-weight:700;margin-bottom:6px;color:' + color + ';">' + value.toFixed(1) + '</div>';
                statsHtml += '<div style="font-size:12px;color:#6B7280;text-transform:uppercase;">' + metric.metric + '</div>';
                statsHtml += '</div>';
            });
            
            statsEl.innerHTML = statsHtml;
            statsEl.style.display = 'grid';
        }
        
        // Upload timing
        if (ai.upload_timing_insights) {
            const uploadEl = document.getElementById('aiUploadTime');
            let uploadHtml = '<div style="padding:10px;">';
            uploadHtml += '<p style="margin-bottom:10px;color:#4B5563;">' + (ai.upload_timing_insights.note || 'Optimize your upload schedule for maximum revenue.') + '</p>';
            uploadHtml += '<div style="background:#F9FAFB;padding:12px;border-radius:6px;margin-top:10px;">';
            uploadHtml += '<strong style="color:#F97316;">💰 Revenue Impact:</strong> Proper timing can increase views by 40-60%';
            uploadHtml += '</div>';
            uploadHtml += '</div>';
            
            document.getElementById('uploadTimeContent').innerHTML = uploadHtml;
            uploadEl.style.display = 'block';
        }
        
        // Critical issue emphasis
        if (ai.critical_issue) {
            const takeawayEl = document.getElementById('aiTakeaway');
            let takeawayHtml = '<div style="font-size:20px;color:#EF4444;font-weight:700;margin-bottom:10px;">⚠️ ' + ai.critical_issue.impact + '</div>';
            takeawayHtml += '<div style="font-size:16px;line-height:1.6;margin-bottom:15px;">' + ai.critical_issue.reality_check + '</div>';
            takeawayHtml += '<button class="yta-btn-primary" style="font-size:16px;" onclick="window.open(\'https://www.primetime.media/beta-signup\', \'_blank\')">Fix This Now →</button>';
            
            document.getElementById('takeawayText').innerHTML = takeawayHtml;
            takeawayEl.style.display = 'block';
        }
        
        // Recommendations with urgency
        if (ai.action_items && ai.action_items.length > 0) {
            const recsEl = document.getElementById('aiRecommendations');
            let recsHtml = '';
            
            ai.action_items.forEach((item, index) => {
                const urgencyColor = index === 0 ? '#EF4444' : index === 1 ? '#F97316' : '#F59E0B';
                recsHtml += '<div style="background:#F9FAFB;border:1px solid ' + urgencyColor + ';padding:15px;border-radius:8px;">';
                recsHtml += '<div style="display:flex;align-items:start;gap:12px;">';
                recsHtml += '<div style="font-size:24px;color:' + urgencyColor + ';">' + (index === 0 ? '🚨' : index === 1 ? '⚠️' : '💡') + '</div>';
                recsHtml += '<div style="flex:1;">';
                recsHtml += '<div style="font-weight:700;margin-bottom:6px;color:' + urgencyColor + ';">Priority ' + (index + 1) + ': ' + item.task + '</div>';
                recsHtml += '<div style="font-size:13px;color:#4B5563;line-height:1.5;">' + item.description + '</div>';
                if (item.impact) {
                    recsHtml += '<div style="font-size:12px;color:#F97316;margin-top:6px;">💰 Impact: ' + item.impact + '</div>';
                }
                recsHtml += '</div>';
                recsHtml += '</div>';
                recsHtml += '</div>';
            });
            
            document.getElementById('recommendationsGrid').innerHTML = recsHtml;
            recsEl.style.display = 'block';
        }
        
        // Growth opportunities
        if (ai.optimization_insights) {
            const growthEl = document.getElementById('aiGrowth');
            let growthHtml = '<div style="padding:10px;">';
            growthHtml += '<p style="margin-bottom:12px;font-size:15px;line-height:1.6;color:#4B5563;">' + ai.optimization_insights.why_critical + '</p>';
            growthHtml += '<div style="background:linear-gradient(135deg,#FFF7ED,#FFEDD5);padding:15px;border-radius:8px;border:2px solid #F97316;">';
            growthHtml += '<div style="font-size:18px;color:#F97316;font-weight:700;margin-bottom:8px;">🚀 Your Next Steps:</div>';
            growthHtml += '<div style="font-size:14px;line-height:1.6;color:#92400E;">' + ai.optimization_insights.solution_approach + '</div>';
            growthHtml += '</div>';
            growthHtml += '</div>';
            
            document.getElementById('growthContent').innerHTML = growthHtml;
            growthEl.style.display = 'block';
        }
    }
    
    // Update awards with gamification
    function ytaUpdateAwards(cd) {
        const awardsEl = document.getElementById('channelAwards');
        if (!awardsEl) return;
        
        const subs = cd.subscriberCount || 0;
        const views = cd.viewCount || 0;
        const videos = cd.videoCount || 0;
        
        let awards = [];
        
        // Subscriber milestones
        if (subs >= 1000000) {
            awards.push({ icon: '💎', title: 'Diamond Creator', desc: '1M+ Subscribers' });
        } else if (subs >= 100000) {
            awards.push({ icon: '🥇', title: 'Gold Creator', desc: '100K+ Subscribers' });
        } else if (subs >= 10000) {
            awards.push({ icon: '🥈', title: 'Silver Creator', desc: '10K+ Subscribers' });
        } else if (subs >= 1000) {
            awards.push({ icon: '🥉', title: 'Bronze Creator', desc: '1K+ Subscribers' });
        }
        
        // View milestones
        if (views >= 1000000000) {
            awards.push({ icon: '👑', title: 'Billion View Club', desc: '1B+ Total Views' });
        } else if (views >= 100000000) {
            awards.push({ icon: '🌟', title: 'Mega Viewer', desc: '100M+ Total Views' });
        } else if (views >= 10000000) {
            awards.push({ icon: '⭐', title: 'Super Viewer', desc: '10M+ Total Views' });
        } else if (views >= 1000000) {
            awards.push({ icon: '✨', title: 'Rising Star', desc: '1M+ Total Views' });
        }
        
        // Engagement awards
        const engRate = cd.weighted_averages?.['Engagement (%)'] || 0;
        if (engRate >= 10) {
            awards.push({ icon: '🔥', title: 'Engagement Master', desc: '10%+ Engagement Rate' });
        } else if (engRate >= 5) {
            awards.push({ icon: '💯', title: 'High Engagement', desc: '5%+ Engagement Rate' });
        }
        
        // Content creator awards
        if (videos >= 1000) {
            awards.push({ icon: '🎬', title: 'Content Machine', desc: '1000+ Videos' });
        } else if (videos >= 500) {
            awards.push({ icon: '📹', title: 'Prolific Creator', desc: '500+ Videos' });
        } else if (videos >= 100) {
            awards.push({ icon: '🎥', title: 'Active Creator', desc: '100+ Videos' });
        }
        
        let html = '';
        awards.forEach(award => {
            html += '<div style="background:rgba(255,215,0,0.1);border:1px solid rgba(255,215,0,0.3);padding:10px 15px;border-radius:20px;display:flex;align-items:center;gap:8px;transition:all 0.3s;cursor:help;" title="' + award.desc + '">';
            html += '<span style="font-size:24px;">' + award.icon + '</span>';
            html += '<div>';
            html += '<div style="font-weight:600;font-size:12px;color:#1a1a1a;">' + award.title + '</div>';
            html += '<div style="font-size:10px;color:#6B7280;">' + award.desc + '</div>';
            html += '</div>';
            html += '</div>';
        });
        
        if (awards.length === 0) {
            html = '<div style="text-align:center;color:#6B7280;font-size:14px;">Keep growing to unlock achievements!</div>';
        }
        
        awardsEl.innerHTML = html;
    }
    
    // Proximity-based hover effects for CTAs - simplified
    function initProximityHover() {
        const proximityElements = [
            { selector: '#floatingCTA', threshold: 100, maxScale: 1.2 }
        ];
        
        let mouseX = 0, mouseY = 0;
        
        document.addEventListener('mousemove', (e) => {
            mouseX = e.clientX;
            mouseY = e.clientY;
            
            proximityElements.forEach(item => {
                const el = document.querySelector(item.selector);
                if (!el || !el.offsetParent) return;
                
                const rect = el.getBoundingClientRect();
                const centerX = rect.left + rect.width / 2;
                const centerY = rect.top + rect.height / 2;
                
                const distance = Math.sqrt(
                    Math.pow(mouseX - centerX, 2) + 
                    Math.pow(mouseY - centerY, 2)
                );
                
                if (distance < item.threshold) {
                    const scale = 1 + (item.maxScale - 1) * (1 - distance / item.threshold);
                    el.style.transform = `scale(${scale})`;
                    
                    // Add glow effect on close proximity
                    if (distance < item.threshold / 2) {
                        el.style.boxShadow = '0 15px 40px rgba(249, 115, 22, 0.3)';
                    }
                } else {
                    el.style.transform = 'scale(1)';
                    el.style.boxShadow = '';
                }
            });
        });
        
        // Apply hover effects to all primary buttons
        document.querySelectorAll('.yta-btn-primary').forEach(btn => {
            btn.addEventListener('mouseenter', function() {
                this.style.transform = 'scale(1.05) translateY(-2px)';
            });
            
            btn.addEventListener('mouseleave', function() {
                this.style.transform = 'scale(1)';
            });
        });
    }
    
    // Initialize on page load with enhanced onboarding
    window.addEventListener('DOMContentLoaded', function() {
        updateStreak();
        startCountdownTimer();
        
        // Warm up backend immediately to prevent cold start
        setTimeout(warmupBackend, YTA_CONFIG.warmupDelay);
        
        // Initialize proximity hover after DOM is ready
        setTimeout(() => {
            initProximityHover();
        }, 100);
        
        // Focus input and start onboarding for new users
        const inputField = document.getElementById('ytaHandle');
        if (inputField) {
            inputField.focus();
        }
        
        // Show initial social proof after delay
        setTimeout(rotateSocialProof, 5000);
        
        // Enhanced keyboard shortcuts
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Enter' && document.activeElement.id === 'ytaHandle') {
                ytaRun();
            }
            // ESC to close modals
            if (e.key === 'Escape') {
                closeScenarioModal();
                document.getElementById('achievementModal').style.display = 'none';
                document.getElementById('pwaPrompt').classList.remove('show');
            }
        });
        
        // Auto-save handle with better UX
        const savedHandle = localStorage.getItem('yta_lastHandle');
        if (savedHandle && inputField) {
            inputField.value = savedHandle;
            inputField.setAttribute('placeholder', `Last analyzed: ${savedHandle}`);
        }
        
        const handleInput = document.getElementById('ytaHandle');
        if (handleInput) {
            handleInput.addEventListener('input', function(e) {
                if (e.target.value) {
                    localStorage.setItem('yta_lastHandle', e.target.value);
                }
                
                // Real-time validation
                const value = e.target.value.trim();
                if (value && !value.startsWith('@') && !value.includes('youtube.com')) {
                    e.target.style.borderColor = '#F97316';
                    e.target.setAttribute('placeholder', 'Try: @channelname or youtube.com/@channel');
                } else {
                    e.target.style.borderColor = '#E5E7EB';
                }
            });
            
            // Enhanced input experience
            handleInput.addEventListener('focus', function() {
                this.style.transform = 'scale(1.02)';
                this.style.borderColor = '#3B82F6';
            });
            
            handleInput.addEventListener('blur', function() {
                this.style.transform = 'scale(1)';
                if (!this.value) {
                    this.style.borderColor = '#E5E7EB';
                }
            });
        }
        
        // Performance monitoring
        if ('performance' in window) {
            window.addEventListener('load', () => {
                const loadTime = performance.timing.loadEventEnd - performance.timing.navigationStart;
                trackAction('page_load', { loadTime });
                
                // Show performance-based messages
                if (loadTime > 3000) {
                    console.log('Slow load detected, prioritizing key elements');
                }
            });
        }
        
        // Enhanced mobile detection and optimization
        if (window.innerWidth <= 768) {
            // Mobile-specific initialization
            document.body.classList.add('mobile-optimized');
            
            // Ensure touch-friendly interactions
            document.querySelectorAll('button, .video-item, .trust-indicator').forEach(el => {
                el.style.minHeight = '44px';
                el.style.minWidth = '44px';
            });
            
            // Show mobile sticky CTA earlier
            setTimeout(() => {
                document.querySelector('.mobile-sticky-cta').classList.add('show');
            }, 3000);
        }
        
        // Accessibility improvements
        document.querySelectorAll('button').forEach(button => {
            if (!button.getAttribute('aria-label') && button.textContent.trim()) {
                button.setAttribute('aria-label', button.textContent.trim());
            }
        });
    });
    </script>
</body>
</html>
