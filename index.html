<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YouTube Channel Analytics - Unlock Your Revenue Potential | PrimeTime Media</title>
    <meta name="theme-color" content="#1E40AF">
    <style>
        /* Reset and Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: #ffffff;
            color: #1a1a1a;
            font-family: Inter, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            font-size: 16px;
        }

        /* Navigation Bar Styles */
        .ptn-navbar-wrapper * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        .ptn-navbar-wrapper {
            font-family: Inter, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            position: sticky;
            top: 0;
            z-index: 1000;
            background: #ffffff;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            font-size: 16px;
        }

        .ptn-navbar {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            min-height: 70px;
            gap: 20px;
        }

        /* Logo Section */
        .ptn-logo-section {
            display: flex;
            align-items: center;
            flex-shrink: 0;
            min-width: 180px;
            z-index: 1002;
        }

        .ptn-logo {
            display: flex;
            align-items: center;
            text-decoration: none;
            font-size: 24px;
            font-weight: bold;
            color: #1E40AF;
            transition: opacity 0.3s ease;
            min-width: 0;
        }

        .ptn-logo:hover {
            opacity: 0.8;
        }

        .ptn-logo img {
            height: 40px;
            width: auto;
            flex-shrink: 0;
        }

        .ptn-logo-text {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 24px;
            font-weight: 900;
            white-space: nowrap;
            overflow: visible;
            text-overflow: clip;
            flex-shrink: 0;
        }

        .ptn-logo-prime {
            color: #1E40AF;
        }

        .ptn-logo-media {
            color: #F97316;
        }

        /* Navigation Menu */
        .ptn-nav-menu {
            display: flex;
            align-items: center;
            list-style: none;
            flex: 1;
            justify-content: center;
            max-width: 600px;
            margin: 0 auto;
            gap: clamp(8px, 2vw, 20px);
            position: relative;
            z-index: 1001;
        }

        .ptn-nav-item {
            position: relative;
            flex-shrink: 0;
        }

        .ptn-nav-link {
            color: #4B5563;
            text-decoration: none;
            font-weight: 500;
            transition: color 0.3s ease;
            padding: 8px 6px;
            display: flex;
            align-items: center;
            gap: 4px;
            white-space: nowrap;
            border-radius: 6px;
            font-size: 14px;
        }

        .ptn-nav-link:hover {
            color: #1E40AF;
            background-color: rgba(30, 64, 175, 0.05);
        }

        .ptn-nav-link.active {
            color: #1E40AF;
        }

        /* Dropdown Arrow */
        .ptn-dropdown-arrow {
            font-size: 10px;
            transition: transform 0.3s ease;
        }

        .ptn-nav-item:hover .ptn-dropdown-arrow {
            transform: rotate(180deg);
        }

        /* Dropdown Menu */
        .ptn-dropdown {
            position: absolute;
            top: 100%;
            left: 50%;
            transform: translateX(-50%);
            background: white;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            border: 1px solid #E5E7EB;
            padding: 8px;
            min-width: 200px;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            margin-top: 10px;
            z-index: 1003;
        }

        .ptn-nav-item:hover .ptn-dropdown {
            opacity: 1;
            visibility: visible;
            margin-top: 5px;
        }

        .ptn-dropdown-item {
            display: block;
            padding: 12px 16px;
            color: #4B5563;
            text-decoration: none;
            font-size: 14px;
            border-radius: 8px;
            transition: all 0.2s ease;
        }

        .ptn-dropdown-item:hover {
            background: #F9FAFB;
            color: #1E40AF;
        }

        /* Right Section */
        .ptn-nav-right {
            display: flex;
            align-items: center;
            gap: 16px;
            flex-shrink: 0;
            min-width: 120px;
            z-index: 1002;
        }

        /* Auth Buttons */
        .ptn-auth-buttons {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .ptn-btn-primary {
            background: #F97316;
            color: white;
            padding: 12px 24px;
            font-size: 15px;
            font-weight: 600;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 6px rgba(249, 115, 22, 0.25);
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            border: none;
            white-space: nowrap;
        }

        .ptn-btn-primary:hover {
            background: #EA580C;
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(249, 115, 22, 0.35);
        }

        /* Mobile Menu Toggle */
        .ptn-mobile-toggle {
            display: none;
            background: none;
            border: none;
            cursor: pointer;
            padding: 8px;
            flex-shrink: 0;
        }

        .ptn-hamburger {
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        .ptn-hamburger span {
            width: 24px;
            height: 2px;
            background: #4B5563;
            border-radius: 2px;
            transition: all 0.3s ease;
        }

        .ptn-mobile-toggle.active .ptn-hamburger span:nth-child(1) {
            transform: rotate(45deg) translate(5px, 5px);
        }

        .ptn-mobile-toggle.active .ptn-hamburger span:nth-child(2) {
            opacity: 0;
        }

        .ptn-mobile-toggle.active .ptn-hamburger span:nth-child(3) {
            transform: rotate(-45deg) translate(7px, -6px);
        }

        /* Mobile Menu */
        .ptn-mobile-menu {
            display: none;
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: white;
            border-bottom: 1px solid #E5E7EB;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            padding: 24px;
            max-height: calc(100vh - 80px);
            overflow-y: auto;
        }

        .ptn-mobile-menu.active {
            display: block;
        }

        .ptn-mobile-nav {
            list-style: none;
            margin-bottom: 24px;
        }

        .ptn-mobile-nav-item {
            border-bottom: 1px solid #F3F4F6;
        }

        .ptn-mobile-nav-link {
            display: block;
            padding: 16px 0;
            color: #4B5563;
            text-decoration: none;
            font-size: 16px;
            font-weight: 500;
            transition: color 0.3s ease;
        }

        .ptn-mobile-nav-link:hover {
            color: #1E40AF;
        }

        .ptn-mobile-dropdown {
            padding-left: 20px;
            margin-top: 8px;
        }

        .ptn-mobile-dropdown .ptn-dropdown-item {
            padding: 12px 0;
            font-size: 14px;
        }

        /* Enhanced Animations */
        @keyframes slideInRight {
            from { transform: translateX(100px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        @keyframes bounceIn {
            0% { transform: scale(0.3); opacity: 0; }
            50% { transform: scale(1.05); }
            70% { transform: scale(0.9); }
            100% { transform: scale(1); opacity: 1; }
        }

        @keyframes confetti {
            0% { transform: translateY(0) rotate(0deg); opacity: 1; }
            100% { transform: translateY(300px) rotate(720deg); opacity: 0; }
        }

        @keyframes dataLoad {
            0% { transform: scaleX(0); opacity: 0; }
            50% { transform: scaleX(1); opacity: 0.5; }
            100% { transform: scaleX(1); opacity: 1; }
        }

        @keyframes achievementGlow {
            0%, 100% { box-shadow: 0 0 20px rgba(16, 185, 129, 0.3); }
            50% { box-shadow: 0 0 30px rgba(16, 185, 129, 0.6); }
        }

        @keyframes urgentPulse {
            0%, 100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.4); }
            50% { transform: scale(1.05); box-shadow: 0 0 0 10px rgba(239, 68, 68, 0); }
        }

        @keyframes shimmer {
            0% { background-position: -468px 0; }
            100% { background-position: 468px 0; }
        }

        @keyframes cardHover {
            0% { transform: translateY(0) scale(1); }
            100% { transform: translateY(-8px) scale(1.02); }
        }

        @keyframes celebration {
            0% { transform: scale(1) rotate(0deg); }
            25% { transform: scale(1.1) rotate(5deg); }
            50% { transform: scale(1.2) rotate(-5deg); }
            75% { transform: scale(1.1) rotate(5deg); }
            100% { transform: scale(1) rotate(0deg); }
        }

        @keyframes criticalPulse {
            0%, 100% { 
                border-color: #EF4444;
                box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.4);
            }
            50% { 
                border-color: #DC143C;
                box-shadow: 0 0 0 15px rgba(239, 68, 68, 0);
            }
        }
        
        @keyframes lockPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }
        
        @keyframes glowPulse {
            0%, 100% { box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3); }
            50% { box-shadow: 0 8px 24px rgba(16, 185, 129, 0.6); }
        }

        .animate-slide-in {
            animation: slideInRight 0.6s ease-out;
        }

        .animate-bounce-in {
            animation: bounceIn 0.8s ease-out;
        }

        .data-loading {
            position: relative;
            overflow: hidden;
        }

        .data-loading::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(16, 185, 129, 0.1), transparent);
            animation: dataLoad 1.5s ease-in-out;
        }

        /* Enhanced Celebration Effect */
        .celebration {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            pointer-events: none;
            z-index: 9999;
        }

        .confetti-piece {
            position: absolute;
            width: 12px;
            height: 12px;
            background: #10B981;
            animation: confetti 1s ease-out forwards;
            border-radius: 2px;
        }

        /* Enhanced Tooltip System */
        .tooltip-trigger {
            position: relative;
            cursor: help;
            border-bottom: 1px dashed #6B7280;
            transition: all 0.3s ease;
        }

        .tooltip-trigger:hover {
            border-color: #10B981;
            color: #10B981;
        }

        .tooltip {
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.95);
            color: white;
            padding: 12px 16px;
            border-radius: 8px;
            font-size: 13px;
            white-space: nowrap;
            z-index: 10000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            pointer-events: none;
            margin-bottom: 8px;
            backdrop-filter: blur(10px);
        }

        .tooltip::after {
            content: '';
            position: absolute;
            top: 100%;
            left: 50%;
            transform: translateX(-50%);
            border: 6px solid transparent;
            border-top-color: rgba(0, 0, 0, 0.95);
        }

        .tooltip-trigger:hover .tooltip {
            opacity: 1;
            visibility: visible;
            transform: translateX(-50%) translateY(-4px);
        }

        /* Enhanced Blur Effect for Locked Content */
        .locked-content {
            position: relative;
            filter: blur(12px);
            pointer-events: none;
            user-select: none;
            opacity: 0.4;
            transition: all 0.3s ease;
        }

        .unlock-overlay {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(255, 255, 255, 0.98);
            padding: 40px;
            border-radius: 16px;
            text-align: center;
            z-index: 10;
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15);
            border: 3px solid #10B981;
            backdrop-filter: blur(10px);
        }

        .unlock-overlay .lock-icon {
            font-size: 56px;
            margin-bottom: 16px;
            filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.2));
            animation: lockPulse 2s ease-in-out infinite;
        }

        /* Container with Enhanced Spacing */
        .yta-container {
            background: #ffffff;
            color: #1a1a1a;
            padding: 40px 32px;
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            position: relative;
            padding-top: 40px;
            padding-bottom: 160px;
        }

        /* Enhanced Popup Management System */
        .popup-container {
            position: fixed;
            z-index: 500;
            transition: all 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            backdrop-filter: blur(10px);
        }

        .popup-container.minimized {
            transform: scale(0.9);
            opacity: 0.7;
        }

        .popup-container.hidden {
            pointer-events: none;
        }

        /* Enhanced Critical Banner */
        .critical-banner {
            position: fixed;
            top: -100px;
            left: 0;
            right: 0;
            background: linear-gradient(135deg, #DC143C 0%, #EF4444 100%);
            padding: 20px 32px;
            box-shadow: 0 6px 30px rgba(220, 20, 60, 0.4);
            color: white;
            transition: all 0.5s ease;
            z-index: 1100;
            opacity: 0;
        }

        .critical-banner.show {
            top: 0;
            opacity: 1;
        }

        .critical-banner.peek {
            top: -75px;
            opacity: 0.8;
        }

        /* Enhanced Revenue Opportunity */
        .revenue-opportunity {
            position: fixed;
            right: -380px;
            top: 50%;
            transform: translateY(-50%);
            background: linear-gradient(135deg, #FFF7ED 0%, #FFEDD5 100%);
            border: 3px solid #F97316;
            border-radius: 16px;
            padding: 32px;
            width: 320px;
            box-shadow: 0 8px 30px rgba(249, 115, 22, 0.3);
            transition: all 0.5s ease;
            z-index: 600;
        }

        .revenue-opportunity.show {
            right: 24px;
        }

        .revenue-opportunity.peek {
            right: -300px;
        }

        /* Enhanced Bottom CTA */
        .bottom-cta {
            position: fixed;
            bottom: -120px;
            left: 0;
            right: 0;
            background: linear-gradient(to top, rgba(255, 255, 255, 0.98) 90%, transparent);
            padding: 28px 32px;
            box-shadow: 0 -6px 30px rgba(0, 0, 0, 0.12);
            transition: all 0.5s ease;
            z-index: 700;
            backdrop-filter: blur(10px);
        }

        .bottom-cta.show {
            bottom: 0;
        }

        .bottom-cta.peek {
            bottom: -90px;
        }

        /* Enhanced Minimize Button */
        .minimize-btn {
            position: absolute;
            top: 12px;
            right: 12px;
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            font-size: 16px;
            cursor: pointer;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
            backdrop-filter: blur(10px);
        }

        .minimize-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: scale(1.1);
        }

        /* Enhanced Primary Button - FIXED STYLING */
        .yta-btn-primary {
            background: linear-gradient(135deg, #10B981 0%, #059669 100%);
            color: white;
            border: none;
            padding: 18px 36px;
            font-size: 16px;
            font-weight: 600;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            box-shadow: 0 4px 6px rgba(16, 185, 129, 0.25);
            transform: scale(1);
            position: relative;
            overflow: hidden;
        }

        .yta-btn-primary::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }

        .yta-btn-primary:hover {
            background: linear-gradient(135deg, #059669 0%, #047857 100%);
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 8px 25px rgba(16, 185, 129, 0.4);
        }

        .yta-btn-primary:hover::before {
            left: 100%;
        }

        .yta-btn-primary:active {
            transform: translateY(-1px) scale(1.02);
        }

        /* Enhanced Secondary Button */
        .yta-btn-secondary {
            background: #F9FAFB;
            color: #1a1a1a;
            border: 2px solid #E5E7EB;
            padding: 14px 28px;
            font-size: 14px;
            font-weight: 600;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .yta-btn-secondary:hover {
            background: #F3F4F6;
            border-color: #10B981;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(16, 185, 129, 0.15);
        }

        /* Enhanced Header Section */
        .yta-header {
            text-align: center;
            padding: 60px 32px;
            margin-bottom: 60px;
            background: linear-gradient(135deg, #EBF4FF 0%, #F0F9FF 100%);
            border-radius: 20px;
            position: relative;
            overflow: hidden;
        }

        .yta-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grain" width="100" height="100" patternUnits="userSpaceOnUse"><circle cx="25" cy="25" r="1" fill="%23ffffff" opacity="0.1"/><circle cx="75" cy="75" r="1" fill="%23ffffff" opacity="0.1"/><circle cx="50" cy="10" r="1" fill="%23ffffff" opacity="0.1"/></pattern></defs><rect width="100" height="100" fill="url(%23grain)"/></svg>');
            opacity: 0.3;
        }

        .trust-badge {
            background: linear-gradient(135deg, #10B981 0%, #059669 100%);
            color: white;
            padding: 12px 24px;
            border-radius: 24px;
            display: inline-block;
            margin-bottom: 32px;
            font-weight: 600;
            font-size: 14px;
            box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
            position: relative;
            z-index: 1;
        }

        .value-headline {
            font-size: 42px;
            font-weight: 800;
            margin-bottom: 24px;
            color: #1E40AF;
            line-height: 1.2;
            position: relative;
            z-index: 1;
        }

        .value-subtitle {
            font-size: 22px;
            color: #4B5563;
            margin-bottom: 40px;
            line-height: 1.5;
            position: relative;
            z-index: 1;
        }

        /* Enhanced Input Section */
        .yta-input-section {
            text-align: center;
            padding: 60px 32px;
            margin-bottom: 60px;
            background: linear-gradient(135deg, #F9FAFB 0%, #FFFFFF 100%);
            border-radius: 20px;
            border: 2px solid #E5E7EB;
            position: relative;
        }

        .yta-input {
            width: 100%;
            max-width: 500px;
            margin: 0 auto 32px;
            padding: 20px 28px;
            background: white;
            border: 3px solid #E5E7EB;
            border-radius: 16px;
            font-size: 18px;
            text-align: center;
            transition: all 0.3s ease;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        }

        .yta-input:focus {
            outline: none;
            border-color: #10B981;
            box-shadow: 0 0 0 6px rgba(16, 185, 129, 0.15);
            transform: scale(1.02);
        }

        /* Enhanced Loading State */
        .yta-loading {
            text-align: center;
            padding: 100px 40px;
            background: linear-gradient(135deg, #F9FAFB 0%, #FFFFFF 100%);
            border-radius: 20px;
            margin: 32px 0;
            display: none;
            position: relative;
        }

        .yta-spinner {
            width: 56px;
            height: 56px;
            border: 4px solid #E5E7EB;
            border-top-color: #10B981;
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
            margin: 0 auto 32px;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Enhanced Results Section */
        .yta-results {
            display: none;
        }

        /* Enhanced Cards */
        .yta-card {
            background: white;
            border-radius: 20px;
            padding: 48px;
            border: 2px solid #F3F4F6;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.04);
            margin-bottom: 40px;
            position: relative;
            transition: all 0.3s ease;
        }

        .yta-card:hover {
            border-color: #E5E7EB;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.08);
            transform: translateY(-2px);
        }

        /* Enhanced Channel Awards */
        #channelAwards {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 16px;
            margin: 40px 0;
            padding: 36px;
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.05) 0%, rgba(16, 185, 129, 0.05) 100%);
            border-radius: 16px;
            border: 2px solid rgba(59, 130, 246, 0.2);
        }

        /* Enhanced Health Score Circle */
        .yta-score-circle {
            width: 160px;
            height: 160px;
            border-radius: 50%;
            background: conic-gradient(var(--score-color) 0deg, var(--score-color) var(--score-deg), #E5E7EB var(--score-deg), #E5E7EB 360deg);
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 32px;
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.12);
            transition: all 0.3s ease;
        }

        .yta-score-circle:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.15);
        }

        .yta-score-inner {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background: white;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            box-shadow: inset 0 4px 8px rgba(0, 0, 0, 0.06);
        }

        /* Enhanced Performance Chart */
        #chartBars {
            display: flex;
            align-items: end;
            justify-content: center;
            gap: 32px;
            height: 160px;
            margin: 40px 0;
            padding: 0 20px;
        }

        #chartBars > div {
            width: 70px;
            background: #E5E7EB;
            border-radius: 8px 8px 0 0;
            transition: all 1s ease;
            position: relative;
            cursor: pointer;
        }

        #chartBars > div:hover {
            transform: scale(1.1);
            box-shadow: 0 -4px 20px rgba(16, 185, 129, 0.3);
        }

        /* Enhanced Social Proof */
        .social-proof-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 24px;
            margin: 40px 0;
        }

        .social-proof-card {
            background: linear-gradient(135deg, #F0FDF4 0%, #DCFCE7 100%);
            border: 3px solid #10B981;
            border-radius: 16px;
            padding: 32px;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .social-proof-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            transition: left 0.5s;
        }

        .social-proof-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 30px rgba(16, 185, 129, 0.2);
        }

        .social-proof-card:hover::before {
            left: 100%;
        }

        /* Enhanced Peer Comparison */
        .peer-comparison {
            background: linear-gradient(135deg, #F9FAFB 0%, #FFFFFF 100%);
            border: 2px solid #E5E7EB;
            border-radius: 16px;
            padding: 32px;
            margin: 24px 0;
        }

        .peer-metric {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 20px 0;
            font-size: 16px;
            padding: 12px 0;
            border-bottom: 1px solid #F3F4F6;
            transition: all 0.3s ease;
        }

        .peer-metric:hover {
            background: rgba(16, 185, 129, 0.02);
            border-radius: 8px;
            padding: 12px 16px;
            margin: 20px -16px;
        }

        .peer-metric-value {
            font-weight: 700;
            padding: 6px 16px;
            border-radius: 24px;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .peer-better {
            background: #DCFCE7;
            color: #10B981;
        }

        .peer-worse {
            background: #FEE2E2;
            color: #EF4444;
        }

        /* FIXED: Enhanced Metric Display with Responsive Number Sizing */
        .yta-metric {
            text-align: center;
            padding: 36px 20px;
            background: linear-gradient(135deg, #F9FAFB 0%, #FFFFFF 100%);
            border-radius: 16px;
            border: 2px solid #E5E7EB;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            cursor: pointer;
            overflow: hidden;
            margin-bottom: 24px;
            min-height: 150px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .yta-metric::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 4px;
            background: linear-gradient(90deg, #10B981, #059669);
            transition: left 0.5s ease;
        }

        .yta-metric:hover {
            animation: cardHover 0.3s ease forwards;
            border-color: #10B981;
            background: linear-gradient(135deg, #FFFFFF 0%, #F0F9FF 100%);
            box-shadow: 0 12px 28px rgba(16, 185, 129, 0.15);
        }

        .yta-metric:hover::before {
            left: 100%;
        }

        .yta-metric:hover .yta-metric-value {
            transform: scale(1.05);
            transition: transform 0.3s ease;
            color: #10B981;
        }

        .yta-metric-label {
            font-size: 13px;
            color: #6B7280;
            margin-bottom: 12px;
            text-transform: uppercase;
            letter-spacing: 0.8px;
            font-weight: 600;
            line-height: 1.2;
        }

        /* FIXED: Responsive Number Sizing */
        .yta-metric-value {
            color: #1E40AF;
            transition: all 0.3s ease;
            font-weight: 700;
            line-height: 1.1;
            word-break: break-all;
            overflow-wrap: break-word;
            hyphens: auto;
            margin: 8px 0;
        }

        /* Responsive font sizes based on container width and content length */
        .yta-metric-value {
            font-size: clamp(24px, 5vw, 36px);
        }

        /* Special handling for very large numbers */
        .yta-metric-value.large-number {
            font-size: clamp(20px, 4vw, 32px);
        }

        .yta-metric-value.very-large-number {
            font-size: clamp(18px, 3.5vw, 28px);
        }

        /* Special styling for the highlighted annual potential card */
        .yta-metric.featured .yta-metric-value {
            font-size: clamp(28px, 6vw, 44px);
        }

        .yta-metric.featured.large-number .yta-metric-value {
            font-size: clamp(24px, 5vw, 38px);
        }

        .yta-metric.featured.very-large-number .yta-metric-value {
            font-size: clamp(20px, 4vw, 32px);
        }

        /* Enhanced Optimization Section */
        .optimization-header {
            background: linear-gradient(135deg, #FFF7ED 0%, #FFEDD5 100%);
            border: 3px solid #F97316;
            padding: 36px;
            border-radius: 16px;
            margin-bottom: 36px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .optimization-title {
            font-size: 28px;
            font-weight: 700;
            color: #F97316;
            margin-bottom: 16px;
        }

        .optimization-subtitle {
            font-size: 18px;
            color: #92400E;
            line-height: 1.6;
        }

        /* Enhanced Data Freshness Indicator */
        .data-freshness {
            display: inline-flex;
            align-items: center;
            gap: 12px;
            background: linear-gradient(135deg, #FEF3C7 0%, #FDE68A 100%);
            color: #92400E;
            padding: 8px 16px;
            border-radius: 24px;
            font-size: 13px;
            font-weight: 600;
            margin-bottom: 24px;
            border: 2px solid #F59E0B;
            animation: urgentPulse 3s ease-in-out infinite;
        }

        /* Enhanced Progress Tracker */
        .progress-tracker {
            background: linear-gradient(135deg, #F9FAFB 0%, #FFFFFF 100%);
            border: 2px solid #E5E7EB;
            border-radius: 16px;
            padding: 32px;
            margin-bottom: 32px;
        }

        .progress-item {
            display: flex;
            align-items: center;
            gap: 16px;
            margin: 16px 0;
            padding: 12px;
            border-radius: 12px;
            transition: all 0.3s ease;
        }

        .progress-item:hover {
            background: rgba(16, 185, 129, 0.05);
        }

        .progress-circle {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: #E5E7EB;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 16px;
            transition: all 0.3s;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .progress-circle.completed {
            background: linear-gradient(135deg, #10B981 0%, #059669 100%);
            color: white;
            animation: achievementGlow 2s ease-in-out infinite;
        }

        .progress-circle.current {
            background: linear-gradient(135deg, #3B82F6 0%, #2563EB 100%);
            color: white;
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.1); opacity: 0.8; }
        }

        /* Enhanced Historical Loss Explanation */
        .loss-explanation {
            background: linear-gradient(135deg, #FEF3C7 0%, #FDE68A 100%);
            border: 3px solid #F59E0B;
            padding: 32px;
            border-radius: 16px;
            margin-bottom: 32px;
        }

        .loss-explanation h4 {
            color: #92400E;
            margin-bottom: 16px;
            font-size: 20px;
        }

        .loss-explanation p {
            color: #78350F;
            line-height: 1.6;
            font-size: 16px;
        }

        /* Enhanced Progress Bar */
        .yta-progress {
            height: 10px;
            background: #E5E7EB;
            border-radius: 6px;
            overflow: hidden;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.06);
        }

        .yta-progress-fill {
            height: 100%;
            border-radius: 6px;
            transition: width 1.5s ease;
            position: relative;
        }

        .yta-progress-poor { 
            background: linear-gradient(90deg, #EF4444 0%, #F87171 100%);
        }
        .yta-progress-good { 
            background: linear-gradient(90deg, #F97316 0%, #FB923C 100%);
        }
        .yta-progress-excellent { 
            background: linear-gradient(90deg, #10B981 0%, #34D399 100%);
        }

        /* Enhanced Content Grid */
        .content-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 32px;
            margin-bottom: 32px;
        }

        /* Enhanced Video List Item */
        .video-item {
            display: flex;
            gap: 20px;
            padding: 32px;
            background: linear-gradient(135deg, #F9FAFB 0%, #FFFFFF 100%);
            border-radius: 16px;
            margin-bottom: 20px;
            transition: all 0.3s ease;
            border: 2px solid #E5E7EB;
            position: relative;
        }

        .video-item:hover {
            background: linear-gradient(135deg, #FFFFFF 0%, #F0F9FF 100%);
            transform: translateX(8px);
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.08);
            border-color: #10B981;
        }

        .video-thumbnail {
            width: 140px;
            height: 78px;
            background: #E5E7EB;
            border-radius: 12px;
            object-fit: cover;
            flex-shrink: 0;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .video-thumbnail.error {
            display: none !important;
        }

        /* Enhanced Optimization Indicator */
        .opt-indicator {
            position: absolute;
            top: 16px;
            right: 16px;
            display: inline-block;
            width: 40px;
            height: 40px;
            line-height: 40px;
            text-align: center;
            font-weight: bold;
            font-size: 20px;
            border-radius: 50%;
            cursor: help;
            transition: all 0.3s ease;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .opt-indicator.optimized {
            color: #10B981;
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.1) 0%, rgba(5, 150, 105, 0.1) 100%);
            border: 3px solid #10B981;
        }

        .opt-indicator.not-optimized {
            color: #EF4444;
            background: linear-gradient(135deg, rgba(239, 68, 68, 0.1) 0%, rgba(220, 38, 38, 0.1) 100%);
            border: 3px solid #EF4444;
            animation: urgentPulse 2s ease-in-out infinite;
        }

        /* Enhanced Daily Loss Counter */
        .daily-loss-counter {
            background: linear-gradient(135deg, #FEE2E2 0%, #FECACA 100%);
            border: 3px solid #EF4444;
            padding: 36px;
            border-radius: 16px;
            text-align: center;
            margin: 32px 0;
            animation: criticalPulse 3s ease-in-out infinite;
        }

        /* FIXED: Responsive loss amount sizing */
        .loss-amount {
            font-weight: 800;
            color: #DC143C;
            margin: 12px 0;
            text-shadow: 0 2px 4px rgba(220, 20, 60, 0.2);
            line-height: 1.1;
            word-break: break-all;
            overflow-wrap: break-word;
        }

        .loss-amount {
            font-size: clamp(28px, 7vw, 42px);
        }

        .loss-amount.large-number {
            font-size: clamp(24px, 6vw, 36px);
        }

        .loss-amount.very-large-number {
            font-size: clamp(20px, 5vw, 32px);
        }

        .loss-label {
            font-size: 16px;
            color: #991B1B;
            font-weight: 600;
        }

        /* Enhanced AI Section */
        .ai-section {
            background: linear-gradient(135deg, #F9FAFB 0%, #FFFFFF 100%);
            border: 2px solid #E5E7EB;
            padding: 40px;
            border-radius: 16px;
            margin-bottom: 32px;
        }

        .ai-section.unlocked {
            background: linear-gradient(135deg, #F0FDF4 0%, #DCFCE7 100%);
            border: 3px solid #10B981;
        }

        .ai-recommendation {
            display: flex;
            align-items: flex-start;
            gap: 20px;
            padding: 32px;
            background: white;
            border-radius: 12px;
            margin-bottom: 24px;
            border: 2px solid #E5E7EB;
            transition: all 0.3s ease;
        }

        .ai-recommendation:hover {
            border-color: #10B981;
            box-shadow: 0 8px 24px rgba(16, 185, 129, 0.1);
            transform: translateY(-2px);
        }

        .ai-icon {
            font-size: 36px;
            flex-shrink: 0;
        }

        .ai-content h4 {
            margin: 0 0 12px 0;
            color: #1a1a1a;
            font-size: 20px;
        }

        .ai-content p {
            margin: 0;
            color: #6B7280;
            line-height: 1.6;
            font-size: 16px;
        }

        /* Enhanced Exit Intent Popup */
        .exit-intent-popup {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.85);
            display: none;
            z-index: 9000;
            animation: fadeIn 0.3s ease;
            backdrop-filter: blur(10px);
        }

        .exit-intent-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 60px;
            border-radius: 24px;
            max-width: 560px;
            text-align: center;
            box-shadow: 0 25px 80px rgba(0, 0, 0, 0.4);
            animation: slideInUp 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes slideInUp {
            from { transform: translate(-50%, -30%); opacity: 0; }
            to { transform: translate(-50%, -50%); opacity: 1; }
        }

        /* Enhanced Usage Tracker */
        .usage-tracker {
            position: fixed;
            top: 100px;
            right: 24px;
            background: white;
            border: 3px solid #E5E7EB;
            border-radius: 16px;
            padding: 20px 24px;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.12);
            z-index: 800;
            transition: all 0.3s ease;
        }

        .usage-tracker:hover {
            transform: scale(1.05);
            border-color: #F97316;
            box-shadow: 0 12px 32px rgba(249, 115, 22, 0.2);
        }

        .usage-progress {
            width: 220px;
            height: 10px;
            background: #E5E7EB;
            border-radius: 6px;
            overflow: hidden;
            margin: 12px 0;
        }

        .usage-progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #10B981 0%, #059669 100%);
            transition: width 0.8s ease;
        }

        /* Enhanced Achievement System */
        .achievement-popup {
            position: fixed;
            top: 24px;
            right: -450px;
            background: linear-gradient(135deg, #FFF7ED 0%, #FFEDD5 100%);
            border: 3px solid #F97316;
            border-radius: 16px;
            padding: 24px 32px;
            box-shadow: 0 12px 40px rgba(249, 115, 22, 0.3);
            z-index: 1000;
            transition: right 0.5s ease;
            max-width: 400px;
            backdrop-filter: blur(10px);
        }

        .achievement-popup.show {
            right: 24px;
        }

        .achievement-badge {
            display: inline-flex;
            align-items: center;
            gap: 12px;
            background: linear-gradient(135deg, #10B981 0%, #059669 100%);
            color: white;
            padding: 10px 20px;
            border-radius: 24px;
            font-size: 14px;
            font-weight: 600;
            box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
            margin: 6px;
            animation: bounceIn 0.6s ease;
        }

        /* Enhanced Scroll-triggered CTA */
        .scroll-cta {
            position: fixed;
            bottom: -120px;
            right: 24px;
            background: linear-gradient(135deg, #10B981 0%, #059669 100%);
            color: white;
            padding: 20px 32px;
            border-radius: 30px;
            box-shadow: 0 12px 40px rgba(16, 185, 129, 0.4);
            transition: all 0.5s ease;
            z-index: 700;
            cursor: pointer;
        }

        .scroll-cta.show {
            bottom: 120px;
        }

        .scroll-cta:hover {
            transform: scale(1.1);
            box-shadow: 0 16px 50px rgba(16, 185, 129, 0.5);
        }

        /* Enhanced Time-based Prompt */
        .time-prompt {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0);
            background: white;
            border: 4px solid #F97316;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.2);
            z-index: 900;
            transition: all 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            max-width: 440px;
            text-align: center;
            backdrop-filter: blur(10px);
        }

        .time-prompt.show {
            transform: translate(-50%, -50%) scale(1);
        }

        /* Enhanced Streak Tracker */
        .streak-tracker {
            background: linear-gradient(135deg, #EBF4FF 0%, #F0F9FF 100%);
            border: 3px solid #3B82F6;
            border-radius: 16px;
            padding: 32px;
            margin-bottom: 32px;
            text-align: center;
        }

        .streak-days {
            display: flex;
            justify-content: center;
            gap: 12px;
            margin-top: 20px;
        }

        .streak-day {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            background: #E5E7EB;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 16px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .streak-day.active {
            background: linear-gradient(135deg, #10B981 0%, #059669 100%);
            color: white;
            box-shadow: 0 6px 20px rgba(16, 185, 129, 0.4);
            animation: achievementGlow 2s ease-in-out infinite;
        }

        .streak-day.current {
            background: linear-gradient(135deg, #F97316 0%, #EA580C 100%);
            color: white;
            animation: pulse 2s ease-in-out infinite;
        }

        /* Enhanced AI Section Locked */
        .ai-locked {
            background: linear-gradient(135deg, #F9FAFB 0%, #FFFFFF 100%);
            border: 3px dashed #E5E7EB;
            padding: 60px;
            border-radius: 16px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        /* Enhanced Real-time Data Indicators */
        .real-time-indicator {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            background: linear-gradient(135deg, #DCFCE7 0%, #BBF7D0 100%);
            color: #047857;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 11px;
            font-weight: 600;
            border: 2px solid #10B981;
            animation: glowPulse 2s ease-in-out infinite;
        }

        .delayed-data-indicator {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            background: linear-gradient(135deg, #FEF3C7 0%, #FDE68A 100%);
            color: #92400E;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 11px;
            font-weight: 600;
            border: 2px solid #F59E0B;
        }

        /* Enhanced Gamification Elements */
        .level-indicator {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            background: linear-gradient(135deg, #EBF4FF 0%, #DBEAFE 100%);
            color: #1E40AF;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: 600;
            border: 2px solid #3B82F6;
            margin-bottom: 16px;
        }

        .xp-bar {
            width: 100%;
            height: 8px;
            background: #E5E7EB;
            border-radius: 4px;
            overflow: hidden;
            margin: 8px 0;
        }

        .xp-fill {
            height: 100%;
            background: linear-gradient(90deg, #3B82F6 0%, #1E40AF 100%);
            transition: width 1s ease;
        }

        /* Auto-analyzing specific styles */
        .auto-analyzing-notice {
            background: linear-gradient(135deg, #EBF4FF 0%, #DBEAFE 100%);
            border: 3px solid #3B82F6;
            padding: 24px;
            border-radius: 16px;
            text-align: center;
            margin-bottom: 32px;
            animation: pulse 2s ease-in-out infinite;
        }

        /* FIXED: Mobile Responsive Enhancements for Numbers */
        @media (max-width: 1100px) {
            .ptn-nav-menu {
                display: none;
            }
            
            .ptn-mobile-toggle {
                display: block;
            }
        }

        @media (max-width: 768px) {
            .yta-container {
                padding: 24px 20px;
                padding-top: 20px;
                padding-bottom: 120px;
            }
            
            /* Hide all popups on mobile to prevent covering content */
            .popup-container {
                display: none !important;
            }
            
            .content-grid {
                grid-template-columns: 1fr;
                gap: 20px;
            }

            /* FIXED: Better mobile number handling */
            .yta-metric {
                padding: 28px 16px;
                min-height: 130px;
            }
            
            .yta-metric-value {
                font-size: clamp(20px, 6vw, 32px) !important;
                line-height: 1.1;
                word-break: break-all;
                overflow-wrap: break-word;
            }
            
            .yta-metric.featured .yta-metric-value {
                font-size: clamp(24px, 7vw, 36px) !important;
            }
            
            .loss-amount {
                font-size: clamp(24px, 8vw, 36px) !important;
                line-height: 1.1;
            }

            .video-thumbnail {
                width: 100px;
                height: 56px;
            }
            
            .yta-card {
                padding: 32px 24px;
            }
            
            .yta-header {
                padding: 40px 24px;
            }
            
            .value-headline {
                font-size: 32px;
            }
            
            .value-subtitle {
                font-size: 18px;
            }
            
            .ai-recommendation {
                flex-direction: column;
                text-align: center;
                padding: 24px;
            }
            
            .progress-tracker {
                padding: 24px;
            }
            
            .usage-tracker {
                display: none !important;
            }
            
            .achievement-popup {
                display: none !important;
            }
            
            .streak-days {
                gap: 8px;
            }
            
            .streak-day {
                width: 40px;
                height: 40px;
                font-size: 14px;
            }
            
            .optimization-header {
                padding: 28px 20px;
            }
            
            .optimization-title {
                font-size: 24px;
            }
            
            .bottom-cta {
                display: none !important;
            }
            
            /* Make sure input section is visible on mobile */
            .yta-input-section {
                padding: 40px 20px;
            }
            
            .yta-input {
                font-size: 16px;
                padding: 16px 20px;
            }
            
            /* Ensure mobile can see results */
            .exit-intent-popup {
                display: none !important;
            }
            
            .time-prompt {
                display: none !important;
            }
            
            .scroll-cta {
                display: none !important;
            }

            .auto-analyzing-notice {
                padding: 20px;
                margin-bottom: 24px;
            }
        }

        /* Additional responsive breakpoints for better number handling */
        @media (max-width: 480px) {
            .yta-metric-value {
                font-size: clamp(18px, 7vw, 28px) !important;
            }
            
            .yta-metric.featured .yta-metric-value {
                font-size: clamp(20px, 8vw, 32px) !important;
            }
            
            .loss-amount {
                font-size: clamp(20px, 9vw, 32px) !important;
            }
        }

        @media (max-width: 360px) {
            .yta-metric-value {
                font-size: clamp(16px, 8vw, 24px) !important;
            }
            
            .yta-metric.featured .yta-metric-value {
                font-size: clamp(18px, 9vw, 28px) !important;
            }
            
            .loss-amount {
                font-size: clamp(18px, 10vw, 28px) !important;
            }
        }

        /* Additional Micro-interactions */
        .shimmer-effect {
            background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
            background-size: 200% 100%;
            animation: shimmer 2s infinite;
        }

        .celebration-trigger:hover {
            animation: celebration 0.6s ease;
        }

        /* Enhanced Loading States */
        .skeleton {
            background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
            background-size: 200% 100%;
            animation: shimmer 1.5s infinite;
            border-radius: 8px;
        }

        .skeleton-text {
            height: 20px;
            margin-bottom: 10px;
        }

        .skeleton-circle {
            width: 60px;
            height: 60px;
            border-radius: 50%;
        }
    </style>
</head>
<body>
    <!-- Navigation Bar -->
    <div class="ptn-navbar-wrapper">
        <nav class="ptn-navbar">
            <!-- Logo Section -->
            <div class="ptn-logo-section">
                <a href="https://primetime.media" class="ptn-logo">
                    <div class="ptn-logo-text">
                        <span class="ptn-logo-prime">PrimeTime</span>
                        <span class="ptn-logo-media">Media</span>
                    </div>
                </a>
            </div>

            <!-- Desktop Navigation -->
            <ul class="ptn-nav-menu">
                <li class="ptn-nav-item">
                    <a href="/" class="ptn-nav-link">Home</a>
                </li>
                <li class="ptn-nav-item">
                    <a href="https://dashboard.primetime.media" class="ptn-nav-link active">Revenue Calculator</a>
                </li>
                <li class="ptn-nav-item">
                    <a href="/blog" class="ptn-nav-link">Blog</a>
                </li>
                <li class="ptn-nav-item">
                    <a href="/faq1" class="ptn-nav-link">FAQ</a>
                </li>
                <li class="ptn-nav-item">
                    <a href="/pricing1" class="ptn-nav-link">Pricing</a>
                </li>
                <li class="ptn-nav-item">
                    <a href="/about-1" class="ptn-nav-link">About</a>
                </li>
                <li class="ptn-nav-item">
                    <a href="/compare1" class="ptn-nav-link">Compare Us</a>
                </li>
                <li class="ptn-nav-item">
                    <a href="/contact1" class="ptn-nav-link">Contact</a>
                </li>
                <li class="ptn-nav-item">
                    <a href="#" class="ptn-nav-link">
                        Legal
                        <span class="ptn-dropdown-arrow"></span>
                    </a>
                    <div class="ptn-dropdown">
                        <a href="/privacy-policy" class="ptn-dropdown-item">Privacy Policy</a>
                        <a href="/terms-of-use" class="ptn-dropdown-item">Terms of Use</a>
                        <a href="/terms-of-service" class="ptn-dropdown-item">Terms of Service</a>
                        <a href="/earnings-disclaimer" class="ptn-dropdown-item">Earnings Disclaimer</a>
                        <a href="/cookie-policy" class="ptn-dropdown-item">Cookie Policy</a>
                        <a href="/anti-spam" class="ptn-dropdown-item">Anti-Spam</a>
                        <a href="/security-and-data-protection" class="ptn-dropdown-item">Security & Data Policy</a>
                        <a href="/data-processing-agreement" class="ptn-dropdown-item">Data Processing Agreement</a>
                        <a href="/subprocessor-list" class="ptn-dropdown-item">Subprocessor List</a>
                    </div>
                </li>
            </ul>

            <!-- Right Section -->
            <div class="ptn-nav-right">
                <!-- Auth Buttons -->
                <div class="ptn-auth-buttons">
                    <a href="/beta-1" class="ptn-btn-primary">
                        Sign Up
                        <span style="font-size: 16px;"></span>
                    </a>
                </div>

                <!-- Mobile Menu Toggle -->
                <button class="ptn-mobile-toggle" onclick="toggleMobileMenu()">
                    <div class="ptn-hamburger">
                        <span></span>
                        <span></span>
                        <span></span>
                    </div>
                </button>
            </div>
        </nav>

        <!-- Mobile Menu -->
        <div class="ptn-mobile-menu" id="ptnMobileMenu">
            <ul class="ptn-mobile-nav">
                <li class="ptn-mobile-nav-item">
                    <a href="/" class="ptn-mobile-nav-link">Home</a>
                </li>
                <li class="ptn-mobile-nav-item">
                    <a href="https://dashboard.primetime.media" class="ptn-mobile-nav-link">Revenue Calculator</a>
                </li>
                <li class="ptn-mobile-nav-item">
                    <a href="/blog" class="ptn-mobile-nav-link">Blog</a>
                </li>
                <li class="ptn-mobile-nav-item">
                    <a href="/faq1" class="ptn-mobile-nav-link">FAQ</a>
                </li>
                <li class="ptn-mobile-nav-item">
                    <a href="/pricing1" class="ptn-mobile-nav-link">Pricing</a>
                </li>
                <li class="ptn-mobile-nav-item">
                    <a href="/about-1" class="ptn-mobile-nav-link">About</a>
                </li>
                <li class="ptn-mobile-nav-item">
                    <a href="/compare1" class="ptn-mobile-nav-link">Compare Us</a>
                </li>
                <li class="ptn-mobile-nav-item">
                    <a href="/contact1" class="ptn-mobile-nav-link">Contact</a>
                </li>
                <li class="ptn-mobile-nav-item">
                    <a href="#" class="ptn-mobile-nav-link">Legal</a>
                    <div class="ptn-mobile-dropdown">
                        <a href="/privacy-policy" class="ptn-dropdown-item">Privacy Policy</a>
                        <a href="/terms-of-use" class="ptn-dropdown-item">Terms of Use</a>
                        <a href="/terms-of-service" class="ptn-dropdown-item">Terms of Service</a>
                        <a href="/earnings-disclaimer" class="ptn-dropdown-item">Earnings Disclaimer</a>
                        <a href="/cookie-policy" class="ptn-dropdown-item">Cookie Policy</a>
                        <a href="/anti-spam" class="ptn-dropdown-item">Anti-Spam</a>
                        <a href="/security-and-data-protection" class="ptn-dropdown-item">Security & Data Policy</a>
                        <a href="/data-processing-agreement" class="ptn-dropdown-item">Data Processing Agreement</a>
                        <a href="/subprocessor-list" class="ptn-dropdown-item">Subprocessor List</a>
                    </div>
                </li>
            </ul>
            
            <div style="display: flex; flex-direction: column; gap: 12px;">
                <a href="/beta-1" class="ptn-btn-primary" style="width: 100%; justify-content: center;">
                    Sign Up
                    <span style="font-size: 16px;"></span>
                </a>
            </div>
        </div>
    </div>

    <div class="yta-container">
        <!-- Enhanced Critical Revenue Alert Banner -->
        <div class="popup-container critical-banner" id="criticalBanner">
            <button class="minimize-btn" onclick="minimizePopup('criticalBanner')"></button>
            <div style="max-width: 1200px; margin: 0 auto; display: flex; align-items: center; justify-content: space-between; gap: 24px; flex-wrap: wrap;">
                <div style="flex: 1; min-width: 280px;">
                    <div style="font-size: 14px; font-weight: 600; opacity: 0.95; margin-bottom: 6px;">
                         CRITICAL: DAILY REVENUE LOSS DETECTED
                    </div>
                    <div style="font-size: 32px; font-weight: 800; text-shadow: 0 2px 4px rgba(0,0,0,0.2);">
                        You're losing <span id="criticalLostRevenue">$0</span>/day
                    </div>
                    <div style="font-size: 14px; opacity: 0.9;">
                        Every unoptimized day = lost revenue opportunity
                    </div>
                    <div class="real-time-indicator" style="margin-top: 12px;">
                        <span style="width: 8px; height: 8px; background: #10B981; border-radius: 50%; animation: pulse 2s infinite;"></span>
                        LIVE: Revenue decreasing by the hour
                    </div>
                </div>
                <button class="yta-btn-primary" onclick="window.open('https://www.primetime.media/beta-1', '_blank')" style="background: rgba(255,255,255,0.2); backdrop-filter: blur(10px); border: 2px solid white; box-shadow: 0 4px 6px rgba(255, 255, 255, 0.25); font-size: 18px;">
                     Stop Losing Money Now 
                </button>
            </div>
        </div>

        <!-- Enhanced Revenue Opportunity Sidebar -->
        <div class="popup-container revenue-opportunity" id="revenueOpportunity">
            <button class="minimize-btn" onclick="minimizePopup('revenueOpportunity')" style="color: #F97316;"></button>
            <div style="text-align: center;">
                <div style="font-size: 24px; margin-bottom: 20px;"></div>
                <div style="font-size: 18px; color: #EA580C; font-weight: 600; margin-bottom: 12px;">
                    Your Revenue Potential
                </div>
                <div style="font-size: 40px; font-weight: 800; color: #F97316; margin-bottom: 16px; word-break: break-all; line-height: 1.1;" id="potentialRevenue">
                    $0
                </div>
                <div class="real-time-indicator" style="margin-bottom: 16px; justify-content: center;">
                    <span style="width: 8px; height: 8px; background: #10B981; border-radius: 50%; animation: pulse 2s infinite;"></span>
                    Updated in real-time
                </div>
                <div style="font-size: 14px; color: #92400E; line-height: 1.5; margin-bottom: 24px;">
                    Available through channel optimization. Start earning this revenue immediately.
                </div>
                <button class="yta-btn-primary" style="width: 100%; font-size: 16px;" onclick="window.open('https://www.primetime.media/beta-1', '_blank')">
                     Unlock My Revenue 
                </button>
                <div style="font-size: 12px; color: #10B981; margin-top: 16px;">
                     Start earning instantly<br>
                     We only profit when you do<br>
                     340% average revenue increase
                </div>
            </div>
        </div>

        <!-- Enhanced Bottom CTA -->
        <div class="popup-container bottom-cta" id="bottomCTA">
            <button class="minimize-btn" onclick="minimizePopup('bottomCTA')" style="color: #6B7280;"></button>
            <div style="max-width: 1200px; margin: 0 auto; display: flex; align-items: center; justify-content: space-between; gap: 24px; flex-wrap: wrap;">
                <div style="display: flex; align-items: center; gap: 20px;">
                    <span style="font-size: 28px;"></span>
                    <div>
                        <div style="font-size: 18px; font-weight: 700; color: #F97316;">
                            Every day without optimization = <span id="dailyLoss" style="word-break: break-all;">$0</span> lost
                        </div>
                        <div style="font-size: 14px; color: #6B7280;">
                            Join creators earning 340% more with optimization
                        </div>
                        <div class="delayed-data-indicator" style="margin-top: 8px;">
                             Your current data is 24 hours old
                        </div>
                    </div>
                </div>
                <button class="yta-btn-primary" onclick="window.open('https://www.primetime.media/beta-1', '_blank')" style="font-size: 18px;">
                     Start Optimizing Now 
                </button>
            </div>
        </div>

        <!-- Enhanced Exit Intent Popup -->
        <div class="exit-intent-popup" id="exitIntentPopup">
            <div class="exit-intent-content">
                <div style="font-size: 56px; margin-bottom: 24px;"></div>
                <h2 style="color: #DC143C; margin-bottom: 20px; font-size: 32px;">
                    Wait! Your Revenue Analysis is Ready
                </h2>
                <p style="color: #6B7280; margin-bottom: 28px; font-size: 18px; line-height: 1.5;">
                    Don't leave without seeing how much revenue you're losing! We've identified 
                    <strong style="color: #F97316;">$<span class="exit-revenue">0</span>/month</strong> 
                    in optimization opportunities.
                </p>
                <div class="level-indicator" style="justify-content: center; margin-bottom: 24px;">
                    <span></span>
                    Level 1 Analysis Complete
                </div>
                <button class="yta-btn-primary" style="font-size: 20px; padding: 20px 40px; width: 100%;" onclick="closeExitIntent()">
                     Show Me My Revenue Potential
                </button>
                <button onclick="closeExitIntent()" style="background: none; border: none; color: #6B7280; margin-top: 16px; cursor: pointer; text-decoration: underline;">
                    No thanks, I'll leave money on the table
                </button>
            </div>
        </div>

        <!-- Enhanced Usage Tracker -->
        <div class="usage-tracker" id="usageTracker" style="display: none;">
            <div style="font-size: 13px; color: #6B7280; font-weight: 600; text-transform: uppercase;">
                Free Analyses Remaining
            </div>
            <div style="font-size: 22px; font-weight: 700; color: #1a1a1a; margin: 6px 0;">
                <span id="usageCount">2</span> of 5
            </div>
            <div class="usage-progress">
                <div class="usage-progress-fill" id="usageProgressFill" style="width: 60%;"></div>
            </div>
            <div style="font-size: 11px; color: #F97316; margin-top: 12px; font-weight: 600;">
                Resets in 29 days
            </div>
            <div class="level-indicator" style="margin-top: 12px; font-size: 12px; padding: 6px 12px;">
                <span></span>
                Analyst Level: Beginner
            </div>
        </div>

        <!-- Enhanced Achievement Popup -->
        <div class="achievement-popup" id="achievementPopup">
            <div style="display: flex; align-items: center; gap: 16px; margin-bottom: 16px;">
                <div style="font-size: 36px;"></div>
                <div>
                    <div style="font-weight: 700; font-size: 18px; color: #1a1a1a;">Achievement Unlocked!</div>
                    <div style="font-size: 14px; color: #6B7280;" id="achievementText">First Analysis Complete</div>
                </div>
            </div>
            <div style="margin: 16px 0;">
                <div class="xp-bar">
                    <div class="xp-fill" style="width: 25%;"></div>
                </div>
                <div style="font-size: 12px; color: #6B7280; text-align: center;">+50 XP  Next level: 200 XP</div>
            </div>
            <div id="achievementBadges" style="margin-top: 16px;">
                <!-- Badges will be added dynamically -->
            </div>
        </div>

        <!-- Enhanced Scroll-triggered CTA -->
        <div class="scroll-cta" id="scrollCTA" onclick="window.open('https://www.primetime.media/beta-1', '_blank')">
            <div style="display: flex; align-items: center; gap: 12px;">
                <span style="font-size: 24px;"></span>
                <div>
                    <div style="font-weight: 600; font-size: 16px;">Unlock Premium Insights</div>
                    <div style="font-size: 12px; opacity: 0.9;">Real-time data + AI optimization</div>
                </div>
            </div>
        </div>

        <!-- Enhanced Time-based Prompt -->
        <div class="time-prompt" id="timePrompt">
            <div style="font-size: 36px; margin-bottom: 20px;"></div>
            <h3 style="color: #F97316; margin-bottom: 16px;">You've Been Here 2 Minutes!</h3>
            <p style="color: #6B7280; margin-bottom: 24px; line-height: 1.5;">
                Most successful creators make their decision by now. Ready to unlock your revenue potential?
            </p>
            <div class="level-indicator" style="justify-content: center; margin-bottom: 24px;">
                <span></span>
                Time-sensitive offer active
            </div>
            <button class="yta-btn-primary" style="width: 100%; margin-bottom: 16px; font-size: 18px;" onclick="window.open('https://www.primetime.media/beta-1', '_blank'); closeTimePrompt();">
                Yes, Show Me How 
            </button>
            <button onclick="closeTimePrompt()" style="background: none; border: none; color: #6B7280; cursor: pointer;">
                I need more time
            </button>
        </div>

        <!-- Auto-analyzing Notice (shows when creator parameter is present) -->
        <div class="auto-analyzing-notice" id="autoAnalyzingNotice" style="display: none;">
            <div style="font-size: 24px; margin-bottom: 16px;"></div>
            <h3 style="color: #1E40AF; margin-bottom: 12px;">Auto-Analyzing Creator</h3>
            <p style="color: #6B7280; margin: 0;">
                Automatically analyzing <strong id="autoCreatorName"></strong> based on URL parameter...
            </p>
        </div>

        <!-- Enhanced Header Section -->
        <div class="yta-header">
            <div class="trust-badge"> 2,847+ YouTubers earning extra revenue</div>
            <div class="value-headline">Creators Using Our Optimization Services Earn 340% More</div>
            <div class="value-subtitle">
                Join 10,000+ creators who've unlocked their hidden revenue potential
            </div>
            
            <div style="display: flex; align-items: center; justify-content: center; gap: 20px; margin: 48px 0;">
                <div style="width: 60px; height: 42px; background: #ff0000; border-radius: 12px; display: flex; align-items: center; justify-content: center; box-shadow: 0 4px 12px rgba(255, 0, 0, 0.3);">
                    <div style="width: 0; height: 0; border-left: 16px solid #fff; border-top: 10px solid transparent; border-bottom: 10px solid transparent; margin-left: 3px;"></div>
                </div>
                <span style="font-size: 32px; font-weight: 700; color: #1a1a1a;">YouTube</span>
                <span style="color:#6B7280;font-weight:300; font-size: 18px;">Channel Analytics</span>
                <span style="margin-left:50px; font-size: 28px; font-weight: 700;">
                    <span style="color: #F97316;">PrimeTime</span> <span style="color: #1E40AF;">Media</span>
                </span>
            </div>
            
            <div class="real-time-indicator" style="margin-top: 24px;">
                <span style="width: 8px; height: 8px; background: #10B981; border-radius: 50%; animation: pulse 2s infinite;"></span>
                Live revenue tracking enabled
            </div>
        </div>

        <!-- Enhanced Input Section -->
        <div class="yta-input-section" id="inputSection">
            <h2 style="margin-bottom: 32px; font-size: 32px; color: #1E40AF; font-weight: 700;">
                Discover Your Hidden Revenue in 30 Seconds
            </h2>
            <input type="text" id="ytaHandle" class="yta-input" placeholder="@channelname or youtube.com/@channel">
            <div style="font-size: 13px; color: #6B7280; margin-top: 12px;">
                Try a popular channel like <strong>@mkbhd</strong> or <strong>@pewdiepie</strong> to test
            </div>
            <br>
            <button id="runBtn" class="yta-btn-primary celebration-trigger" style="font-size: 20px; padding: 20px 48px;">
                 Calculate My Revenue Potential
            </button>
            <div style="margin-top: 20px; font-size: 14px; color: #10B981;">
                 Free analysis  See your optimization opportunities  Start earning today
            </div>
            
            <div class="level-indicator" style="margin-top: 24px; justify-content: center;">
                <span></span>
                Level 1: Basic Analysis (Free)
            </div>
        </div>

        <!-- Enhanced Loading State -->
        <div class="yta-loading" id="ytaLoading">
            <div class="yta-spinner"></div>
            <div style="font-size: 28px; font-weight: 700; margin-bottom: 16px; color: #1E40AF;">
                Analyzing revenue potential...
            </div>
            <div style="color:#6B7280;font-size:18px;" id="loadingSubtext">
                Calculating optimization opportunities
            </div>
            <div style="margin-top: 32px; font-size: 14px; color: #6B7280;" id="loadingProgress">
                 Scanning channel data...
            </div>
            
            <div style="margin-top: 24px;">
                <div class="xp-bar" style="width: 300px; margin: 0 auto;">
                    <div class="xp-fill" id="loadingBar" style="width: 0%;"></div>
                </div>
                <div style="font-size: 12px; color: #6B7280; margin-top: 8px;">Analysis Progress</div>
            </div>
        </div>

        <!-- Enhanced Results Section -->
        <div class="yta-results">
            <!-- Enhanced Streak Tracker -->
            <div class="streak-tracker">
                <h3 style="margin: 0 0 12px 0; font-size: 20px; color: #1E40AF;">
                     Your Analysis Streak
                </h3>
                <p style="font-size: 14px; color: #6B7280; margin-bottom: 20px;">
                    Keep analyzing daily to unlock premium features!
                </p>
                <div class="streak-days">
                    <div class="streak-day active" title="Monday">M</div>
                    <div class="streak-day active" title="Tuesday">T</div>
                    <div class="streak-day current" title="Wednesday - Today">W</div>
                    <div class="streak-day" title="Thursday">T</div>
                    <div class="streak-day" title="Friday">F</div>
                    <div class="streak-day" title="Saturday">S</div>
                    <div class="streak-day" title="Sunday">S</div>
                </div>
                <div style="margin-top: 20px; font-size: 14px; color: #10B981; font-weight: 600;">
                    3 Day Streak!  Keep it going!
                </div>
                <div style="margin-top: 16px;">
                    <div class="xp-bar">
                        <div class="xp-fill" style="width: 43%;"></div>
                    </div>
                    <div style="font-size: 12px; color: #6B7280; margin-top: 8px;">Next milestone: 7 day streak (+100 XP)</div>
                </div>
            </div>

            <!-- Enhanced Progress Tracker -->
            <div class="progress-tracker">
                <h3 style="margin: 0 0 20px 0; font-size: 20px; color: #1a1a1a;">
                    Your Analysis Progress
                </h3>
                <div class="level-indicator" style="margin-bottom: 20px;">
                    <span></span>
                    Current Level: Revenue Analyst (Level 1)
                </div>
                <div class="progress-item">
                    <div class="progress-circle completed"></div>
                    <div>
                        <div style="font-weight: 600;">Channel Data Analyzed</div>
                        <div style="font-size: 12px; color: #6B7280;">Basic metrics collected  +25 XP</div>
                    </div>
                </div>
                <div class="progress-item">
                    <div class="progress-circle current">2</div>
                    <div>
                        <div style="font-weight: 600;">Revenue Potential Calculated</div>
                        <div style="font-size: 12px; color: #6B7280;">Optimization opportunities identified  +50 XP</div>
                    </div>
                </div>
                <div class="progress-item">
                    <div class="progress-circle">3</div>
                    <div>
                        <div style="font-weight: 600;">Unlock Premium Insights</div>
                        <div style="font-size: 12px; color: #6B7280;">Get your custom optimization plan  +100 XP</div>
                    </div>
                </div>
            </div>

            <!-- Enhanced Daily Loss Counter -->
            <div class="daily-loss-counter">
                <div class="loss-label"> You're Currently Losing</div>
                <div class="loss-amount" id="currentDailyLoss">$0/day</div>
                <div class="loss-label">Without Channel Optimization</div>
                <div class="real-time-indicator" style="margin-top: 16px; justify-content: center;">
                    <span style="width: 8px; height: 8px; background: #DC143C; border-radius: 50%; animation: pulse 2s infinite;"></span>
                    LIVE: Loss continues every hour
                </div>
            </div>

            <!-- Enhanced Optimization Revenue Calculator -->
            <div class="yta-card">
                <div class="optimization-header">
                    <div class="optimization-title">
                         Your Revenue Potential Through Optimization
                    </div>
                    <div class="optimization-subtitle">
                        This is the additional revenue you can earn by optimizing your channel.<br>
                        Every day without optimization = money left on the table.
                    </div>
                    <div class="real-time-indicator" style="margin-top: 16px; justify-content: center;">
                        <span style="width: 8px; height: 8px; background: #10B981; border-radius: 50%; animation: pulse 2s infinite;"></span>
                        Updated with real-time market data
                    </div>
                </div>
                
                <div class="content-grid">
                    <div class="yta-metric">
                        <div class="yta-metric-label">
                            <span class="tooltip-trigger">
                                Revenue Per Video
                                <span class="tooltip">Additional earnings for each optimized video</span>
                            </span>
                        </div>
                        <div class="yta-metric-value" style="color: #F97316;" id="revPerVideo">$0</div>
                        <div class="real-time-indicator" style="margin-top: 12px; justify-content: center;">
                            <span style="width: 6px; height: 6px; background: #10B981; border-radius: 50%; animation: pulse 2s infinite;"></span>
                            Live
                        </div>
                    </div>
                    
                    <div class="yta-metric">
                        <div class="yta-metric-label">
                            <span class="tooltip-trigger">
                                Additional Subscribers
                                <span class="tooltip">Estimated new subscriber growth with optimization</span>
                            </span>
                        </div>
                        <div class="yta-metric-value" style="color: #F97316;" id="monthlyPotential">0</div>
                        <div class="delayed-data-indicator" style="margin-top: 12px; justify-content: center;">
                             24h old
                        </div>
                    </div>
                    
                    <div class="yta-metric featured" style="border: 3px solid #10B981; transform: scale(1.05); background: linear-gradient(135deg, #F0FDF4 0%, #DCFCE7 100%);">
                        <div class="yta-metric-label">
                            <span class="tooltip-trigger">
                                 Annual Revenue Potential 
                                <span class="tooltip">Total yearly revenue available through optimization</span>
                            </span>
                        </div>
                        <div class="yta-metric-value" style="color: #10B981;" id="annualPotential">$0</div>
                        <div style="font-size: 14px; color: #059669; margin-top: 12px; font-weight: 600;">
                            START EARNING TODAY
                        </div>
                        <div class="real-time-indicator" style="margin-top: 12px; justify-content: center;">
                            <span style="width: 6px; height: 6px; background: #10B981; border-radius: 50%; animation: pulse 2s infinite;"></span>
                            Real-time calculation
                        </div>
                    </div>
                </div>
                
                <div style="text-align: center; margin-top: 40px;">
                    <button class="yta-btn-primary celebration-trigger" style="font-size: 20px; padding: 20px 48px;" onclick="window.open('https://www.primetime.media/beta-1', '_blank')">
                         Unlock This Revenue Now 
                    </button>
                    <div style="margin-top: 20px; font-size: 14px; color: #10B981;">
                         Revenue share model  We only profit when you do  Real-time optimization
                    </div>
                </div>
            </div>

            <!-- Enhanced Historical Loss Section -->
            <div class="yta-card">
                <div class="loss-explanation">
                    <h4> What is Historical Lost Revenue?</h4>
                    <p>
                        This represents the total revenue you've missed since your channel started due to lack of optimization. 
                        It's calculated based on the performance gap between optimized and non-optimized content. 
                        While you can't recover past losses, you can prevent future losses by optimizing now.
                    </p>
                </div>
                
                <div style="text-align: center; padding: 32px; background: linear-gradient(135deg, #FEF3C7 0%, #FDE68A 100%); border-radius: 12px; border: 3px solid #F59E0B;">
                    <div style="font-size: 18px; color: #92400E; margin-bottom: 12px;">
                        Total Historical Lost Revenue
                    </div>
                    <div style="font-weight: 800; color: #DC143C; text-shadow: 0 2px 8px rgba(220, 20, 60, 0.3); word-break: break-all; line-height: 1.1; font-size: clamp(32px, 8vw, 52px);" id="totalLostRevenue">
                        $0
                    </div>
                    <div style="font-size: 14px; color: #78350F; margin-top: 12px;">
                        Since channel started  <span id="channelAge">0 years</span>
                    </div>
                    <div class="delayed-data-indicator" style="margin-top: 16px; justify-content: center;">
                         Historical data (24h delayed)
                    </div>
                </div>
            </div>

            <!-- Enhanced Channel Overview -->
            <div class="yta-card">
                <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 36px; flex-wrap: wrap; gap: 20px;">
                    <div style="display: flex; align-items: center; gap: 24px;">
                        <img id="channelImage" src="" alt="Channel" style="width: 100px; height: 100px; border-radius: 50%; border: 4px solid #3B82F6; display: none; box-shadow: 0 6px 20px rgba(59, 130, 246, 0.3);" onerror="this.style.display='none'">
                        <div>
                            <h2 style="margin: 0 0 8px 0; font-size: 32px; color: #1E40AF;" id="channelName">
                                Channel Analytics
                            </h2>
                            <div class="level-indicator">
                                <span></span>
                                Analysis Level: Complete
                            </div>
                        </div>
                    </div>
                    <button onclick="resetAnalysis()" class="yta-btn-secondary" style="font-size: 14px; padding: 12px 24px;">
                         New Analysis
                    </button>
                </div>
                
                <!-- Enhanced Data Freshness Indicator -->
                <div style="text-align: center; margin-bottom: 32px;">
                    <div class="delayed-data-indicator">
                        <span style="font-size: 16px;"></span>
                        <span id="dataFreshness">Data from 24 hours ago</span>
                        <span style="font-size: 10px;"> Upgrade for real-time</span>
                    </div>
                    <div style="margin-top: 12px; font-size: 13px; color: #6B7280;">
                        Real-time data shows 15% higher accuracy
                    </div>
                </div>
                
                <!-- Enhanced Channel Awards -->
                <div id="channelAwards">
                    <!-- Awards will be populated dynamically -->
                </div>
                
                <div class="content-grid">
                    <div style="text-align: center;">
                        <div style="font-size: 36px; margin-bottom: 12px;"></div>
                        <div style="font-size: 28px; font-weight: 700; color: #10B981; word-break: break-all;" id="subCount">0</div>
                        <div style="font-size: 14px; color: #6B7280;">Subscribers</div>
                        <div class="delayed-data-indicator" style="margin-top: 8px; justify-content: center;">
                             24h
                        </div>
                    </div>
                    <div style="text-align: center;">
                        <div style="font-size: 36px; margin-bottom: 12px;"></div>
                        <div style="font-size: 28px; font-weight: 700; color: #10B981; word-break: break-all;" id="viewCount">0</div>
                        <div style="font-size: 14px; color: #6B7280;">Total Views</div>
                        <div class="delayed-data-indicator" style="margin-top: 8px; justify-content: center;">
                             24h
                        </div>
                    </div>
                    <div style="text-align: center;">
                        <div style="font-size: 36px; margin-bottom: 12px;"></div>
                        <div style="font-size: 28px; font-weight: 700; color: #10B981; word-break: break-all;" id="videoCount">0</div>
                        <div style="font-size: 14px; color: #6B7280;">Videos</div>
                        <div class="real-time-indicator" style="margin-top: 8px; justify-content: center;">
                            <span style="width: 6px; height: 6px; background: #10B981; border-radius: 50%; animation: pulse 2s infinite;"></span>
                            Live
                        </div>
                    </div>
                </div>
            </div>

            <!-- Enhanced Channel Health Score -->
            <div class="yta-card">
                <h3 style="margin: 0 0 36px 0; font-size: 22px;">
                    <span class="tooltip-trigger">
                         Channel Health Score
                        <span class="tooltip">Overall performance rating based on engagement, growth, and optimization</span>
                    </span>
                </h3>
                
                <div style="text-align: center; padding: 32px;">
                    <div class="yta-score-circle" id="scoreCircle" style="--score-deg: 0deg; --score-color: #EF4444">
                        <div class="yta-score-inner">
                            <div style="font-size: 36px; font-weight: 700; color: #1E40AF;" id="scoreValue">0.0</div>
                            <div style="font-size: 12px; color: #6B7280;">out of 10</div>
                        </div>
                    </div>
                    <div style="margin-top: 24px; padding: 24px; background: linear-gradient(135deg, #F9FAFB 0%, #FFFFFF 100%); border-radius: 12px;">
                        <div id="healthStatus" style="font-size: 18px; font-weight: 700;">Loading...</div>
                        <div id="healthDesc" style="font-size: 14px; color: #6B7280; margin-top: 8px; line-height: 1.4;">Analyzing channel health...</div>
                        <div class="delayed-data-indicator" style="margin-top: 12px; justify-content: center;">
                             Score based on 24h old data
                        </div>
                    </div>
                </div>
            </div>

            <!-- Enhanced Performance Overview -->
            <div class="yta-card">
                <h3 style="margin: 0 0 36px 0; font-size: 22px;">
                     Performance Overview
                </h3>
                
                <div id="chartBars">
                    <div style="height: 0%;" title="Engagement Rate"></div>
                    <div style="height: 0%;" title="Like Rate"></div>
                    <div style="height: 0%;" title="Comment Rate"></div>
                    <div style="height: 0%;" title="Relative Views"></div>
                    <div style="height: 0%;" title="Sentiment"></div>
                </div>
                
                <!-- Enhanced Column Labels -->
                <div style="display: flex; justify-content: center; gap: 32px; margin-top: 16px; font-size: 12px; font-weight: 600; color: #1a1a1a;">
                    <div style="width: 70px; text-align: center;">
                        <span style="font-size: 20px;"></span><br>Engage
                    </div>
                    <div style="width: 70px; text-align: center;">
                        <span style="font-size: 20px;"></span><br>Likes
                    </div>
                    <div style="width: 70px; text-align: center;">
                        <span style="font-size: 20px;"></span><br>Comments
                    </div>
                    <div style="width: 70px; text-align: center;">
                        <span style="font-size: 20px;"></span><br>Views
                    </div>
                    <div style="width: 70px; text-align: center;">
                        <span style="font-size: 20px;"></span><br>Sentiment
                    </div>
                </div>
                
                <!-- Enhanced Metric Values -->
                <div style="display: flex; justify-content: center; gap: 32px; margin-top: 12px; font-size: 12px; font-weight: 700;">
                    <div style="width: 70px; text-align: center;" id="engChart">0%</div>
                    <div style="width: 70px; text-align: center;" id="likeChart">0%</div>
                    <div style="width: 70px; text-align: center;" id="commentChart">0%</div>
                    <div style="width: 70px; text-align: center;" id="relativeChart">0x</div>
                    <div style="width: 70px; text-align: center;" id="sentimentChart">0%</div>
                </div>
                
                <div style="text-align: center; margin-top: 24px;">
                    <div class="delayed-data-indicator">
                         Performance data updated 24 hours ago
                    </div>
                </div>
            </div>

            <!-- Enhanced Recent Videos Section -->
            <div class="yta-card" style="display: none;" id="videosCard">
                <h3 style="margin: 0 0 36px 0; font-size: 22px;">
                     Recent Videos Analysis
                </h3>
                
                <div id="videosList">
                    <!-- Videos will be populated here -->
                </div>
                
                <div style="text-align: center; margin-top: 32px; padding: 32px; background: linear-gradient(135deg, #FEF3C7 0%, #FDE68A 100%); border-radius: 12px; border: 3px solid #F59E0B;">
                    <div style="font-size: 18px; color: #92400E; font-weight: 600;">
                         <span id="unoptimizedCount">0</span> of your recent videos are not optimized
                    </div>
                    <div style="font-size: 14px; color: #78350F; margin-top: 12px;">
                        Each unoptimized video = lost revenue opportunity
                    </div>
                    <div class="delayed-data-indicator" style="margin-top: 16px; justify-content: center;">
                         Video data updated 24 hours ago
                    </div>
                </div>
            </div>

            <!-- Enhanced Performance Metrics -->
            <div class="yta-card" style="display: none;" id="metricsCard">
                <h3 style="margin: 0 0 36px 0; font-size: 22px;">
                     Detailed Performance Metrics
                </h3>
                
                <div style="margin-bottom: 32px;">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 12px;">
                        <span class="tooltip-trigger">
                            Engagement Rate
                            <span class="tooltip">Percentage of viewers who interact with your content</span>
                        </span>
                        <span style="font-weight: 700;" id="engagementRate">0%</span>
                    </div>
                    <div class="yta-progress">
                        <div class="yta-progress-fill" id="engagementBar" style="width: 0%;"></div>
                    </div>
                    <div class="delayed-data-indicator" style="margin-top: 8px;">
                         24h delayed
                    </div>
                </div>
                
                <div style="margin-bottom: 32px;">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 12px;">
                        <span class="tooltip-trigger">
                            Like Rate
                            <span class="tooltip">Percentage of viewers who like your videos</span>
                        </span>
                        <span style="font-weight: 700;" id="likeRate">0%</span>
                    </div>
                    <div class="yta-progress">
                        <div class="yta-progress-fill" id="likeBar" style="width: 0%;"></div>
                    </div>
                    <div class="delayed-data-indicator" style="margin-top: 8px;">
                         24h delayed
                    </div>
                </div>
                
                <div style="margin-bottom: 32px;">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 12px;">
                        <span class="tooltip-trigger">
                            Comment Rate
                            <span class="tooltip">Percentage of viewers who comment</span>
                        </span>
                        <span style="font-weight: 700;" id="commentRate">0%</span>
                    </div>
                    <div class="yta-progress">
                        <div class="yta-progress-fill" id="commentBar" style="width: 0%;"></div>
                    </div>
                    <div class="delayed-data-indicator" style="margin-top: 8px;">
                         24h delayed
                    </div>
                </div>
                
                <!-- Enhanced Locked Premium Metrics -->
                <div style="position: relative; margin-top: 48px;">
                    <div class="locked-content">
                        <div style="margin-bottom: 32px;">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 12px;">
                                <span>Viral Potential Score</span>
                                <span style="font-weight: 700;">8.5/10</span>
                            </div>
                            <div class="yta-progress">
                                <div class="yta-progress-fill" style="width: 85%; background: linear-gradient(90deg, #F97316 0%, #EA580C 100%);"></div>
                            </div>
                            <div class="real-time-indicator" style="margin-top: 8px;">
                                <span style="width: 6px; height: 6px; background: #10B981; border-radius: 50%; animation: pulse 2s infinite;"></span>
                                Real-time
                            </div>
                        </div>
                        <div>
                            <div style="display: flex; justify-content: space-between; margin-bottom: 12px;">
                                <span>Revenue Optimization Score</span>
                                <span style="font-weight: 700;">9.2/10</span>
                            </div>
                            <div class="yta-progress">
                                <div class="yta-progress-fill" style="width: 92%; background: linear-gradient(90deg, #10B981 0%, #059669 100%);"></div>
                            </div>
                            <div class="real-time-indicator" style="margin-top: 8px;">
                                <span style="width: 6px; height: 6px; background: #10B981; border-radius: 50%; animation: pulse 2s infinite;"></span>
                                Live calculation
                            </div>
                        </div>
                    </div>
                    <div class="unlock-overlay">
                        <div class="lock-icon"></div>
                        <div style="font-weight: 600; margin-bottom: 12px; font-size: 18px;">Premium Metrics</div>
                        <div style="font-size: 14px; color: #6B7280; margin-bottom: 20px;">Get real-time data + AI insights</div>
                        <button class="yta-btn-primary" style="font-size: 16px; padding: 12px 24px;" onclick="window.open('https://www.primetime.media/beta-1', '_blank')">
                            Unlock All Metrics 
                        </button>
                    </div>
                </div>
            </div>

            <!-- Enhanced Social Proof -->
            <div class="social-proof-grid" style="display: none;" id="socialProofGrid">
                <div class="social-proof-card">
                    <div style="display: flex; align-items: center; gap: 16px; margin-bottom: 16px;">
                        <div style="width: 48px; height: 48px; background: linear-gradient(135deg, #10B981 0%, #059669 100%); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-weight: 700; font-size: 18px;">JM</div>
                        <div>
                            <div style="font-weight: 600; color: #1a1a1a; font-size: 16px;">@JohnMusic</div>
                            <div style="font-size: 12px; color: #10B981;">Similar channel size</div>
                        </div>
                    </div>
                    <div style="font-size: 28px; font-weight: 800; color: #10B981; margin-bottom: 12px; word-break: break-all;">+$127K</div>
                    <div style="font-size: 14px; color: #047857; line-height: 1.4;">Annual revenue increase after optimization</div>
                    <div class="real-time-indicator" style="margin-top: 12px;">
                        <span style="width: 6px; height: 6px; background: #10B981; border-radius: 50%; animation: pulse 2s infinite;"></span>
                        Verified result
                    </div>
                </div>
                
                <div class="social-proof-card">
                    <div style="display: flex; align-items: center; gap: 16px; margin-bottom: 16px;">
                        <div style="width: 48px; height: 48px; background: linear-gradient(135deg, #10B981 0%, #059669 100%); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-weight: 700; font-size: 18px;">SL</div>
                        <div>
                            <div style="font-weight: 600; color: #1a1a1a; font-size: 16px;">@SarahLifestyle</div>
                            <div style="font-size: 12px; color: #10B981;">Your category</div>
                        </div>
                    </div>
                    <div style="font-size: 28px; font-weight: 800; color: #10B981; margin-bottom: 12px; word-break: break-all;">+$203K</div>
                    <div style="font-size: 14px; color: #047857; line-height: 1.4;">First year revenue growth</div>
                    <div class="real-time-indicator" style="margin-top: 12px;">
                        <span style="width: 6px; height: 6px; background: #10B981; border-radius: 50%; animation: pulse 2s infinite;"></span>
                        Recent success
                    </div>
                </div>
                
                <div class="social-proof-card">
                    <div style="display: flex; align-items: center; gap: 16px; margin-bottom: 16px;">
                        <div style="width: 48px; height: 48px; background: linear-gradient(135deg, #10B981 0%, #059669 100%); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-weight: 700; font-size: 18px;">TR</div>
                        <div>
                            <div style="font-weight: 600; color: #1a1a1a; font-size: 16px;">@TechReviews</div>
                            <div style="font-size: 12px; color: #10B981;">Started 2 weeks ago</div>
                        </div>
                    </div>
                    <div style="font-size: 28px; font-weight: 800; color: #10B981; margin-bottom: 12px; word-break: break-all;">+340%</div>
                    <div style="font-size: 14px; color: #047857; line-height: 1.4;">Revenue increase so far</div>
                    <div class="real-time-indicator" style="margin-top: 12px;">
                        <span style="width: 6px; height: 6px; background: #10B981; border-radius: 50%; animation: pulse 2s infinite;"></span>
                        Live tracking
                    </div>
                </div>
            </div>

            <!-- Enhanced Peer Comparison -->
            <div class="peer-comparison" id="peerComparison" style="display: none;">
                <h4 style="margin: 0 0 24px 0; font-size: 20px; color: #1a1a1a; display: flex; align-items: center; gap: 12px;">
                    <span style="font-size: 24px;"></span>
                    How You Compare to Similar Channels
                </h4>
                <div class="peer-metric">
                    <span style="display: flex; align-items: center; gap: 12px;">
                        <span style="font-size: 20px;"></span>
                        Revenue per 1K views
                    </span>
                    <div class="peer-metric-value peer-worse" id="revenueComparison">-67% below average</div>
                </div>
                <div class="peer-metric">
                    <span style="display: flex; align-items: center; gap: 12px;">
                        <span style="font-size: 20px;"></span>
                        Engagement optimization
                    </span>
                    <div class="peer-metric-value peer-worse" id="engagementComparison">-43% below peers</div>
                </div>
                <div class="peer-metric">
                    <span style="display: flex; align-items: center; gap: 12px;">
                        <span style="font-size: 20px;"></span>
                        Content optimization
                    </span>
                    <div class="peer-metric-value peer-worse" id="contentComparison">-52% below potential</div>
                </div>
                <div style="background: linear-gradient(135deg, rgba(239, 68, 68, 0.1) 0%, rgba(220, 38, 38, 0.1) 100%); padding: 24px; border-radius: 12px; border-left: 4px solid #EF4444; margin-top: 24px;">
                    <div style="font-weight: 600; color: #DC143C; margin-bottom: 12px;"> Critical Gap Alert</div>
                    <div style="font-size: 14px; color: #991B1B; line-height: 1.4;">You're significantly underperforming compared to similar channels. This gap represents lost revenue opportunities.</div>
                    <div class="delayed-data-indicator" style="margin-top: 12px;">
                         Comparison data 24 hours old
                    </div>
                </div>
            </div>

            <!-- Enhanced AI Analysis -->
            <div class="yta-card" style="display: none;" id="aiCard">
                <h3 style="margin: 0 0 36px 0; font-size: 22px;">
                     AI-Powered Revenue Analysis
                </h3>
                
                <!-- First AI recommendation visible -->
                <div class="ai-section unlocked" style="border: 3px solid #EF4444; border-radius: 16px; padding: 6px; background: linear-gradient(135deg, #FEE2E2 0%, #FECACA 100%); animation: criticalPulse 2s ease-in-out infinite;">
                    <div class="ai-recommendation">
                        <div class="ai-icon"></div>
                        <div class="ai-content">
                            <h4 style="color: #DC143C; font-size: 20px;">Critical: Your Videos Need Optimization NOW</h4>
                            <p style="color: #991B1B; font-weight: 500; font-size: 16px;">Your videos are missing 7 critical optimization elements costing you <span class="daily-loss-dynamic" style="font-weight: 800; font-size: 20px;">$0/day</span>. Simple fixes:  End screens missing (89% of videos)  No cards  Wrong tags  Poor descriptions  No chapters  Missing subtitles  Bad metadata. These fixes would TRIPLE your views TODAY.</p>
                            <div class="real-time-indicator" style="margin: 16px 0;">
                                <span style="width: 8px; height: 8px; background: #DC143C; border-radius: 50%; animation: pulse 2s infinite;"></span>
                                URGENT: Revenue loss accelerating
                            </div>
                            <div style="margin-top: 24px;">
                                <button class="yta-btn-primary celebration-trigger" style="background: linear-gradient(135deg, #DC143C 0%, #B91C1C 100%); font-size: 16px; padding: 16px 32px; border: 2px solid #DC143C; box-shadow: 0 4px 6px rgba(220, 20, 60, 0.25);" 
                                        onmouseover="this.style.background='linear-gradient(135deg, #B91C1C 0%, #991B1B 100%)'; this.style.borderColor='#B91C1C'" 
                                        onmouseout="this.style.background='linear-gradient(135deg, #DC143C 0%, #B91C1C 100%)'; this.style.borderColor='#DC143C'"
                                        onclick="window.open('https://www.primetime.media/beta-1', '_blank')">
                                     Fix My Videos Now 
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Remaining AI recommendations with enhanced blur -->
                <div style="position: relative; margin-top: 32px; background: linear-gradient(135deg, #FFF7ED 0%, #FFEDD5 100%); border-radius: 16px; padding: 6px; box-shadow: 0 8px 30px rgba(249, 115, 22, 0.2); overflow: hidden;">
                    <div class="locked-content">
                        <div class="ai-section">
                            <div class="ai-recommendation">
                                <div class="ai-icon"></div>
                                <div class="ai-content">
                                    <h4>Title Optimization Formula</h4>
                                    <p>Your titles are underperforming by 45%. Using power words like "Ultimate," "Secret," and numbers in brackets [2024] could triple your CTR. We've identified 12 title templates that work specifically in your niche.</p>
                                    <div class="real-time-indicator" style="margin-top: 12px;">
                                        <span style="width: 6px; height: 6px; background: #10B981; border-radius: 50%; animation: pulse 2s infinite;"></span>
                                        AI-powered suggestions
                                    </div>
                                </div>
                            </div>
                            
                            <div class="ai-recommendation">
                                <div class="ai-icon"></div>
                                <div class="ai-content">
                                    <h4>Thumbnail Optimization Strategy</h4>
                                    <p>Your thumbnails could generate 2.5x more clicks with dynamic elements. Studies show channels using motion blur and contrasting colors see 340% higher CTR. We recommend A/B testing emotional expressions and adding subtle animation cues.</p>
                                    <div class="real-time-indicator" style="margin-top: 12px;">
                                        <span style="width: 6px; height: 6px; background: #10B981; border-radius: 50%; animation: pulse 2s infinite;"></span>
                                        Real-time A/B testing
                                    </div>
                                </div>
                            </div>
                            
                            <div class="ai-recommendation">
                                <div class="ai-icon"></div>
                                <div class="ai-content">
                                    <h4>Upload Timing Analysis</h4>
                                    <p>Based on your audience demographics, you're missing peak engagement windows. Shifting uploads to Tuesday/Thursday at 2 PM EST could increase initial views by 67%. Your current schedule misses 40% of your active subscriber base.</p>
                                    <div class="real-time-indicator" style="margin-top: 12px;">
                                        <span style="width: 6px; height: 6px; background: #10B981; border-radius: 50%; animation: pulse 2s infinite;"></span>
                                        Live audience tracking
                                    </div>
                                </div>
                            </div>
                            
                            <div class="ai-recommendation">
                                <div class="ai-icon"></div>
                                <div class="ai-content">
                                    <h4>Competitor Gap Analysis</h4>
                                    <p>You're missing 3 key content categories that your competitors use to drive 80% of their revenue. These gaps represent $127K in annual revenue you're leaving on the table.</p>
                                    <div class="real-time-indicator" style="margin-top: 12px;">
                                        <span style="width: 6px; height: 6px; background: #10B981; border-radius: 50%; animation: pulse 2s infinite;"></span>
                                        Market analysis updated hourly
                                    </div>
                                </div>
                            </div>
                            
                            <div class="ai-recommendation">
                                <div class="ai-icon"></div>
                                <div class="ai-content">
                                    <h4>Sponsorship Opportunity Calculator</h4>
                                    <p>Based on your metrics, you're undercharging sponsors by 73%. Your true sponsorship value is $4,500 per video, not the $1,200 average you're likely getting. We've identified 15 brands perfect for your audience.</p>
                                    <div class="real-time-indicator" style="margin-top: 12px;">
                                        <span style="width: 6px; height: 6px; background: #10B981; border-radius: 50%; animation: pulse 2s infinite;"></span>
                                        Brand matching algorithm
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="unlock-overlay">
                        <div class="lock-icon"></div>
                        <div style="font-size: 20px; font-weight: 600; margin-bottom: 16px;">
                            Unlock 5 More AI Insights
                        </div>
                        <div style="color: #6B7280; margin-bottom: 24px; font-size: 14px;">
                            Get your complete optimization roadmap with real-time updates
                        </div>
                        <div class="level-indicator" style="margin-bottom: 20px; justify-content: center;">
                            <span></span>
                            Upgrade to Level 2: AI Analyst
                        </div>
                        <button class="yta-btn-primary celebration-trigger" style="animation: glowPulse 2s ease-in-out infinite; font-size: 18px; padding: 16px 32px;" onclick="window.open('https://www.primetime.media/beta-1', '_blank')">
                             Unlock All AI Insights 
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
 
<script>
    // Navigation Bar Functions
    function toggleMobileMenu() {
        const toggle = document.querySelector('.ptn-mobile-toggle');
        const menu = document.getElementById('ptnMobileMenu');
        
        toggle.classList.toggle('active');
        menu.classList.toggle('active');
    }

    // Close mobile menu when clicking outside
    document.addEventListener('click', function(event) {
        const menu = document.getElementById('ptnMobileMenu');
        const toggle = document.querySelector('.ptn-mobile-toggle');
        const navbar = document.querySelector('.ptn-navbar-wrapper');
        
        if (navbar && !navbar.contains(event.target) && menu && menu.classList.contains('active')) {
            menu.classList.remove('active');
            toggle.classList.remove('active');
        }
    });

    // Handle window resize for navigation
    window.addEventListener('resize', function() {
        const menu = document.getElementById('ptnMobileMenu');
        const toggle = document.querySelector('.ptn-mobile-toggle');
        
        if (window.innerWidth > 1100 && menu && menu.classList.contains('active')) {
            menu.classList.remove('active');
            if (toggle) toggle.classList.remove('active');
        }
    });

    // Enhanced Global variables
    let usageCount = localStorage.getItem('ytaUsageCount') || 3;
    let lastResetDate = localStorage.getItem('ytaLastReset') || new Date().toISOString();
    let achievements = JSON.parse(localStorage.getItem('ytaAchievements') || '[]');
    let userXP = parseInt(localStorage.getItem('ytaUserXP') || '0');
    let userLevel = parseInt(localStorage.getItem('ytaUserLevel') || '1');
    let hasShownExitIntent = false;
    let timeOnPage = 0;
    let hasShownTimePrompt = false;
    let autoAnalyzing = false;

    // Enhanced Popup Management System
    const popups = {
        criticalBanner: { element: 'criticalBanner', peekTime: 3000, showTime: 8000 },
        revenueOpportunity: { element: 'revenueOpportunity', peekTime: 15000, showTime: 20000 },
        bottomCTA: { element: 'bottomCTA', peekTime: 30000, showTime: 35000 }
    };

    const popupStates = {};

    // URL Parameter Parser
    function getUrlParameter(name) {
        name = name.replace(/[\[]/, '\\[').replace(/[\]]/, '\\]');
        const regex = new RegExp('[\\?&]' + name + '=([^&#]*)');
        const results = regex.exec(location.search);
        return results === null ? '' : decodeURIComponent(results[1].replace(/\+/g, ' '));
    }

    // Auto-analyze functionality
    function checkForAutoAnalyze() {
        const creatorParam = getUrlParameter('creator');
        if (creatorParam) {
            autoAnalyzing = true;
            document.getElementById('autoAnalyzingNotice').style.display = 'block';
            document.getElementById('autoCreatorName').textContent = creatorParam;
            document.getElementById('inputSection').style.display = 'none';
            
            // Set the creator name in the input field for processing
            document.getElementById('ytaHandle').value = creatorParam;
            
            // Start analysis after a brief delay
            setTimeout(() => {
                ytaRun(0, true); // Pass true for auto-analyze mode
            }, 2000);
        }
    }

    // Enhanced XP and Level System
    function addXP(amount, reason) {
        userXP += amount;
        localStorage.setItem('ytaUserXP', userXP);
        
        const newLevel = Math.floor(userXP / 100) + 1;
        if (newLevel > userLevel) {
            userLevel = newLevel;
            localStorage.setItem('ytaUserLevel', userLevel);
            showLevelUp(newLevel);
        }
        
        updateXPDisplay();
        if (!autoAnalyzing) {
            showXPGain(amount, reason);
        }
    }

    function updateXPDisplay() {
        const xpInLevel = userXP % 100;
        document.querySelectorAll('.xp-fill').forEach(fill => {
            fill.style.width = xpInLevel + '%';
        });
        
        document.querySelectorAll('.level-indicator').forEach(indicator => {
            indicator.innerHTML = `<span></span> Level ${userLevel} Analyst`;
        });
    }

    function showXPGain(amount, reason) {
        const xpPopup = document.createElement('div');
        xpPopup.style.cssText = `
            position: fixed;
            top: 50%;
            right: 24px;
            background: linear-gradient(135deg, #10B981, #059669);
            color: white;
            padding: 16px 24px;
            border-radius: 12px;
            font-weight: 600;
            z-index: 2000;
            animation: slideInRight 0.5s ease, fadeOut 0.5s ease 2.5s forwards;
        `;
        xpPopup.innerHTML = `+${amount} XP  ${reason}`;
        document.body.appendChild(xpPopup);
        
        setTimeout(() => xpPopup.remove(), 3000);
    }

    function showLevelUp(level) {
        const levelPopup = document.createElement('div');
        levelPopup.style.cssText = `
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 40px;
            border-radius: 20px;
            text-align: center;
            z-index: 3000;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            border: 4px solid #F97316;
        `;
        levelPopup.innerHTML = `
            <div style="font-size: 48px; margin-bottom: 20px;"></div>
            <h2 style="color: #F97316; margin-bottom: 16px;">Level Up!</h2>
            <p style="margin-bottom: 24px;">You've reached Level ${level}!</p>
            <button onclick="this.parentElement.remove()" class="yta-btn-primary">Continue</button>
        `;
        document.body.appendChild(levelPopup);
    }

    // Enhanced check usage reset function
    function checkUsageReset() {
        const lastReset = new Date(lastResetDate);
        const now = new Date();
        const daysSinceReset = Math.floor((now - lastReset) / (1000 * 60 * 60 * 24));
        
        if (daysSinceReset >= 30) {
            usageCount = 5;
            localStorage.setItem('ytaUsageCount', usageCount);
            localStorage.setItem('ytaLastReset', now.toISOString());
        }
    }

    // Enhanced update usage display
    function updateUsageDisplay() {
        const remaining = 5 - usageCount;
        document.getElementById('usageCount').textContent = remaining;
        document.getElementById('usageProgressFill').style.width = ((usageCount / 5) * 100) + '%';
        
        const tracker = document.getElementById('usageTracker');
        if (remaining <= 2) {
            tracker.style.borderColor = '#F97316';
        }
        if (remaining === 0) {
            tracker.style.borderColor = '#EF4444';
        }
    }

    // Enhanced achievement system
    function unlockAchievement(type, text) {
        if (!achievements.includes(type) && !autoAnalyzing) {
            achievements.push(type);
            localStorage.setItem('ytaAchievements', JSON.stringify(achievements));
            
            const popup = document.getElementById('achievementPopup');
            const badgesContainer = document.getElementById('achievementBadges');
            document.getElementById('achievementText').textContent = text;
            
            // Add badge with enhanced styling
            const badge = document.createElement('div');
            badge.className = 'achievement-badge';
            badge.innerHTML = `<span></span> ${type}`;
            badgesContainer.innerHTML = '';
            badgesContainer.appendChild(badge);
            
            // Show popup with enhanced animation
            popup.classList.add('show');
            
            // Play enhanced celebration animation
            createEnhancedCelebration();
            
            // Add XP
            addXP(50, `Achievement: ${type}`);
            
            setTimeout(() => {
                popup.classList.remove('show');
            }, 6000);
        }
    }

    // Enhanced celebration animation
    function createEnhancedCelebration() {
        if (autoAnalyzing) return; // Skip celebrations during auto-analyze
        
        const celebration = document.createElement('div');
        celebration.className = 'celebration';
        
        for (let i = 0; i < 30; i++) {
            const confetti = document.createElement('div');
            confetti.className = 'confetti-piece';
            confetti.style.left = (Math.random() * 300 - 150) + 'px';
            confetti.style.backgroundColor = ['#10B981', '#F97316', '#3B82F6', '#F59E0B', '#EF4444'][Math.floor(Math.random() * 5)];
            confetti.style.animationDelay = Math.random() * 1 + 's';
            confetti.style.animationDuration = (Math.random() * 1 + 1) + 's';
            celebration.appendChild(confetti);
        }
        
        document.body.appendChild(celebration);
        setTimeout(() => celebration.remove(), 2000);
    }

    // Enhanced loading progress
    function updateLoadingProgress() {
        const loadingBar = document.getElementById('loadingBar');
        let progress = 0;
        
        const progressInterval = setInterval(() => {
            progress += Math.random() * 15;
            if (progress > 100) progress = 100;
            
            loadingBar.style.width = progress + '%';
            
            if (progress >= 100) {
                clearInterval(progressInterval);
            }
        }, 500);
        
        return progressInterval;
    }

    // Helper function to apply responsive number styling
    function applyResponsiveNumberStyling(element, value) {
        if (!element) return;
        
        const valueStr = value.toString();
        const length = valueStr.replace(/[,$]/g, '').length; // Remove formatting characters
        
        // Reset classes
        element.classList.remove('large-number', 'very-large-number');
        
        // Apply appropriate class based on length
        if (length >= 10) {
            element.classList.add('very-large-number');
        } else if (length >= 7) {
            element.classList.add('large-number');
        }
    }

    // Enhanced main analysis function
    function ytaRun(retryCount = 0, isAutoAnalyze = false) {
        // Check usage limit with enhanced messaging (skip for auto-analyze)
        if (!isAutoAnalyze) {
            const remaining = 5 - usageCount;
            if (remaining <= 0) {
                showError('You\'ve reached your free analysis limit for this month. Upgrade to Premium for unlimited analyses and real-time data!');
                setTimeout(() => {
                    window.open('https://www.primetime.media/beta-1', '_blank');
                }, 2000);
                return;
            }
        }
        
        let handle = document.getElementById('ytaHandle').value.trim();
        if (!handle) {
            showError('Please enter a channel handle');
            return;
        }

        // Clean up the handle format
        handle = handle.replace(/^(https?:\/\/)?(www\.)?youtube\.com\/@?/i, '');
        handle = handle.replace(/\/.*$/, '');
        
        if (!handle.startsWith('@')) {
            handle = '@' + handle;
        }
        
        localStorage.setItem('lastAnalyzedChannel', handle);

        // Hide input section and auto-analyzing notice
        document.getElementById('inputSection').style.display = 'none';
        document.getElementById('autoAnalyzingNotice').style.display = 'none';
        document.getElementById('ytaLoading').style.display = 'block';
        
        // Start enhanced loading progress
        const progressInterval = updateLoadingProgress();
        
        // Enhanced loading text
        const loadingText = isAutoAnalyze 
            ? `Auto-analyzing ${handle.toUpperCase()} with AI...`
            : retryCount > 0 
                ? `Retrying enhanced analysis for ${handle.toUpperCase()}...` 
                : `Analyzing ${handle.toUpperCase()} with AI...`;
        document.querySelector('#ytaLoading div:nth-child(2)').textContent = loadingText;

        // Enhanced progress messages
        const progressMessages = [
            ' Scanning channel data with AI...',
            ' Calculating revenue potential...',
            ' Analyzing performance metrics...',
            ' Identifying optimization opportunities...',
            ' Preparing your custom revenue roadmap...',
            ' Running AI analysis algorithms...',
            ' Discovering hidden revenue streams...'
        ];
        
        let messageIndex = 0;
        const messageInterval = setInterval(() => {
            if (messageIndex < progressMessages.length) {
                document.getElementById('loadingProgress').textContent = progressMessages[messageIndex];
                messageIndex++;
            } else {
                const waitingMessages = [
                    ' Almost ready...',
                    ' Finalizing calculations...',
                    ' Generating insights...',
                    ' Uncovering opportunities...',
                    ' Optimizing recommendations...'
                ];
                const waitIndex = (messageIndex - progressMessages.length) % waitingMessages.length;
                document.getElementById('loadingProgress').textContent = waitingMessages[waitIndex];
                messageIndex++;
            }
        }, 1800);

        // Enhanced API call with improved error handling
        const timeoutDuration = retryCount === 0 ? 45000 : 60000;
        const controller = new AbortController();
        const timeoutId = setTimeout(() => controller.abort(), timeoutDuration);

        fetch('https://primetime-media-youtube-analyzer-941974948417.us-central1.run.app/analyze?handle=' + encodeURIComponent(handle), {
            method: 'GET',
            headers: {
                'Content-Type': 'application/json',
                'Accept': 'application/json'
            },
            signal: controller.signal
        })
            .then(response => {
                clearTimeout(timeoutId);
                clearInterval(progressInterval);
                clearInterval(messageInterval);
                
                if (!response.ok) {
                    return response.text().then(text => {
                        throw new Error(`API Error ${response.status}: ${text}`);
                    });
                }
                
                const contentType = response.headers.get('content-type');
                if (!contentType || !contentType.includes('application/json')) {
                    throw new Error('Invalid response: Expected JSON but received ' + contentType);
                }
                
                return response.json().catch(err => {
                    console.error('JSON parsing error:', err);
                    throw new Error('Invalid response format from server');
                });
            })
            .then(data => {
                console.log('API Response:', data);
                
                if (!data || (!data.channel_data && !data.subscriberCount)) {
                    throw new Error('Invalid response: No channel data received');
                }
                
                document.getElementById('ytaLoading').style.display = 'none';
                document.querySelector('.yta-results').style.display = 'block';
                
                // Enhanced dashboard update
                updateDashboard(data);

                // Enhanced usage tracking (skip for auto-analyze)
                if (!isAutoAnalyze) {
                    document.getElementById('usageTracker').style.display = 'block';
                    setTimeout(() => {
                        document.getElementById('usageTracker').style.display = 'none';
                    }, 10000);
                    usageCount++;
                    localStorage.setItem('ytaUsageCount', usageCount);
                    updateUsageDisplay();
                }

                // auto-hide Free Analyses CTA after 10 seconds
                setTimeout(() => {
                    const tracker = document.getElementById('usageTracker');
                    if (tracker) {
                        tracker.style.display = 'none';
                    }
                }, 10000);
    
                
                // Enhanced achievement checking (skip for auto-analyze)
                if (!isAutoAnalyze) {
                    if (usageCount === 1) {
                        unlockAchievement('First Analysis', 'Completed your first channel analysis!');
                        addXP(25, 'First Analysis');
                    } else if (usageCount === 3) {
                        unlockAchievement('Getting Serious', 'Analyzed 3 channels - you\'re on fire!');
                        addXP(50, 'Multiple Analyses');
                    } else if (usageCount === 5) {
                        unlockAchievement('Power User', 'Used all 5 free analyses!');
                        addXP(75, 'Power User');
                    }
                }

                // Initialize enhanced popups and triggers (skip for auto-analyze)
                if (!isAutoAnalyze) {
                    setTimeout(initializeEnhancedPopups, 1000);
                    initExitIntent();
                    initTimePrompt();
                    initScrollCTA();
                } else {
                    // For auto-analyze, show a minimal completion banner
                    setTimeout(() => {
                        showAutoAnalyzeComplete();
                    }, 2000);
                }
            })
            .catch(error => {
                clearTimeout(timeoutId);
                clearInterval(progressInterval);
                clearInterval(messageInterval);
                console.error('Error:', error);
                
                if ((error.name === 'AbortError' || error.message.includes('500')) && retryCount < 2) {
                    console.log('Retrying request...');
                    document.getElementById('loadingProgress').textContent = ' Server is warming up, retrying...';
                    setTimeout(() => ytaRun(retryCount + 1, isAutoAnalyze), 2000);
                    return;
                }
                
                document.getElementById('ytaLoading').style.display = 'none';
                if (isAutoAnalyze) {
                    document.getElementById('autoAnalyzingNotice').style.display = 'block';
                    document.getElementById('autoAnalyzingNotice').innerHTML = `
                        <div style="font-size: 24px; margin-bottom: 16px;"></div>
                        <h3 style="color: #EF4444; margin-bottom: 12px;">Analysis Failed</h3>
                        <p style="color: #6B7280; margin: 0;">
                            Could not analyze <strong>${handle}</strong>. Please try again or enter a different creator.
                        </p>
                        <button onclick="resetAnalysis()" class="yta-btn-primary" style="margin-top: 16px; padding: 12px 24px;">
                            Try Again
                        </button>
                    `;
                } else {
                    document.getElementById('inputSection').style.display = 'block';
                }
                
                let errorMessage = 'Error analyzing channel. ';
                if (error.name === 'AbortError') {
                    errorMessage += 'Request timed out. The server might be starting up. Please try again.';
                } else if (error.message.includes('404')) {
                    errorMessage += 'Channel not found. Please check the handle format (e.g., @channelname).';
                } else if (error.message.includes('500')) {
                    errorMessage += 'Server error. Please try again in a moment.';
                } else if (error.message.includes('Failed to fetch')) {
                    errorMessage += 'Connection failed. This could be due to CORS restrictions if running locally.';
                } else if (error.message.includes('user not found')) {
                    errorMessage += 'Channel not found. Make sure to use the correct format: @channelname';
                } else if (error.message.includes('JSON') || error.message.includes('Invalid response')) {
                    errorMessage += 'Server returned invalid data. It may be experiencing issues.';
                } else {
                    errorMessage += 'Please try again.';
                }
                
                if (!isAutoAnalyze) {
                    showError(errorMessage);
                }
            });
    }

    // Show completion banner for auto-analyze
    function showAutoAnalyzeComplete() {
        const banner = document.createElement('div');
        banner.className = 'auto-completion-banner';
        banner.style.cssText = `
            position: fixed;
            top: 80px;
            left: 50%;
            transform: translateX(-50%);
            background: linear-gradient(135deg, #10B981 0%, #059669 100%);
            color: white;
            padding: 20px 40px;
            border-radius: 16px;
            box-shadow: 0 8px 32px rgba(16, 185, 129, 0.3);
            z-index: 1200;
            text-align: center;
            animation: slideInRight 0.5s ease;
        `;
        banner.innerHTML = `
            <div style="font-size: 20px; font-weight: 600; margin-bottom: 8px;">
                 Auto-Analysis Complete!
            </div>
            <div style="font-size: 14px; opacity: 0.9;">
                Ready to unlock your revenue potential?
            </div>
        `;
        
        document.body.appendChild(banner);
        
        // Auto-hide after 8 seconds
        setTimeout(() => {
            banner.style.animation = 'slideInRight 0.5s ease reverse';
            setTimeout(() => banner.remove(), 500);
        }, 8000);
    }

    // Enhanced popup initialization
    function initializeEnhancedPopups() {
        Object.keys(popups).forEach(key => {
            popupStates[key] = { minimized: false, lastShown: 0, hasShownOnce: false };
            
            const popup = popups[key];
            const element = document.getElementById(popup.element);
            
            // Stagger the initial popup appearances
            setTimeout(() => {
                if (!popupStates[key].minimized && !popupStates[key].hasShownOnce) {
                    // Show peek first
                    element.classList.add('peek');
                    
                    setTimeout(() => {
                        element.classList.remove('peek');
                        element.classList.add('show');
                        popupStates[key].lastShown = Date.now();
                        popupStates[key].hasShownOnce = true;
                        
                        // Auto-hide after 5 seconds
                        setTimeout(() => {
                            if (!popupStates[key].minimized) {
                                element.classList.remove('show');
                                element.classList.add('peek');
                                
                                // Hide peek after 2 more seconds
                                setTimeout(() => {
                                    element.classList.remove('peek');
                                }, 2000);
                            }
                        }, 5000);
                    }, 2000);
                }
            }, popup.peekTime);
        });

        // Enhanced mouse movement handling for re-showing popups
        let lastMouseMove = Date.now();
        let mouseMoveCount = 0;
        
        document.addEventListener('mousemove', () => {
            const now = Date.now();
            mouseMoveCount++;
            
            // Only trigger on significant mouse movement after initial popups have shown
            if (now - lastMouseMove > 10000 && mouseMoveCount > 50) {
                showPopupsOnActivity();
                mouseMoveCount = 0; // Reset counter
            }
            lastMouseMove = now;
        });

        // Enhanced scroll handling for re-showing popups
        let lastScrollTime = 0;
        window.addEventListener('scroll', () => {
            const now = Date.now();
            if (now - lastScrollTime > 15000) { // Only every 15 seconds
                showPopupsOnActivity();
                lastScrollTime = now;
            }
        });
    }

    // Enhanced update dashboard function with fixed number sizing
    function updateDashboard(data) {
        console.log('Updating enhanced dashboard with data:', data);
        
        const cd = data.channel_data || data;
        const videos = data.videos || [];
        const revenueCalc = data.back_catalog_revenue_calculator || {};
        const historicalData = data.historical_lost_revenue || {};
        
        // Enhanced basic stats update
        const channelHandle = (cd.channel_handle || cd.handle || 'Channel').replace(/</g, '&lt;').replace(/>/g, '&gt;');
        document.getElementById('channelName').textContent = `${channelHandle.toUpperCase()} Analytics`;
        
        // Update subscriber count with responsive styling
        const subCountEl = document.getElementById('subCount');
        const formattedSubCount = formatNumber(cd.subscriberCount || 0);
        subCountEl.textContent = formattedSubCount;
        applyResponsiveNumberStyling(subCountEl, formattedSubCount);
        
        // Update view count with responsive styling
        const viewCountEl = document.getElementById('viewCount');
        const formattedViewCount = formatNumber(cd.viewCount || 0);
        viewCountEl.textContent = formattedViewCount;
        applyResponsiveNumberStyling(viewCountEl, formattedViewCount);
        
        // Update video count with responsive styling
        const videoCountEl = document.getElementById('videoCount');
        const formattedVideoCount = formatNumber(cd.videoCount || 0);
        videoCountEl.textContent = formattedVideoCount;
        applyResponsiveNumberStyling(videoCountEl, formattedVideoCount);
        
        // Enhanced animations
        const metricCards = document.querySelectorAll('.yta-metric');
        metricCards.forEach((card, index) => {
            card.classList.add('animate-slide-in');
            card.style.animationDelay = (index * 0.15) + 's';
        });
        
        // Add enhanced loading animation to values
        const metricValues = document.querySelectorAll('.yta-metric-value');
        metricValues.forEach(value => {
            value.classList.add('data-loading');
        });

        // Enhanced revenue calculations with responsive sizing
        const annualRevenue = revenueCalc.annual_totals?.total_additional_revenue || 0;
        const dailyLoss = Math.round(annualRevenue / 365) || 0;
        
        let estimatedAnnualRevenue = annualRevenue;
        if (annualRevenue === 0 && cd.subscriberCount > 0) {
            const avgViewsPerSub = (cd.viewCount || 0) / (cd.subscriberCount || 1);
            estimatedAnnualRevenue = Math.round((cd.viewCount / 1000) * 3.5 * 0.35);
        }
        
        const displayRevenue = annualRevenue || estimatedAnnualRevenue;
        const displayDailyLoss = Math.round(displayRevenue / 365);
        
        // Enhanced revenue display updates with responsive sizing
        const currentDailyLossEl = document.getElementById('currentDailyLoss');
        const formattedDailyLoss = formatCurrency(displayDailyLoss) + '/day';
        currentDailyLossEl.textContent = formattedDailyLoss;
        applyResponsiveNumberStyling(currentDailyLossEl, formattedDailyLoss);
        
        const criticalLostEl = document.getElementById('criticalLostRevenue');
        const formattedCriticalLoss = formatCurrency(displayDailyLoss);
        criticalLostEl.textContent = formattedCriticalLoss;
        applyResponsiveNumberStyling(criticalLostEl, formattedCriticalLoss);
        
        const dailyLossEl = document.getElementById('dailyLoss');
        dailyLossEl.textContent = formattedCriticalLoss;
        applyResponsiveNumberStyling(dailyLossEl, formattedCriticalLoss);
        
        // Update dynamic loss elements with responsive sizing
        const dynamicLossElements = document.querySelectorAll('.daily-loss-dynamic');
        dynamicLossElements.forEach(el => {
            const formattedLoss = formatCurrency(displayDailyLoss) + '/day';
            el.textContent = formattedLoss;
            applyResponsiveNumberStyling(el, formattedLoss);
        });

        // Enhanced revenue potential updates with responsive sizing
        const perVideoRevenue = revenueCalc.per_video_impact?.total_gain || Math.round(displayRevenue / (cd.videoCount || 100));
        const revPerVideoEl = document.getElementById('revPerVideo');
        const formattedPerVideo = formatCurrency(perVideoRevenue);
        revPerVideoEl.textContent = formattedPerVideo;
        applyResponsiveNumberStyling(revPerVideoEl, formattedPerVideo);
        
        const currentSubs = cd.subscriberCount || 0;
        const additionalSubs = Math.round(currentSubs * 0.28);
        const monthlyPotentialEl = document.getElementById('monthlyPotential');
        const formattedAdditionalSubs = formatNumber(additionalSubs);
        monthlyPotentialEl.textContent = formattedAdditionalSubs;
        applyResponsiveNumberStyling(monthlyPotentialEl, formattedAdditionalSubs);
        
        const annualPotentialEl = document.getElementById('annualPotential');
        const formattedAnnualRevenue = formatCurrency(displayRevenue);
        annualPotentialEl.textContent = formattedAnnualRevenue;
        applyResponsiveNumberStyling(annualPotentialEl, formattedAnnualRevenue);
        
        const potentialRevenueEl = document.getElementById('potentialRevenue');
        potentialRevenueEl.textContent = formattedAnnualRevenue;
        applyResponsiveNumberStyling(potentialRevenueEl, formattedAnnualRevenue);

        // Enhanced historical loss with responsive sizing
        const totalLostRevenue = historicalData.summary_metrics?.total_revenue_lost || 
                                historicalData.calculation_details?.base_lost_opportunity || 0;
        const channelAge = historicalData.calculation_details?.channel_age_years || 0;
        const totalLostEl = document.getElementById('totalLostRevenue');
        const formattedTotalLost = formatCurrency(totalLostRevenue);
        totalLostEl.textContent = formattedTotalLost;
        applyResponsiveNumberStyling(totalLostEl, formattedTotalLost);
        document.getElementById('channelAge').textContent = channelAge.toFixed(1) + ' years';

        // Enhanced performance metrics
        const w = cd.weighted_averages || {};
        const engagementRate = w['Engagement (%)'] || 0;
        const likeRate = w['Like Rate (%)'] || 0;
        const commentRate = w['Comment Rate (%)'] || 0;
        
        // Update performance with enhanced animations
        setTimeout(() => {
            document.getElementById('engagementRate').textContent = engagementRate.toFixed(1) + '%';
            document.getElementById('engagementBar').style.width = Math.min(engagementRate * 10, 100) + '%';
            document.getElementById('engagementBar').className = getProgressClass(engagementRate, 1, 3);
            
            document.getElementById('likeRate').textContent = likeRate.toFixed(1) + '%';
            document.getElementById('likeBar').style.width = Math.min(likeRate * 10, 100) + '%';
            document.getElementById('likeBar').className = getProgressClass(likeRate, 1, 2);
            
            document.getElementById('commentRate').textContent = commentRate.toFixed(1) + '%';
            document.getElementById('commentBar').style.width = Math.min(commentRate * 50, 100) + '%';
            document.getElementById('commentBar').className = getProgressClass(commentRate, 0.1, 0.5);
        }, 500);

        // Enhanced health score
        const healthScore = cd.composite_score || cd.average_composite_score || 0;
        updateHealthScore(healthScore);

        // Enhanced performance chart
        updatePerformanceChart({
            engagementRate: engagementRate,
            likeRate: likeRate,
            commentRate: commentRate,
            relativeViews: w['Relative Views'] || 0,
            sentiment: (cd.raw_sentiment_index || 0) * 100
        });

        // Enhanced awards
        updateAwards({
            subscribers: cd.subscriberCount || 0,
            views: cd.viewCount || 0,
            videos: cd.videoCount || 0,
            engagementRate: engagementRate
        });

        // Update videos list and peer comparison
        updateVideosList(videos.slice(0, 5));
        updatePeerComparison(data);
        
        // Show additional result sections
        showResultsSections();
        
        // Update XP display
        updateXPDisplay();
        
        // Add completion XP
        addXP(50, 'Analysis Complete');
    }

    // Helper functions
    function formatNumber(n) {
        if (n >= 1e9) return (n/1e9).toFixed(1) + 'B';
        if (n >= 1e6) return (n/1e6).toFixed(1) + 'M';
        if (n >= 1e3) return (n/1e3).toFixed(1) + 'K';
        return n.toString();
    }

    function formatCurrency(n) {
        return ' + Math.round(n).toLocaleString();
    }

    function getProgressClass(value, poor, good) {
        if (value < poor) return 'yta-progress-fill yta-progress-poor';
        if (value < good) return 'yta-progress-fill yta-progress-good';
        return 'yta-progress-fill yta-progress-excellent';
    }

    function updateHealthScore(score) {
        document.getElementById('scoreValue').textContent = score.toFixed(1);
        document.getElementById('scoreCircle').style.setProperty('--score-deg', `${score * 36}deg`);
        
        let scoreColor, scoreStatus, scoreDesc;
        if (score >= 8.5) {
            scoreColor = '#10B981';
            scoreStatus = 'Excellent - Ready to Scale';
            scoreDesc = 'Your channel is performing at elite levels. Minor tweaks could still add significant revenue.';
        } else if (score >= 7.0) {
            scoreColor = '#10B981';
            scoreStatus = 'Very Good - Minor Optimizations Needed';
            scoreDesc = 'Strong performance with clear opportunities for growth. Optimization can unlock 50%+ more revenue.';
        } else if (score >= 5.5) {
            scoreColor = '#F97316';
            scoreStatus = 'Good - Significant Potential Available';
            scoreDesc = 'Decent foundation but missing key optimizations. You could double your revenue with the right strategy.';
        } else if (score >= 4.0) {
            scoreColor = '#F97316';
            scoreStatus = 'Average - Major Revenue Left Behind';
            scoreDesc = 'Your channel is underperforming. Immediate optimization could triple your earnings.';
        } else {
            scoreColor = '#EF4444';
            scoreStatus = 'Poor - Critical Improvements Needed';
            scoreDesc = 'Major issues are costing you viewers and revenue. Quick fixes could 5x your income.';
        }
        
        document.getElementById('scoreCircle').style.setProperty('--score-color', scoreColor);
        document.getElementById('healthStatus').textContent = scoreStatus;
        document.getElementById('healthStatus').style.color = scoreColor;
        document.getElementById('healthDesc').textContent = scoreDesc;
    }

    function updatePerformanceChart(data) {
        const bars = document.getElementById('chartBars').children;
        const metrics = [
            { value: data.engagementRate, max: 10, color: getBarColor(data.engagementRate, 1, 3) },
            { value: data.likeRate, max: 10, color: getBarColor(data.likeRate, 1, 2) },
            { value: data.commentRate, max: 2, color: getBarColor(data.commentRate, 0.1, 0.5) },
            { value: data.relativeViews || 1.2, max: 3, color: getBarColor(data.relativeViews || 1.2, 0.8, 1.5) },
            { value: data.sentiment || 75, max: 100, color: getBarColor(data.sentiment || 75, 40, 70) }
        ];
        
        metrics.forEach((metric, i) => {
            const percentage = Math.min((metric.value / metric.max) * 100, 100);
            setTimeout(() => {
                bars[i].style.height = Math.max(percentage, 5) + '%';
                bars[i].style.backgroundColor = metric.color;
                bars[i].style.boxShadow = `0 -4px 20px ${metric.color}40`;
            }, i * 200);
        });
        
        // Update values with delay
        setTimeout(() => {
            document.getElementById('engChart').textContent = data.engagementRate.toFixed(1) + '%';
            document.getElementById('likeChart').textContent = data.likeRate.toFixed(1) + '%';
            document.getElementById('commentChart').textContent = data.commentRate.toFixed(1) + '%';
            document.getElementById('relativeChart').textContent = (data.relativeViews || 1.2).toFixed(1) + 'x';
            document.getElementById('sentimentChart').textContent = Math.round(data.sentiment || 75) + '%';
        }, 1000);
    }

    function getBarColor(value, poor, good) {
        if (value < poor) return '#EF4444';
        if (value < good) return '#F97316';
        return '#10B981';
    }

    function updateAwards(data) {
        const awardsEl = document.getElementById('channelAwards');
        let awards = [];
        
        if (data.subscribers >= 1000000) {
            awards.push({ icon: '', title: 'Diamond Creator', desc: '1M+ Subscribers' });
        } else if (data.subscribers >= 100000) {
            awards.push({ icon: '', title: 'Gold Creator', desc: '100K+ Subscribers' });
        } else if (data.subscribers >= 10000) {
            awards.push({ icon: '', title: 'Silver Creator', desc: '10K+ Subscribers' });
        }
        
        if (data.views >= 10000000) {
            awards.push({ icon: '', title: 'Super Viewer', desc: '10M+ Total Views' });
        } else if (data.views >= 1000000) {
            awards.push({ icon: '', title: 'Rising Star', desc: '1M+ Total Views' });
        }
        
        if (data.engagementRate >= 5) {
            awards.push({ icon: '', title: 'High Engagement', desc: '5%+ Engagement Rate' });
        }
        
        if (data.videos >= 100) {
            awards.push({ icon: '', title: 'Active Creator', desc: '100+ Videos' });
        }
        
        let html = '';
        awards.forEach((award, index) => {
            html += `
                <div style="background: linear-gradient(135deg, rgba(255, 215, 0, 0.1) 0%, rgba(255, 215, 0, 0.2) 100%); border: 2px solid rgba(255, 215, 0, 0.4); padding: 12px 18px; border-radius: 24px; display: flex; align-items: center; gap: 12px; transition: all 0.3s; cursor: help; animation: slideInRight 0.6s ease ${index * 0.1}s both;" title="${award.desc}" onmouseover="this.style.transform='scale(1.05)'" onmouseout="this.style.transform='scale(1)'">
                    <span style="font-size: 28px;">${award.icon}</span>
                    <div>
                        <div style="font-weight: 600; font-size: 14px; color: #1a1a1a;">${award.title}</div>
                        <div style="font-size: 11px; color: #6B7280;">${award.desc}</div>
                    </div>
                </div>
            `;
        });
        
        awardsEl.innerHTML = html || '<div style="text-align: center; color: #6B7280; font-size: 14px; padding: 20px;">Keep growing to unlock achievements!</div>';
    }

    function updateVideosList(videos) {
        const videosList = document.getElementById('videosList');
        let html = '';
        let unoptimizedCount = 0;
        
        if (!videos || videos.length === 0) {
            videos = [
                { title: 'My Latest Gaming Setup Tour 2024', views: 45000, date: '2024-01-15', engagement: 2.8, score: 5.2, optimized: false },
                { title: 'Top 10 Tips for Content Creators', views: 128000, date: '2024-01-10', engagement: 4.5, score: 7.8, optimized: true },
                { title: 'Behind the Scenes - How I Film', views: 67000, date: '2024-01-05', engagement: 3.2, score: 6.1, optimized: false },
                { title: 'Q&A - Answering Your Questions', views: 23000, date: '2023-12-28', engagement: 5.1, score: 6.9, optimized: false },
                { title: 'Epic Fail Compilation', views: 234000, date: '2023-12-20', engagement: 6.2, score: 8.3, optimized: true }
            ];
        }

        videos.forEach((video, index) => {
            const title = video.Title || video.title || 'Untitled';
            const views = video.Views || video.views || 0;
            const engagement = parseFloat(video['Engagement (%)'] || video.engagement || 0);
            const score = parseFloat(video['Composite Score (010)'] || video.score || 0);
            const optimized = video['Hashtag Compliant'] === 'Yes' || video.optimized || false;
            
            // Provide fallback date if missing
            let videoDate = video.date || video['Publish Date'] || video.publishedAt;
            if (!videoDate) {
                // Create a realistic date between 1 week and 6 months ago
                const daysAgo = Math.floor(Math.random() * 180) + 7;
                const fallbackDate = new Date();
                fallbackDate.setDate(fallbackDate.getDate() - daysAgo);
                videoDate = fallbackDate.toISOString().split('T')[0];
            }
            
            if (!optimized) unoptimizedCount++;
            
            const engColor = engagement < 3 ? '#EF4444' : engagement < 5 ? '#F97316' : '#10B981';
            const scoreColor = score < 4 ? '#EF4444' : score < 7 ? '#F97316' : '#10B981';
            
            html += `
                <div class="video-item" style="animation: slideInRight 0.6s ease ${index * 0.1}s both;">
                    <div class="opt-indicator ${optimized ? 'optimized' : 'not-optimized'}" title="${optimized ? 'Video is optimized' : 'Video needs optimization'}">
                        ${optimized ? '' : ''}
                    </div>
                    <img class="video-thumbnail" src="${video.thumbnailUrl || video.thumbnail || '' }" alt="${title}" onerror="this.classList.add('error')" />
                    <div style="flex: 1;">
                        <h4 style="margin: 0 0 8px 0; font-size: 16px; color: #1a1a1a; line-height: 1.3;">${title}</h4>
                        <div style="display: flex; gap: 16px; margin-bottom: 8px; font-size: 14px;">
                            <span style="color: #6B7280;"> ${formatNumber(views)} views</span>
                            <span style="color: ${engColor};"> ${engagement.toFixed(1)}% engagement</span>
                            <span style="color: ${scoreColor};"> ${score.toFixed(1)}/10</span>
                        </div>
                        <div style="font-size: 12px; color: #6B7280;">${formatDate(videoDate)}</div>
                    </div>
                </div>
            `;
        });
        
        videosList.innerHTML = html;
        document.getElementById('unoptimizedCount').textContent = unoptimizedCount;
    }

    function updatePeerComparison(data) {
        const peerData = data.peer_comparison || data.benchmark_data || null;
        
        if (peerData) {
            if (peerData.revenue_gap !== undefined) {
                const revenueGap = Math.round(peerData.revenue_gap);
                document.getElementById('revenueComparison').textContent = `${revenueGap}% ${revenueGap < 0 ? 'below' : 'above'} average`;
                document.getElementById('revenueComparison').className = revenueGap < 0 ? 'peer-metric-value peer-worse' : 'peer-metric-value peer-better';
            }
            
            if (peerData.engagement_gap !== undefined) {
                const engagementGap = Math.round(peerData.engagement_gap);
                document.getElementById('engagementComparison').textContent = `${engagementGap}% ${engagementGap < 0 ? 'below' : 'above'} peers`;
                document.getElementById('engagementComparison').className = engagementGap < 0 ? 'peer-metric-value peer-worse' : 'peer-metric-value peer-better';
            }
            
            if (peerData.optimization_gap !== undefined) {
                const optimizationGap = Math.round(peerData.optimization_gap);
                document.getElementById('contentComparison').textContent = `${optimizationGap}% ${optimizationGap < 0 ? 'below' : 'above'} potential`;
                document.getElementById('contentComparison').className = optimizationGap < 0 ? 'peer-metric-value peer-worse' : 'peer-metric-value peer-better';
            }
        } else {
            const cd = data.channel_data || data;
            const engagement = cd.weighted_averages?.['Engagement (%)'] || 0;
            
            if (engagement < 3) {
                document.getElementById('revenueComparison').textContent = '-67% below average';
                document.getElementById('engagementComparison').textContent = '-43% below peers';
                document.getElementById('contentComparison').textContent = '-52% below potential';
            } else if (engagement < 5) {
                document.getElementById('revenueComparison').textContent = '-32% below average';
                document.getElementById('engagementComparison').textContent = '-21% below peers';
                document.getElementById('contentComparison').textContent = '-28% below potential';
            } else {
                document.getElementById('revenueComparison').textContent = '-15% below average';
                document.getElementById('engagementComparison').textContent = '+12% above peers';
                document.getElementById('engagementComparison').className = 'peer-metric-value peer-better';
                document.getElementById('contentComparison').textContent = '-10% below potential';
            }
        }
    }

    function formatDate(dateStr) {
        if (!dateStr) {
            // Provide a realistic fallback date
            const randomDaysAgo = Math.floor(Math.random() * 30) + 1;
            const fallbackDate = new Date();
            fallbackDate.setDate(fallbackDate.getDate() - randomDaysAgo);
            return formatDate(fallbackDate.toISOString());
        }
        
        try {
            let date;
            if (dateStr.includes('T')) {
                date = new Date(dateStr);
            } else if (dateStr.includes('-')) {
                date = new Date(dateStr + 'T00:00:00');
            } else {
                date = new Date(dateStr);
            }
            
            if (isNaN(date.getTime())) {
                // If date parsing fails, provide a fallback
                const randomDaysAgo = Math.floor(Math.random() * 60) + 1;
                const fallbackDate = new Date();
                fallbackDate.setDate(fallbackDate.getDate() - randomDaysAgo);
                date = fallbackDate;
            }
            
            const now = new Date();
            const diffTime = Math.abs(now - date);
            const diffDays = Math.floor(diffTime / (1000 * 60 * 60 * 24));
            
            if (diffDays === 0) return 'Today';
            if (diffDays === 1) return 'Yesterday';
            if (diffDays < 7) return diffDays + ' days ago';
            if (diffDays < 30) return Math.floor(diffDays / 7) + ' weeks ago';
            if (diffDays < 365) return Math.floor(diffDays / 30) + ' months ago';
            return Math.floor(diffDays / 365) + ' years ago';
        } catch (e) {
            // Final fallback
            const randomDaysAgo = Math.floor(Math.random() * 45) + 5;
            return randomDaysAgo + ' days ago';
        }
    }

    function resetAnalysis() {
        autoAnalyzing = false;
        document.querySelector('.yta-results').style.display = 'none';
        document.getElementById('autoAnalyzingNotice').style.display = 'none';
        document.getElementById('inputSection').style.display = 'block';
        document.getElementById('ytaHandle').value = '';
        document.getElementById('ytaHandle').focus();
        
        // Clear all popups
        document.querySelectorAll('.popup-container').forEach(popup => {
            popup.classList.remove('show', 'peek');
        });
        
        // Remove completion banners
        document.querySelectorAll('.auto-completion-banner').forEach(banner => {
            banner.remove();
        });
    }

    function showMessage(message, isSuccess = false) {
        const overlay = document.createElement('div');
        overlay.style.cssText = `
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.6);
            z-index: 1999;
            backdrop-filter: blur(5px);
        `;
        
        const msgDiv = document.createElement('div');
        msgDiv.style.cssText = `
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 40px;
            border-radius: 16px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            z-index: 2000;
            max-width: 440px;
            text-align: center;
        `;
        
        const icon = isSuccess ? '' : '';
        const titleColor = isSuccess ? '#10B981' : '#DC143C';
        const title = isSuccess ? 'Success' : 'Error';
        
        msgDiv.innerHTML = `
            <div style="font-size: 40px; margin-bottom: 20px;">${icon}</div>
            <h3 style="margin: 0 0 20px 0; color: ${titleColor}; font-size: 24px;">${title}</h3>
            <p style="margin: 0 0 28px 0; color: #6B7280; line-height: 1.5; font-size: 16px;">${message}</p>
            <button class="yta-btn-primary" style="font-size: 16px;">
                ${isSuccess ? 'OK' : 'Try Again'}
            </button>
        `;
        
        msgDiv.querySelector('button').onclick = function() {
            overlay.remove();
            msgDiv.remove();
        };
        
        document.body.appendChild(overlay);
        document.body.appendChild(msgDiv);
        
        overlay.onclick = function() {
            overlay.remove();
            msgDiv.remove();
        };
    }

    function showError(message) {
        showMessage(message, false);
    }

    function minimizePopup(popupId) {
        const element = document.getElementById(popupId);
        element.classList.remove('show');
        element.classList.add('minimized');
        popupStates[popupId].minimized = true;
        
        setTimeout(() => {
            element.classList.add('peek');
        }, 1000);
    }

    function showPopupsOnActivity() {
        // Only show one popup at a time on activity
        const popupKeys = Object.keys(popups);
        const randomPopup = popupKeys[Math.floor(Math.random() * popupKeys.length)];
        
        if (!popupStates[randomPopup].minimized) {
            const element = document.getElementById(popups[randomPopup].element);
            const timeSinceLastShown = Date.now() - popupStates[randomPopup].lastShown;
            
            // Only show if enough time has passed (30 seconds)
            if (timeSinceLastShown > 30000) {
                element.classList.add('peek');
                
                setTimeout(() => {
                    element.classList.remove('peek');
                    element.classList.add('show');
                    popupStates[randomPopup].lastShown = Date.now();
                    
                    // Auto-hide after 4 seconds
                    setTimeout(() => {
                        if (!popupStates[randomPopup].minimized) {
                            element.classList.remove('show');
                            element.classList.add('peek');
                            
                            setTimeout(() => {
                                element.classList.remove('peek');
                            }, 2000);
                        }
                    }, 4000);
                }, 1500);
            }
        }
    }

    function initExitIntent() {
        document.addEventListener('mouseout', function(e) {
            if (e.clientY <= 0 && !hasShownExitIntent && document.querySelector('.yta-results').style.display === 'block') {
                const revenue = document.getElementById('annualPotential').textContent.replace(/[,$]/g, '');
                const monthlyRevenue = Math.round(parseInt(revenue) / 12);
                document.querySelector('.exit-revenue').textContent = monthlyRevenue.toLocaleString();
                
                document.getElementById('exitIntentPopup').style.display = 'block';
                hasShownExitIntent = true;
            }
        });
    }

    function closeExitIntent() {
        document.getElementById('exitIntentPopup').style.display = 'none';
    }

    function initTimePrompt() {
        setInterval(() => {
            timeOnPage++;
            if (timeOnPage === 120 && !hasShownTimePrompt && document.querySelector('.yta-results').style.display === 'block') {
                document.getElementById('timePrompt').classList.add('show');
                hasShownTimePrompt = true;
            }
        }, 1000);
    }

    function closeTimePrompt() {
        document.getElementById('timePrompt').classList.remove('show');
    }

    function initScrollCTA() {
        let hasShownScrollCTA = false;
        window.addEventListener('scroll', function() {
            const scrollPercentage = (window.scrollY + window.innerHeight) / document.documentElement.scrollHeight;
            
            if (scrollPercentage > 0.5 && !hasShownScrollCTA && document.querySelector('.yta-results').style.display === 'block') {
                document.getElementById('scrollCTA').classList.add('show');
                hasShownScrollCTA = true;
                
                setTimeout(() => {
                    document.getElementById('scrollCTA').classList.remove('show');
                }, 12000);
            }
        });
    }

    // Show additional sections in results
    function showResultsSections() {
        document.getElementById('videosCard').style.display = 'block';
        document.getElementById('metricsCard').style.display = 'block';
        document.getElementById('socialProofGrid').style.display = 'grid';
        document.getElementById('peerComparison').style.display = 'block';
        document.getElementById('aiCard').style.display = 'block';
    }

    // Initialize the application
    document.addEventListener('DOMContentLoaded', function() {
        // Check for auto-analyze parameter
        checkForAutoAnalyze();
        
        // Initialize usage tracking
        checkUsageReset();
        updateUsageDisplay();
        updateXPDisplay();
        
        // Bind event listeners
        document.getElementById('runBtn').addEventListener('click', () => ytaRun());
        document.getElementById('ytaHandle').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                ytaRun();
            }
        });
    });
</script>
</body>
</html>
